<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Javascrip将html转成pdf</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<H1 
style='FONT-SIZE: 24px; FONT-FAMILY: "Helvetica Neue", Helvetica, Tahoma, Arial, STXihei, "Microsoft YaHei", 微软雅黑, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); FONT-STYLE: normal; MARGIN: 0px 0px 5px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 1.5em; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; text-rendering: optimizeLegibility'>Javascript 
将html转成pdf,下载（html2canvas 和 jsPDF）</H1>
<DIV class=article_meta 
style='FONT-SIZE: 14px; FONT-FAMILY: "Helvetica Neue", Helvetica, Tahoma, Arial, STXihei, "Microsoft YaHei", 微软雅黑, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(211,211,211) 1px dashed; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(153,153,153); PADDING-BOTTOM: 8px; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial'>
<DIV style="MARGIN-BOTTOM: 5px"><SPAN class=timestamp 
style="MARGIN-RIGHT: 5px">时间&nbsp;2017-04-26 22:26:09<SPAN 
class=Apple-converted-space>&nbsp;</SPAN></SPAN><SPAN class=from 
style="MARGIN-RIGHT: 5px"><I class=icon-globe 
style="TEXT-DECORATION: ; HEIGHT: auto; FONT-FAMILY: FontAwesome; WIDTH: auto; VERTICAL-ALIGN: baseline; BACKGROUND-IMAGE: none; BACKGROUND-REPEAT: repeat; BACKGROUND-POSITION: 0px 0px; FONT-WEIGHT: normal; FONT-STYLE: normal; MARGIN-TOP: 0px; DISPLAY: inline; LINE-HEIGHT: normal; MARGIN-RIGHT: 0px; -webkit-font-smoothing: antialiased"></I><SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A class="cut cut28 from" 
style="OVERFLOW: hidden; TEXT-DECORATION: none; MAX-WIDTH: 28%; WHITE-SPACE: nowrap; TEXT-OVERFLOW: ellipsis; WORD-BREAK: keep-all; COLOR: rgb(51,51,51); OUTLINE-WIDTH: 0px; OUTLINE-STYLE: none; DISPLAY: inline; OUTLINE-COLOR: invert; transition: 0.25s" 
href="http://www.tuicool.com/sites/3uEjYv" 
target=_blank>SegmentFault</A></SPAN></DIV>
<DIV class=source><I style="FLOAT: left; FONT-STYLE: normal">原文</I>&nbsp;<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A class="cut cut70" 
style="OVERFLOW: hidden; TEXT-DECORATION: none; MAX-WIDTH: 69%; WHITE-SPACE: nowrap; TEXT-OVERFLOW: ellipsis; WORD-BREAK: keep-all; COLOR: rgb(51,51,51); OUTLINE-WIDTH: 0px; OUTLINE-STYLE: none; DISPLAY: inline-block; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://segmentfault.com/a/1190000009211079?utm_source=tuicool&amp;utm_medium=referral">https://segmentfault.com/a/1190000009211079</A></DIV>
<DIV><SPAN style="MARGIN-RIGHT: 5px">主题</SPAN><SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; COLOR: rgb(51,51,51); OUTLINE-WIDTH: 0px; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="http://www.tuicool.com/topics/11060080" target=_blank><SPAN 
class=new-label 
style="FONT-SIZE: 0.9em; TEXT-DECORATION: none; VERTICAL-ALIGN: baseline; WHITE-SPACE: nowrap; COLOR: rgb(120,120,120); PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; DISPLAY: inline-block; LINE-HEIGHT: 16px; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(242,242,242); MARGIN-RIGHT: 5px">Canvas</SPAN></A></DIV></DIV>
<DIV id=nei class=article_body 
style='WORD-WRAP: break-word; MARGIN-BOTTOM: 0px; FONT-SIZE: 16px; FONT-FAMILY: "Helvetica Neue", Helvetica, Tahoma, Arial, STXihei, "Microsoft YaHei", 微软雅黑, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; OVERFLOW-X: hidden; TEXT-TRANSFORM: none; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 25px; FONT-STYLE: normal; PADDING-TOP: 20px; PADDING-LEFT: 5px; MIN-HEIGHT: 340px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 1.7em; PADDING-RIGHT: 5px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial'>
<DIV style="FONT-SIZE: 16px; LINE-HEIGHT: 1.7em">
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">最近碰到个需求，需要把当前页面生成pdf，并下载。弄了几天，自己整理整理，记录下来，我觉得应该会有人需要 
：）</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">项目源码地址：<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://github.com/linwalker/render-html-to-pdf" rel=nofollow,noindex 
target=_blank>https://github.com/linwalker/...</A></P>
<H2 
style="FONT-SIZE: 18px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.6em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">html2canvas</H2>
<H4 
style="FONT-SIZE: 16px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">简介</H4>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">我们可以直接在浏览器端使用html2canvas,对整个或局部页面进行‘截图’。但这并不是真的截图，而是通过遍历页面DOM结构，收集所有元素信息及相应样式，渲染出canvas 
image。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">由于html2canvas只能将它能处理的生成canvas 
image，因此渲染出来的结果并不是100%与原来一致。但它不需要服务器参与，整个图片都由客户端浏览器生成，使用很方便。</P>
<H4 
style="FONT-SIZE: 16px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">使用</H4>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">使用的API也很简洁，下面代码可以将某个元素渲染成canvas：</P><PRE class="prettyprint hljs css" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-selector-tag style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">html2canvas</SPAN>(<SPAN class=hljs-selector-tag style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">element</SPAN>, {
    <SPAN class=hljs-attribute style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">onrendered</SPAN>: <SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">function</SPAN>(canvas) {
        // canvas is the final rendered &lt;canvas&gt; element
    }
});</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">通过onrendered方法，可以将生成的canvas进行回调，比如插入到页面中：</P><PRE class="prettyprint hljs css" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-selector-tag style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">html2canvas</SPAN>(<SPAN class=hljs-selector-tag style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">element</SPAN>, {
    <SPAN class=hljs-attribute style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">onrendered</SPAN>: <SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">function</SPAN>(canvas) {
       document.body.<SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">appendChild</SPAN>(canvas);
    }
});</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">做个小例子代码如下，在线展示链接<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://linwalker.github.io/render-html-to-pdf/demo1.html" 
rel=nofollow,noindex target=_blank>demo1</A></P><PRE class="prettyprint hljs xml" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">html</SPAN>&gt;</SPAN>
  <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">head</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">title</SPAN>&gt;</SPAN>html2canvas example<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">title</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">style</SPAN> <SPAN class=hljs-attr>type</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"text/css"</SPAN>&gt;</SPAN><SPAN class=undefined>...</SPAN><SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">style</SPAN>&gt;</SPAN>
  <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">head</SPAN>&gt;</SPAN>
  <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">body</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">header</SPAN>&gt;</SPAN>
      <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">nav</SPAN>&gt;</SPAN>
        <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">ul</SPAN>&gt;</SPAN>
          <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">li</SPAN>&gt;</SPAN>one<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">li</SPAN>&gt;</SPAN>
          ...
        <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">ul</SPAN>&gt;</SPAN>
      <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">nav</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">header</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">section</SPAN>&gt;</SPAN>
      <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">aside</SPAN>&gt;</SPAN>
        <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">h3</SPAN>&gt;</SPAN>it is a title<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">h3</SPAN>&gt;</SPAN>
        <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">a</SPAN> <SPAN class=hljs-attr>href</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">""</SPAN>&gt;</SPAN>Stone Giant<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">a</SPAN>&gt;</SPAN>
        ...
     <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">aside</SPAN>&gt;</SPAN>
      <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">article</SPAN>&gt;</SPAN>
        <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">img</SPAN> <SPAN class=hljs-attr>src</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"./Stone.png"</SPAN>&gt;</SPAN>
        <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">h2</SPAN>&gt;</SPAN>Stone Giant<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">h2</SPAN>&gt;</SPAN>
        <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">p</SPAN>&gt;</SPAN>Coming ... <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">p</SPAN>&gt;</SPAN>
        <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">p</SPAN>&gt;</SPAN>以一团石头...<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">p</SPAN>&gt;</SPAN>
      <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">article</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">section</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">footer</SPAN>&gt;</SPAN>write by linwalker @2017<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">footer</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN> <SPAN class=hljs-attr>type</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"text/javascript"</SPAN> <SPAN class=hljs-attr>src</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"./html2canvas.js"</SPAN>&gt;</SPAN><SPAN class=undefined></SPAN><SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN>&gt;</SPAN>
    <SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN> <SPAN class=hljs-attr>type</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"text/javascript"</SPAN>&gt;</SPAN><SPAN class=javascript>
        html2canvas(<SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">document</SPAN>.body, {
          <SPAN class=hljs-attr>onrendered</SPAN>:<SPAN class=hljs-function><SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">function</SPAN>(<SPAN class=hljs-params>canvas</SPAN>) </SPAN>{
            <SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">document</SPAN>.body.appendChild(canvas)
          }
        })
    </SPAN><SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN>&gt;</SPAN>
  <SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">body</SPAN>&gt;</SPAN>
<SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">html</SPAN>&gt;</SPAN></PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">这个例子将页面body中的元素渲染成canvas，并插入到body中</P>
<H2 
style="FONT-SIZE: 18px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.6em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">jsPDF</H2>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">jsPDF库可以用于浏览器端生成PDF。</P>
<H4 
style="FONT-SIZE: 16px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">文字生成PDF</H4>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">使用方法如下：</P><PRE class="prettyprint hljs go" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">// 默认a4大小，竖直方向，mm单位的PDF</SPAN>
<SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> doc = <SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">new</SPAN> jsPDF();

<SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">// 添加文本‘Download PDF’</SPAN>
doc.text(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'Download PDF!'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">10</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">10</SPAN>);
doc.save(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'a4.pdf'</SPAN>);</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">在线演示<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://linwalker.github.io/render-html-to-pdf/demo2.html" 
rel=nofollow,noindex target=_blank>demo2</A></P>
<H4 
style="FONT-SIZE: 16px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">图片生成PDF</H4>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">使用方法如下：</P><PRE class="prettyprint hljs go" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">// 三个参数，第一个方向，第二个单位，第三个尺寸格式</SPAN>
<SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> doc = <SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">new</SPAN> jsPDF(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'landscape'</SPAN>,<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'pt'</SPAN>,[<SPAN class=hljs-number style="COLOR: rgb(136,0,0)">205</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">115</SPAN>])

<SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">// 将图片转化为dataUrl</SPAN>
<SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> imageData = ‘data:image/png;base64,iVBORw0KGgo...’;

doc.addImage(imageData, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'PNG'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">205</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">115</SPAN>);
doc.save(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'a4.pdf'</SPAN>);</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">在线演示<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://linwalker.github.io/render-html-to-pdf/demo3.html" 
rel=nofollow,noindex target=_blank>demo3</A></P>
<H4 
style="FONT-SIZE: 16px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">文字与图片生成PDF</H4><PRE class="prettyprint hljs go" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">// 三个参数，第一个方向，第二个尺寸，第三个尺寸格式</SPAN>
<SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> doc = <SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">new</SPAN> jsPDF(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'landscape'</SPAN>,<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'pt'</SPAN>,[<SPAN class=hljs-number style="COLOR: rgb(136,0,0)">205</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">155</SPAN>])

<SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">// 将图片转化为dataUrl</SPAN>
<SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> imageData = ‘data:image/png;base64,iVBORw0KGgo...’;

<SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//设置字体大小</SPAN>
doc.setFontSize(<SPAN class=hljs-number style="COLOR: rgb(136,0,0)">20</SPAN>);

<SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//10,20这两参数控制文字距离左边，与上边的距离</SPAN>
doc.text(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'Stone'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">10</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">20</SPAN>);

<SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">// 0, 40, 控制文字距离左边，与上边的距离</SPAN>
doc.addImage(imageData, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'PNG'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">40</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">205</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">115</SPAN>);
doc.save(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'a4.pdf'</SPAN>)</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">在线演示<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://linwalker.github.io/render-html-to-pdf/demo4.html" 
rel=nofollow,noindex target=_blank>demo4</A></P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">生成pdf需要把转化的元素添加到jsPDF实例中，也有添加html的功能，但某些元素无法生成在pdf中，因此可以使用html2canvas 
+ 
jsPDF的方式将页面转成pdf。通过html2canvas将遍历页面元素，并渲染生成canvas，然后将canvas图片格式添加到jsPDF实例，生成pdf。</P>
<H2 
style="FONT-SIZE: 18px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.6em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">html2canvas 
+ jsPDF</H2>
<H4 
style="FONT-SIZE: 16px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">单页</H4>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">将demo1的例子修改下：</P><PRE class="prettyprint hljs xml" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN> <SPAN class=hljs-attr>type</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"text/javascript"</SPAN> <SPAN class=hljs-attr>src</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"./js/jsPdf.debug.js"</SPAN>&gt;</SPAN><SPAN class=undefined></SPAN><SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN>&gt;</SPAN>
<SPAN class=hljs-tag>&lt;<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN> <SPAN class=hljs-attr>type</SPAN>=<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"text/javascript"</SPAN>&gt;</SPAN><SPAN class=javascript>
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> downPdf = <SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">document</SPAN>.getElementById(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">"renderPdf"</SPAN>);
      downPdf.onclick = <SPAN class=hljs-function><SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">function</SPAN>(<SPAN class=hljs-params></SPAN>) </SPAN>{
          html2canvas(<SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">document</SPAN>.body, {
              <SPAN class=hljs-attr>onrendered</SPAN>:<SPAN class=hljs-function><SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">function</SPAN>(<SPAN class=hljs-params>canvas</SPAN>) </SPAN>{

                  <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//返回图片dataURL，参数：图片格式和清晰度(0-1)</SPAN>
                  <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> pageData = canvas.toDataURL(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'image/jpeg'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">1.0</SPAN>);

                  <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//方向默认竖直，尺寸ponits，格式a4[595.28,841.89]</SPAN>
                  <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> pdf = <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">new</SPAN> jsPDF(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">''</SPAN>, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'pt'</SPAN>, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'a4'</SPAN>);

                  <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//addImage后两个参数控制添加图片的尺寸，此处将页面高度按照a4纸宽高比列进行压缩</SPAN>
                  pdf.addImage(pageData, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'JPEG'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">595.28</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">592.28</SPAN>/canvas.width * canvas.height );

                  pdf.save(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'stone.pdf'</SPAN>);

              }
          })
      }
</SPAN><SPAN class=hljs-tag>&lt;/<SPAN class=hljs-name style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">script</SPAN>&gt;</SPAN></PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">在线演示<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://linwalker.github.io/render-html-to-pdf/demo5.html" 
rel=nofollow,noindex target=_blank>demo5</A></P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">如果页面内容根据a4比例转化后高度超过a4纸高度呢，生成的pdf会怎么样？会分页吗？</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">你可以试试，验证一下自己的想法:<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://linwalker.github.io/render-html-to-pdf/demo6.html" 
rel=nofollow,noindex target=_blank>demo6</A></P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">jsPDF提供了一个很有用的API，<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>addPage()</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>，我们可以通过<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>pdf.addPage()</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>，来添加一页pdf，然后通过<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>pdf.addImage(...)</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>，将图片赋予这页pdf来显示。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">那么我们如何确定哪里分页？</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">这个问题好回答，我们可以设置一个<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>pageHeight</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>，超过这个高度的内容放入下一页pdf。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">来捋一下思路，将html页面内容生成canvas图片，通过<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>addImage</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>将第一页图片添加到pdf中，超过一页内容，通过<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>addPage()</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>添加pdf页数,然后再通过<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>addImage</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>将下一页图片添加到pdf中。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">嗯～，很好！巴特，难道没有发现问题吗？</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">这个方法实现的前提是 
— — 我们能根据<SPAN class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>pageHeight</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>先将整页内容生成的canvas图片分割成对应的小图片，然后一个萝卜一个坑，一页一页<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>addImage</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>进去。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">What? 
想一想我们的canvas是肿么来的，不用拉上去，直接看下面：</P><PRE class="prettyprint hljs css" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'><SPAN class=hljs-selector-tag style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">html2canvas</SPAN>(<SPAN class=hljs-selector-tag style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">document</SPAN><SPAN class=hljs-selector-class style="COLOR: rgb(136,0,0)">.body</SPAN>, {
    <SPAN class=hljs-attribute style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">onrendered</SPAN>:<SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">function</SPAN>(canvas) {
     //it is here we handle the canvas
    }
})</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">这里的<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>body</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>就是要生成canvas的元素对象，一个元素生成一个canvas；那么我们需要一页一页的canvas，也就是说。。。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">你觉得可能吗？ 
我觉得不太现实，按这思路要获取页面上不同位置的DOM元素，然后通过<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>htnl2canvas(element,option)</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>来处理，先不说能不能刚好在每个<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>pageHeight</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>的位置刚好找到一个DOM元素，就算找到了，这样做累不累。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">累的话</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">：）可以看看下面这种方法</P>
<H4 
style="FONT-SIZE: 16px; FONT-FAMILY: inherit; FONT-WEIGHT: bold; COLOR: ; MARGIN: 0px 0px 0.5em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em; text-rendering: optimizeLegibility">多页</H4>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">我提供的思路是我们只生成一个canvas，对就一个，转化元素就是你要转成pdf内容的母元素，在这篇demo里就是<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>body</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>了；其他不变，也是超过一页内容就<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>addPage</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>，然后<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>addImage</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>,只不过这里添加的是同一个canvas。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">当然这样做只会出现多页重复的pdf，那到底怎么实现正确分页显示。其实主要利用了jsPDF的两点：</P><PRE class="prettyprint hljs dart" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'>- 超过jsPDF实例格式尺寸的内容不显示
（<SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> pdf = <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">new</SPAN> jsPDF(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">''</SPAN>, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'pt'</SPAN>, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'a4'</SPAN>); demo中就是a4纸的尺寸）
- addImage有两个参数可以控制图片在pdf中的位置</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">虽然每一页pdf上显示的图片是相同的，但我们通过调整图片的位置，产生了分页的错觉。以第二页为例，将竖直方向上的偏移设置为<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style='FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: normal; BORDER-BOTTOM: medium none; FONT-WEIGHT: 600; COLOR: rgb(51,51,51) !important; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; BORDER-LEFT: medium none; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(247,247,249); border-radius: 3px'>-841.89</CODE><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>即一张a4纸的高度，又因为超过a4纸高度范围的图片不显示，所以第二页显示了图片竖直方向上[841.89,1682.78]范围内的内容，这就得到了分页的效果，以此类推。</P>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">还是看代码吧：</P><PRE class="prettyprint hljs javascript" style='WORD-WRAP: break-word; FONT-SIZE: 14px; BORDER-TOP: medium none; FONT-FAMILY: Menlo, Monaco, Consolas, "Courier New", monospace; BORDER-RIGHT: medium none; WHITE-SPACE: pre; OVERFLOW-X: auto; BORDER-BOTTOM: medium none; WORD-BREAK: break-all; COLOR: rgb(68,68,68); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px 0px 1.5em; BORDER-LEFT: medium none; DISPLAY: block; LINE-HEIGHT: 1.5em; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(246,246,246); border-radius: 4px'>html2canvas(<SPAN class=hljs-built_in style="COLOR: rgb(57,115,0)">document</SPAN>.body, {
  <SPAN class=hljs-attr>onrendered</SPAN>:<SPAN class=hljs-function><SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">function</SPAN>(<SPAN class=hljs-params>canvas</SPAN>) </SPAN>{

      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> contentWidth = canvas.width;
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> contentHeight = canvas.height;

      <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//一页pdf显示html页面生成的canvas高度;</SPAN>
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> pageHeight = contentWidth / <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">592.28</SPAN> * <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">841.89</SPAN>;
      <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//未生成pdf的html页面高度</SPAN>
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> leftHeight = contentHeight;
      <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//页面偏移</SPAN>
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> position = <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>;
      <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高</SPAN>
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> imgWidth = <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">595.28</SPAN>;
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> imgHeight = <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">592.28</SPAN>/contentWidth * contentHeight;

      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> pageData = canvas.toDataURL(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'image/jpeg'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">1.0</SPAN>);

      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">var</SPAN> pdf = <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">new</SPAN> jsPDF(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">''</SPAN>, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'pt'</SPAN>, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'a4'</SPAN>);

      <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)</SPAN>
      <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//当内容未超过pdf一页显示的范围，无需分页</SPAN>
      <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">if</SPAN> (leftHeight &lt; pageHeight) {
      pdf.addImage(pageData, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'JPEG'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, imgWidth, imgHeight );
      } <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">else</SPAN> {
          <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">while</SPAN>(leftHeight &gt; <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>) {
              pdf.addImage(pageData, <SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'JPEG'</SPAN>, <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>, position, imgWidth, imgHeight)
              leftHeight -= pageHeight;
              position -= <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">841.89</SPAN>;
              <SPAN class=hljs-comment style="COLOR: rgb(136,136,136)">//避免添加空白页</SPAN>
              <SPAN class=hljs-keyword style="FONT-WEIGHT: 700; COLOR: rgb(51,51,51)">if</SPAN>(leftHeight &gt; <SPAN class=hljs-number style="COLOR: rgb(136,0,0)">0</SPAN>) {
                pdf.addPage();
              }
          }
      }

      pdf.save(<SPAN class=hljs-string style="COLOR: rgb(136,0,0)">'content.pdf'</SPAN>);
  }
})</PRE>
<P 
style="FONT-SIZE: 16px; MARGIN: 0px 0px 0.75em; LINE-HEIGHT: 1.7em; TEXT-INDENT: 1em">在线演示<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(148,148,148) 1px dashed; FONT-WEIGHT: bold; COLOR: rgb(148,148,148); OUTLINE-WIDTH: 0px; FONT-STYLE: italic; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; transition: 0.25s" 
href="https://linwalker.github.io/render-html-to-pdf/demo7.html" 
rel=nofollow,noindex target=_blank>demo7</A></P></DIV></DIV></body>
</html>
