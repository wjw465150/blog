<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>探秘Java 7新增垃圾回收器G1特性</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px"><STRONG 
style="FONT-WEIGHT: bold; TEXT-ALIGN: center"><A 
style="TEXT-DECORATION: underline; COLOR: rgb(0,66,118)" 
href="http://developer.51cto.com/art/201001/175830.htm">Java 7</A><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>G1属性</STRONG></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">G1是一个服务端垃圾回收器，有以下属性：</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">◆并行和并发性：G1利用了当今硬件中存在的并行性，当Java应用程序的线程被停止时，它使用所有可用的CPU（核心，硬件线程等）加速其停止，在停止过程中运行Java线程最小化整个堆栈。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">◆代：和其他HotSpot 
GC一样，G1是一代，意味着它在处理新分配的对象（年轻代）和已经生存了一段时间的对象（年老代）时会不同，它主要集中于新对象上的垃圾回收活动，因为它们是最可能回收的，旧对象只是偶尔访问一下，对于大多数Java应用程序，代的垃圾回收对于替代方案具有重要优势。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">◆压缩：和CMS不同，G1会随时间推移对堆栈进行压缩，压缩消除了潜在的碎片问题，确保长时间运行的操作流畅和一致。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">◆可预测性：G1比CMS预测性更佳，这都是由于消除了碎片问题带来的好处，再也没有CMS中停止期间出现的负面影响，另外，G1有一个暂停预测模型，允许它满足（或很少超过）暂停时间目标。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px"><STRONG 
style="FONT-WEIGHT: bold; TEXT-ALIGN: center">Java 7 G1描述</STRONG></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">和其它HotSpot 
GC相比，G1采用了一个非常不同的堆栈布局方法，在G1中，年轻代和年老代之间没有物理隔离，相反，它们之间有一个连续的堆栈，被分成大小一样的区域（region），年轻代可能是一套非连续的区域，年老代也一样，这就允许G1在年轻代和年老代之间灵活地移动资源。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">G1中的回收是通过消除暂停发生的，在此期间，幸存者指的是回收集被转移到另一个区域，以便回收区域可以再生，消除暂停是并行的，所有可用的CPU都会参加，大多数消除暂停收集可用的年轻区域，和其它HotSpot 
GC中的年轻回收是一样的，在暂停期间偶尔也会选择年老区域回收，因为G1在年轻一代回收上还肩负了年老代的回收活动。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">和CMS相同的是，G1会定期执行一个并发标记暂停，这个阶段的主要职责是识别哪一个年老区域的垃圾对象是最完整的，因为这些是最有效和最值得回收的，和CMS不同的是，G1不会执行并发清除暂停，相反，最有用的年老区域是通过并发标记暂停标识的，在随后的消除暂停期间进行回收。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px"><STRONG 
style="FONT-WEIGHT: bold; TEXT-ALIGN: center">使用G1</STRONG></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">G1仍然被看做是试验品，可以使用下面两个参数开启它：</P><PRE style="OVERFLOW: auto; WIDTH: 591px; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 12px/28px 'Courier New', monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 1em; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(230,230,230); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><OL class=dp-xml style="LIST-STYLE-TYPE: decimal; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; WORD-BREAK: normal; COLOR: rgb(92,92,92); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 0px; MARGIN: 0px 0px 1px 55px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(247,247,247)"><LI class=alt style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: ; PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">-XX:+UnlockExperimentalVMOptions&nbsp;-XX:+UseG1GC&nbsp;</SPAN></SPAN></LI></OL></PRE>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">为了设置一个GC暂停时间目标，使用下面的参数：</P><PRE style="OVERFLOW: auto; WIDTH: 591px; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 12px/28px 'Courier New', monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 1em; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(230,230,230); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><OL class=dp-xml style="LIST-STYLE-TYPE: decimal; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; WORD-BREAK: normal; COLOR: rgb(92,92,92); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 0px; MARGIN: 0px 0px 1px 55px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(247,247,247)"><LI class=alt style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: ; PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><SPAN class=attribute style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: red; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#ff0000>-XX:MaxGCPauseMillis</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">&nbsp;=</SPAN><SPAN class=attribute-value style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: blue; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#0000ff>50</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">&nbsp;&nbsp;(暂停时间目标50ms)&nbsp;</SPAN></SPAN></LI></OL></PRE>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">使用G1时还可以指定时间间隔，当GC暂停持续时间没有上面给出的时间长时可以这么用：</P><PRE style="OVERFLOW: auto; WIDTH: 591px; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 12px/28px 'Courier New', monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 1em; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(230,230,230); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><OL class=dp-xml style="LIST-STYLE-TYPE: decimal; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; WORD-BREAK: normal; COLOR: rgb(92,92,92); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 0px; MARGIN: 0px 0px 1px 55px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(247,247,247)"><LI class=alt style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: ; PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><SPAN class=attribute style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: red; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#ff0000>-XX:GCPauseIntervalMillis</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">&nbsp;=</SPAN><SPAN class=attribute-value style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: blue; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#0000ff>200</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">&nbsp;&nbsp;(暂停间隔目标200ms)&nbsp;</SPAN></SPAN></LI></OL></PRE>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">注意上面两个选项表示的目标，没有承诺和保证，在某些情况下它们可能能够工作，GC不是总是能够执行它们。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">另外，年轻代的大小可以明确指定影响消除暂停时间：</P><PRE style="OVERFLOW: auto; WIDTH: 591px; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 12px/28px 'Courier New', monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 1em; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(230,230,230); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><OL class=dp-xml style="LIST-STYLE-TYPE: decimal; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; WORD-BREAK: normal; COLOR: rgb(92,92,92); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 0px; MARGIN: 0px 0px 1px 55px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(247,247,247)"><LI class=alt style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: ; PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">-XX:+</SPAN><SPAN class=attribute style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: red; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#ff0000>G1YoungGenSize</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">=</SPAN><SPAN class=attribute-value style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: blue; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#0000ff>512m</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">&nbsp;(年轻代大小512M)&nbsp;</SPAN></SPAN></LI></OL></PRE>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">G1也使用幸存空间（可能是非连续的区域），它们的大小可以使用一个常见的参数指定，如：</P><PRE style="OVERFLOW: auto; WIDTH: 591px; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 12px/28px 'Courier New', monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 1em; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(230,230,230); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><OL class=dp-xml style="LIST-STYLE-TYPE: decimal; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; WORD-BREAK: normal; COLOR: rgb(92,92,92); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 0px; MARGIN: 0px 0px 1px 55px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(247,247,247)"><LI class=alt style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: ; PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><SPAN class=attribute style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: red; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#ff0000>-XX:SurvivorRatio</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">=</SPAN><SPAN class=attribute-value style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: blue; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><FONT color=#0000ff>6</FONT></SPAN><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">&nbsp;</SPAN></SPAN></LI></OL></PRE>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">最后，为了运行G1充分发挥其潜力，尝试设置以下两个默认被禁用了的参数，因为它们可能会暴露一个罕见的竞争状态：</P><PRE style="OVERFLOW: auto; WIDTH: 591px; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 12px/28px 'Courier New', monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 1em; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(230,230,230); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><OL class=dp-xml style="LIST-STYLE-TYPE: decimal; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; WORD-BREAK: normal; COLOR: rgb(92,92,92); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 0px; MARGIN: 0px 0px 1px 55px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(247,247,247)"><LI class=alt style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: ; PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">-XX:+G1ParallelRSetUpdatingEnabled &nbsp;</SPAN></SPAN><LI style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: rgb(92,92,92); PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">&nbsp;</SPAN><LI class=alt style="LIST-STYLE-TYPE: none; WORD-WRAP: break-word; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BACKGROUND-IMAGE: url(http://images.51cto.com/images/art1105/images/0.gif); BACKGROUND-ATTACHMENT: scroll; BORDER-BOTTOM: medium none; WORD-BREAK: normal; BACKGROUND-POSITION: -498px -70px; COLOR: ; PADDING-BOTTOM: 0px !important; PADDING-TOP: 0px !important; PADDING-LEFT: 10px !important; MARGIN: 0px; BORDER-LEFT: medium none; LINE-HEIGHT: 18px; PADDING-RIGHT: 3px !important; BACKGROUND-COLOR: transparent"><SPAN style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COLOR: black; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; BORDER-LEFT: medium none; PADDING-RIGHT: 0px">-XX:+G1ParallelRSetScanningEnabled &nbsp;</SPAN></LI></OL></PRE>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">注意当设置了-XX:+PrintGCDetails后，G1比起其它HotSpot 
GC要啰嗦得多，因为它会打印每个GC线程的计时和其它有助于进行故障排除的信息，如果你想使GC日志更简单，请使用-verbosegc参数。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px"><STRONG 
style="FONT-WEIGHT: bold; TEXT-ALIGN: center">Java 7 G1最新进展</STRONG></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">G1开发现在主要集中在遗留的可靠性问题和改善性能，同时也在逐步移除下面的限制：</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">◆G1不能完全支持JVM工具接口（JVM 
TI）或Java管理扩展（JMX），因此关于G1的监视和管理工具很可能不能正常工作；</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">◆G1不支持增量永久性代回收，如果一个应用程序产生了许多类转储，需要永久性代回收，这在完整GC期间是可以实现的；</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">◆从GC暂停时间来说，G1有时表现比CMS好有时比CMS差。</P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/28px 宋体; PADDING-LEFT: 0px; MARGIN: 10px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 28px; -webkit-text-stroke-width: 0px">原文：<FONT color=#0000ff>Java HotSpot Garbage Collection</FONT></P></body>
</html>
