<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.javaresearch.org/article/showarticle.jsp?column=2&thread=19509 -->
<HTML>
<HEAD>
<title>javamail处理中文遇到的一些棘手问题及解决方法</title>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<LINK 
href="zaxis.css" rel=stylesheet>
<SCRIPT language=JavaScript 
src="common.js"></SCRIPT>
<META content="MSHTML 6.00.2900.2180" name=GENERATOR>
</HEAD>
<BODY text=#000000 bgColor=#f1f1f1 leftMargin=0 topMargin=2><!-- start of header row -->
<TABLE height=64 cellSpacing=0 cellPadding=0 width=762 align=center border=0>
  <TBODY>
    <TR>
      <TD bgColor=#000000 colSpan=3 height=1></TD>
    </TR>
    <TR>
      <TD width=1 bgColor=#000000><IMG height=1 src="" width=1></TD>
      <TD width=760 height=64><TABLE height=64 cellSpacing=0 cellPadding=0 width="100%" align=center 
      border=0>
          <TBODY>
            <TR bgColor=#ffffff>
              <TD vAlign=middle align=left width=180><A 
            href="http://www.javaresearch.org/index.jsp"><IMG 
            border=0 src="logo.gif"></A></TD>
              <TD vAlign=middle align=center width=468 height=60><CENTER>
                  <IFRAME marginWidth=0 marginHeight=0 src="about_blank" 
            frameBorder=0 width=468 scrolling=no height=60 
            valign="bottom"> </IFRAME>
                </CENTER></TD>
              <TD vAlign=middle align=right width=120><BR>
                2004年11月29日<BR>
              <A 
            href="http://www.javaresearch.org/login.jsp"><FONT color=black>登录/注册</FONT></A></TD>
            </TR>
          </TBODY>
        </TABLE>
        <TABLE height=21 cellSpacing=1 cellPadding=0 width="100%" bgColor=#995f14 
      border=0>
          <TBODY>
            <TR bgColor=#006699>
              <TD bgColor=#000000><P align=right><FONT color=#ffffff>[&nbsp;当前在线：297，本次峰值：498&nbsp;]</FONT>&nbsp;&nbsp;&nbsp;&nbsp; <A href="http://www.javaresearch.org/index.jsp"><FONT color=#ffffff>首页</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/news"><FONT color=#ffffff>Java新闻</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/article"><FONT color=#ffffff>研究文集</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/forum"><FONT color=#ffffff>专题论坛</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/job/forum.jsp"><FONT color=#ffffff>求职招聘</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/oss"><FONT color=#ffffff>开源软件</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/jrworks.jsp"><FONT color=#ffffff>JR 作品</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/dn.jsp"><FONT color=#ffffff>精品下载</FONT></A><FONT color=#ffffff> | </FONT><A 
            href="http://www.javaresearch.org/aboutus.jsp"><FONT color=#ffffff>关于我们</FONT></A><FONT color=#ffffff>&nbsp;&nbsp; </FONT></P></TD>
            </TR>
          </TBODY>
        </TABLE></TD>
      <TD width=1 bgColor=#000000><IMG height=1 src="" 
width=1></TD>
    </TR>
  </TBODY>
</TABLE><!-- start of news row -->
<TABLE height=180 cellSpacing=0 cellPadding=0 width=762 align=center border=0>
  <TBODY>
    <TR>
      <TD width=1 bgColor=#000000 height=180><IMG height=1 src="" width=1></TD><!--right column-->
      <TD vAlign=top width=760 bgColor=#ffffff height=180><DIV align=center>
          <TABLE height=5 cellSpacing=0 cellPadding=0 width="100%" border=0><!--space-->
            <TBODY>
              <TR>
                <TD align=center width="95%"><!-- content begin -->
                  
                  <TABLE cellSpacing=2 cellPadding=0 width="100%" border=0>
                    <TBODY>
                      <TR>
                        <TD align=left width="40%"><B><A 
                  href="http://www.javaresearch.org/index.jsp">首页</A> » <A 
                  href="http://www.javaresearch.org/article/index.jsp">研究文集</A> » <A 
                  href="http://www.javaresearch.org/article/column.jsp?column=2">J2EE综合</A> </B></TD>
                        <TD align=right width="60%"><A 
                  href="http://www.javaresearch.org/search?inurl=article%2Fshowarticle.jsp&amp;noencode=true&amp;searchType=custom&amp;num=30&amp;queryWords=java+javamail+%E4%B8%AD%E6%96%87+%E9%97%AE%E9%A2%98+%E6%96%B9%E6%B3%95+" 
                  target=_blank><IMG border=0 alt=搜索标题相关文章 
                  src="search.gif" width=17 
                  height=17>&nbsp;</A><A 
                  href="http://www.javaresearch.org/search?inurl=article%2Fshowarticle.jsp&amp;noencode=true&amp;searchType=custom&amp;num=30&amp;queryWords=java+javamail+%E4%B8%AD%E6%96%87+%E9%97%AE%E9%A2%98+%E6%96%B9%E6%B3%95+" 
                  target=_blank>搜索标题相关文章</A>&nbsp;&nbsp;&nbsp;&nbsp; <A 
                  href="http://www.javaresearch.org/article/postarticle.jsp?column=2&amp;thread=19509&amp;reply=true"><IMG 
                  border=0 alt=评论此文章 
                  src="reply.gif" width=17 
                  height=17></A>&nbsp;<A class=title 
                  title="Click to reply to this topic" 
                  href="http://www.javaresearch.org/article/postarticle.jsp?column=2&amp;thread=19509&amp;reply=true">发表评论</A> <!--
&nbsp;&nbsp;<a href="file:///J:/search.jsp?column=2"><img src="search.gif" width="17" height="17" alt="搜索栏目" border="0"></a>&nbsp;<a href="file:///J:/search.jsp?column=2" class="title" title="搜索栏目">搜索文章</a> --></TD>
                      </TR>
                    </TBODY>
                  </TABLE>
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                      <TR>
                        <TD><!-- start of article title -->
                          
                          <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                  bgColor=#ffffff border=0>
                            <TBODY>
                              <TR>
                                <TD class=title1 align=center width="100%" bgColor=#eeeeee 
                      colSpan=3 
                      height=40><B>我使用javamail处理中文遇到的一些棘手问题及解决方法</B></TD>
                              </TR>
                              <TR>
                                <TD align=center width="100%" bgColor=#eeeeee><A 
                        href="http://www.javaresearch.org/profile.jsp?user=48061">topmint</A> 原创&nbsp; (参与分：13，专家分：0)&nbsp;&nbsp; 发表：2004-11-27 下午2:16 
                                  &nbsp;&nbsp;版本：1.0 &nbsp;&nbsp;阅读：<B>91</B>次 </TD>
                              </TR>
                            </TBODY>
                        </TABLE></TD>
                      </TR><!-- end of article title -->
                      <TR>
                        <TD vAlign=top align=center width="100%"><!--start of article content -->
                          
                          <TABLE width="98%" border=0>
                            <TBODY>
                              <TR>
                                <TD class=text align=left width="100%"><BR><!-- Google Ad -->
                                  
                                  <TABLE cellSpacing=0 cellPadding=0 align=right 
                          border=0>
                                    <TBODY>
                                      <TR>
                                        <TD><TABLE cellSpacing=0 cellPadding=0 align=left 
                              border=0>
                                            <TBODY>
                                              <TR>
                                                <TD><SCRIPT type=text/javascript><!--
			google_ad_client = "pub-2141342037947367";
			google_ad_width = 125;
			google_ad_height = 125;
			google_ad_format = "125x125_as";
			google_ad_channel ="3662469727";
			google_color_border = "CCCCCC";
			google_color_bg = "FFFFFF";
			google_color_link = "000000";
			google_color_url = "666666";
			google_color_text = "333333";
			//--></SCRIPT> 
                                                  <SCRIPT 
                                src="show_ads.js" 
                                type=text/javascript>
			</SCRIPT></TD>
                                              </TR>
                                            </TBODY>
                                        </TABLE></TD>
                                      </TR>
                                    </TBODY>
                                  </TABLE>
                                  先从最棘手的来吧<BR>
                                  <BR>
                                  <B>1.如何正确显示邮件内容为中文明码而且Content-Type里没有指定charset的邮件</B><BR>
                                  <BR>
                                  &nbsp;&nbsp;&nbsp;据我所知，新浪发出的邮件都是这样的,我的youmail里无法正确显示，为乱码.后来分析内容，才知道是他们的邮件里没有指定charset..<BR>
                                  邮件内容部分如:<BR>
                                  <DIV class=codeStyle>
                                    <OL>
                                      <LI>From:&nbsp;hrbtvu_ly&nbsp;&lt;foo@sina.com&gt;
                                      <LI>To:&nbsp;foo@mail.foo.com
                                      <LI><B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/javax/security/auth/Subject.java.html" 
                          target=_blank><FONT class=classLink><U>Subject</U></FONT></A></B>:&nbsp;你好啊
                                      <LI>MIME-<A 
                          href="http://www.javaresearch.org:88/source/junit3.8.1/junit/runner/Version.java.html" 
                          target=_blank><FONT class=classLink><U>Version</U></FONT></A>:&nbsp;1.0
                                      <LI><B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/sql/Date.java.html" 
                          target=_blank><FONT class=classLink><U>Date</U></FONT></A></B>:&nbsp;Thu,&nbsp;11&nbsp;Nov&nbsp;2004&nbsp;12:51:30&nbsp;+0800
                                      <LI>X-<A 
                          href="http://www.javaresearch.org:88/source/ant1.6.2/org/apache/tools/ant/taskdefs/email/Mailer.java.html" 
                          target=_blank><FONT class=classLink><U>Mailer</U></FONT></A>:&nbsp;SinaMail&nbsp;3.0Beta&nbsp;(FireToad)
                                      <LI>X-Priority:&nbsp;3
                                      <LI>X-Antivirus-MYDOMAIN-1.22-st-qms:&nbsp;added&nbsp;fake&nbsp;Content-Type&nbsp;header
                                      <LI>Content-Type:&nbsp;textplain
                                      <LI>
                                      <LI>你好啊 </LI>
                                    </OL>
                                  </DIV>
                                  <BR>
                                  可以看出连标题都是中文明码的，这个我后面讲到如何处理.<BR>
                                  我的解决方法是:修改com.sun.mail.handlers.text_plain类的getCharset()，修改成:<BR>
                                  &nbsp;&nbsp;&nbsp;&nbsp;
                                  <DIV class=codeStyle>
                                    <OL>
                                      <LI><B><FONT color=#0000ff>private</FONT></B>&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/String.java.html" 
                          target=_blank><FONT class=classLink><U>String</U></FONT></A></B>&nbsp;getCharset(<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/String.java.html" 
                          target=_blank><FONT class=classLink><U>String</U></FONT></A></B>&nbsp;s)
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>try</FONT></B>
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A 
                          href="http://www.javaresearch.org:88/source/j2ee1.3.1/javax/mail/internet/ContentType.java.html" 
                          target=_blank><FONT class=classLink><U>ContentType</U></FONT></A>&nbsp;contenttype&nbsp;=&nbsp;<B><FONT color=#0000ff>new</FONT></B>&nbsp;<A 
                          href="http://www.javaresearch.org:88/source/j2ee1.3.1/javax/mail/internet/ContentType.java.html" 
                          target=_blank><FONT class=classLink><U>ContentType</U></FONT></A>(s);
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/String.java.html" 
                          target=_blank><FONT class=classLink><U>String</U></FONT></A></B>&nbsp;s1&nbsp;=&nbsp;contenttype.getParameter(<FONT color=#ff33ff>"charset"</FONT>);
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>if</FONT></B>(s1&nbsp;==&nbsp;<B><FONT color=#0000ff>null</FONT></B>)
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s1&nbsp;=&nbsp;<FONT color=#ff33ff>"gb2312"</FONT>;
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>return</FONT></B>&nbsp;<A 
                          href="http://www.javaresearch.org:88/source/j2ee1.3.1/javax/mail/internet/MimeUtility.java.html" 
                          target=_blank><FONT class=classLink><U>MimeUtility</U></FONT></A>.javaCharset(s1);
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>catch</FONT></B>(<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/Exception.java.html" 
                          target=_blank><FONT class=classLink><U>Exception</U></FONT></A></B>&nbsp;_ex)
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>return</FONT></B>&nbsp;<FONT color=#ff33ff>"gb2312"</FONT>;
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;} </LI>
                                    </OL>
                                  </DIV>
                        <P>
                                  <BR>
                                  这是我认为最简单的办法了.<BR>
                                  <BR>
                                  <B>2.Subject或其他字段为中文明码的处理</B><BR>
                                  <BR>
                                  这里我提供我写的一个方法,能够统一处理编码过的或者明文的字符串:<BR></P>
                        <P>&nbsp;&nbsp;&nbsp;&nbsp; </P>
                                  
                                  <DIV class=codeStyle>
                                    <OL>
                                      <LI><I><FONT color=#339900>/**</FONT></I>
                                      <LI><I><FONT color=#339900>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;返回解码后的字符串</FONT></I>
                                      <LI><I><FONT color=#339900>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT></I>
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>public</FONT></B>&nbsp;<B><FONT color=#0000ff>static</FONT></B>&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/String.java.html" 
                          target=_blank><FONT class=classLink><U>String</U></FONT></A></B>&nbsp;getDecodeText(<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/String.java.html" 
                          target=_blank><FONT class=classLink><U>String</U></FONT></A></B>&nbsp;eword)&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>if</FONT></B>&nbsp;(eword&nbsp;==&nbsp;<B><FONT color=#0000ff>null</FONT></B>)&nbsp;<B><FONT color=#0000ff>return</FONT></B>&nbsp;<B><FONT color=#0000ff>null</FONT></B>;
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>try</FONT></B>&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/util/regex/Pattern.java.html" 
                          target=_blank><FONT class=classLink><U>Pattern</U></FONT></A></B>&nbsp;p&nbsp;=&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/util/regex/Pattern.java.html" 
                          target=_blank><FONT class=classLink><U>Pattern</U></FONT></A></B>.compile(<FONT color=#ff33ff>"=\\?.+\\?="</FONT>);
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/util/regex/Matcher.java.html" 
                          target=_blank><FONT class=classLink><U>Matcher</U></FONT></A></B>&nbsp;m&nbsp;=&nbsp;p.matcher(eword);
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/StringBuffer.java.html" 
                          target=_blank><FONT class=classLink><U>StringBuffer</U></FONT></A></B>&nbsp;sb&nbsp;=&nbsp;<B><FONT color=#0000ff>new</FONT></B>&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/StringBuffer.java.html" 
                          target=_blank><FONT class=classLink><U>StringBuffer</U></FONT></A></B>();
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>boolean</FONT></B>&nbsp;result&nbsp;=&nbsp;m.find();
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>if</FONT></B>&nbsp;(result)&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>while</FONT></B>&nbsp;(result)&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m.appendReplacement(sb,&nbsp;<A 
                          href="http://www.javaresearch.org:88/source/j2ee1.3.1/javax/mail/internet/MimeUtility.java.html" 
                          target=_blank><FONT class=classLink><U>MimeUtility</U></FONT></A>.decodeText(m.group()));
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;m.find();
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m.appendTail(sb);
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>return</FONT></B>&nbsp;sb.toString();
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B><FONT color=#0000ff>else</FONT></B>&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/String.java.html" 
                          target=_blank><FONT class=classLink><U>String</U></FONT></A></B>&nbsp;decodevalue&nbsp;=&nbsp;<B><FONT color=#0000ff>new</FONT></B>&nbsp;<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/String.java.html" 
                          target=_blank><FONT class=classLink><U>String</U></FONT></A></B>(eword.getBytes(<FONT color=#ff33ff>"ISO8859-1"</FONT>),&nbsp;<FONT color=#ff33ff>"GBK"</FONT>);
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>return</FONT></B>&nbsp;decodevalue;
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B><FONT color=#0000ff>catch</FONT></B>&nbsp;(<B><A 
                          href="http://www.javaresearch.org:88/source/jdk142/java/lang/Exception.java.html" 
                          target=_blank><FONT class=classLink><U>Exception</U></FONT></A></B>&nbsp;e)&nbsp;{
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><FONT color=#0000ff>return</FONT></B>&nbsp;eword;
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                                      <LI>&nbsp;&nbsp;&nbsp;&nbsp;} </LI>
                                    </OL>
                                  </DIV>
                                  <BR>
                                  <BR>
                                  <B>3.发送邮件中中文的处理</B><BR>
                                  <BR>
                                  &nbsp;&nbsp;&nbsp;邮件标题:&nbsp;newmsg.setSubject(subject,&nbsp;"GBK");<BR>
                                  &nbsp;&nbsp;&nbsp;附件:<BR>
                                  &nbsp;&nbsp;BASE64Encoder&nbsp;enc&nbsp;=&nbsp;new&nbsp;BASE64Encoder();<
                                  BR>&nbsp;&nbsp;&nbsp;mbp2.setFileName("=?GBK?B?"&nbsp;+&nbsp;enc.encode((new&nbsp;String(ai.getFileName()).getBytes("GBK")))&nbsp;+&nbsp;"?=");<BR>
                                  &nbsp;&nbsp;&nbsp;这只是给出一个方法，具体你还要自己改一改<BR>
                                  &nbsp;&nbsp;内容:msg.setContent(body,&nbsp;"text/plain;charset=GBK");<BR>
                                  &nbsp;&nbsp;主要原则是处处指定charset<BR>
                                  <BR>
                                  今天先说这么多了，有问题大家mailto:topmint@hit.edu.cn,或qq:100949955<BR>
                                  <BR>
                                  <BR>
                                  <TABLE width="100%">
                                    <TBODY>
                                      <TR>
                                        <TD align=left width="30%"><A 
                              href="http://www.javaresearch.org/copyright.jsp">版权声明</A> &nbsp; <A href="mailto:topmint@163.com">给作者写信</A></TD>
                                        <TD align=right width="70%"><TABLE cellPadding=1 align=right>
                                            <TBODY>
                                              <TR>
                                                <TD bgColor=#eeeeee><TABLE cellSpacing=0 cellPadding=1 border=0>
                                                    <TBODY>
                                                      <TR>
                                                        <TD bgColor=#ffffff><FONT color=#777777><NOBR>本篇文章对您是否有帮助？&nbsp;&nbsp;投票：<STRONG> <A 
                                href="http://www.javaresearch.org/article/showarticle.jsp?column=2&amp;thread=19509&amp;vote=1">是</A></STRONG> &nbsp;&nbsp;&nbsp;<STRONG><A 
                                href="http://www.javaresearch.org/article/showarticle.jsp?column=2&amp;thread=19509&amp;vote=0">否</A></STRONG> &nbsp;&nbsp;&nbsp;&nbsp;投票结果：&nbsp;&nbsp; <IMG 
                                src="cool.gif"><STRONG>&nbsp;&nbsp;0</STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<IMG 
                                src="sad.gif"><STRONG>&nbsp;&nbsp;0</STRONG></NOBR><BR>
                                                        </FONT></TD>
                                                      </TR>
                                                    </TBODY>
                                                </TABLE></TD>
                                              </TR>
                                            </TBODY>
                                        </TABLE></TD>
                                      </TR>
                                      <TR>
                                        <TD colSpan=2>作者其它文章：
                                          <UL>
                                          </UL>
                                        <A class=l3 
                              href="http://www.javaresearch.org/expert.jsp?expert=topmint&amp;expertid=48061" 
                              target=_blank>作者全部文章</A></TD>
                                      </TR>
                                    </TBODY>
                                </TABLE></TD>
                              </TR>
                            </TBODY>
                        </TABLE></TD>
                      </TR><!--end of article content -->
                      <TR>
                        <TD><!-- start of comment -->
                          
                          <TABLE cellSpacing=2 cellPadding=0 width="100%" align=center 
                  border=0>
                            <TBODY>
                              <TR>
                                <TD vAlign=top noWrap width="30%"><A 
                        title=原来写的一篇老文：实战Log4j 
                        href="http://www.javaresearch.org/article/showarticle.jsp?column=2&amp;thread=19536"><IMG 
                        border=0 hspace=2 alt ="Topic: 
                        原来写的一篇老文：实战Log4j" src="prev.gif" 
                        width=10 height=10 ></A> <A class=title 
                        title="Topic: 原来写的一篇老文：实战Log4j" 
                        href="http://www.javaresearch.org/article/showarticle.jsp?column=2&amp;thread=19536">上一篇文章</A></TD>
                                <TD align=center width="40%"><TABLE cellSpacing=2 cellPadding=0 border=0>
                                    <TBODY>
                                      <TR>
                                        <TD><A 
                              href="http://www.javaresearch.org/article/column.jsp?column=2"><IMG 
                              border=0 alt=返回文章列表 
                              src="back_to.gif" 
                              width=12 height=12></A></TD>
                                        <TD noWrap><A class=title title=返回文章列表 
                              href="http://www.javaresearch.org/article/column.jsp?column=2">返回〔J2EE综合〕</A></TD>
                                      </TR>
                                    </TBODY>
                                </TABLE></TD>
                                <TD vAlign=top noWrap width="30%"><A class=title 
                        title=《Getting&nbsp;Started&nbsp;with&nbsp;JBoss&nbsp;J2EE&nbsp;Applications&nbsp;on&nbsp;JBoss&nbsp;4.0中文版》 
                        href="http://www.javaresearch.org/article/showarticle.jsp?column=2&amp;thread=17632">下一篇文章</A> <A 
                        title=《Getting&nbsp;Started&nbsp;with&nbsp;JBoss&nbsp;J2EE&nbsp;Applications&nbsp;on&nbsp;JBoss&nbsp;4.0中文版》 
                        href="http://www.javaresearch.org/article/showarticle.jsp?column=2&amp;thread=17632"><IMG 
                        border=0 
                        hspace=2 alt 
                        ="Topic: 《Getting&nbsp;Started&nbsp;with&nbsp;JBoss&nbsp;J2EE&nbsp;Applications&nbsp;on&nbsp;JBoss&nbsp;4.0中文版》" 
                        src="next.gif" width=10 height=10 ></A></TD>
                              </TR>
                            </TBODY>
                          </TABLE>
                        <BR></TD>
                      </TR><!-- end of comment --><!--end of article -->
                    </TBODY>
                  </TABLE><!-- end of content --></TD>
              </TR>
            </TBODY>
          </TABLE>
        </DIV></TD>
      <TD width=1 bgColor=#000000 height=180><IMG height=1 src="" 
  width=1></TD>
    </TR>
  </TBODY>
</TABLE><!-- end of news row--><!--start of bottom row-->
<TABLE cellSpacing=0 cellPadding=0 width=762 align=center border=0>
  <TBODY>
    <TR>
      <TD width=1 bgColor=#000000><IMG height=1 src="" width=1></TD>
      <TD width=760><!--start sponsorlink-->
        
        <TABLE cellSpacing=0 cellPadding=0 width=760 border=0>
          <TBODY>
            <TR>
              <TD bgColor=#f2f2f2><TABLE cellSpacing=0 cellPadding=0 width=740 align=center 
              border=0>
                  <TBODY>
                    <TR>
                      <TD vAlign=bottom height=3></TD>
                    </TR>
                    <TR>
                      <TD vAlign=bottom><B>文字广告链接</B></TD>
                    </TR>
                  </TBODY>
                </TABLE></TD>
            </TR>
            <TR>
              <TD align=center bgColor=#f2f2f2><TABLE cellSpacing=0 cellPadding=2 width=750 border=0>
                  <TBODY>
                    <TR>
                      <TD align=center bgColor=#000000 colSpan=2 height=1></TD>
                    </TR>
                    <TR>
                      <TD class=small align=right width="25%">如意报表：</TD>
                      <TD class=small width="75%"><A href="http://www.soft2web.com/" 
                  target=_blank>领先的Web报表工具,可视化报表设计器,稳定强劲的J2EE报表引擎,为Java报表开发首选工具</A></TD>
                    </TR>
                    <TR>
                      <TD class=small align=right width="25%">MathMax Report：</TD>
                      <TD class=small width="75%"><A href="http://www.mathmax.net/" 
                  target=_blank>as one of the best web report tools</A></TD>
                    </TR>
                    <TR>
                      <TD class=small align=right width="25%">数巨报表：</TD>
                      <TD class=small width="75%"><A href="http://www.maxrpt.com/" 
                  target=_blank>面向集成的WEB报表系统，全程图形化设计，全面的STRUTS构架支持</A></TD>
                    </TR><!--
		<tr> 
          <td width="25%" align="right" class="small">CartExpert网上购物系统：</td>
          <td width="75%" class="small"><a href="http://www.cartexpert.com/" target="_blank">想开网店？最完善、最先进的购物系统解决方案，尽在CartExpert!</a></td>
        </tr>
-->
                    <TR>
                      <TD class=small align=right width="25%">华丹CHARISMA报表平台：</TD>
                      <TD class=small width="75%"><A href="http://www.huadan.biz/" 
                  target=_blank>基于J2EE，MVC极速开发平台＋自定义Web报表引擎</A></TD>
                    </TR>
                  </TBODY>
                </TABLE></TD>
            </TR>
          </TBODY>
        </TABLE>
        <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
          <TBODY>
            <TR>
              <TD bgColor=#995f14 height=1><IMG height=1 src="" width=1></TD>
            </TR>
            <TR>
              <TD bgColor=#0099cc height=20><P align=center><A 
            href="http://www.javaresearch.org/aboutus.jsp"><FONT color=#ffffff>关于 JR</FONT></A>&nbsp; |&nbsp; <A 
            href="http://www.javaresearch.org/copyright.jsp"><FONT color=#ffffff>版权声明</FONT></A>&nbsp; |&nbsp; <A 
            href="mailto:webmaster@javaresearch.org"><FONT color=#ffffff>联系我们</FONT></A>&nbsp; </P></TD>
            </TR>
            <TR>
              <TD bgColor=#000000 height=20><P align=center><FONT face="Arial, Helvetica, sans-serif" color=#ffffff>©2002-2004&nbsp;Java研究组织&nbsp;版权所有 </FONT></P></TD>
            </TR>
            <TR>
              <TD bgColor=#995f14 height=1></TD>
            </TR>
          </TBODY>
        </TABLE></TD>
      <TD width=1 bgColor=#000000><IMG height=1 src="" 
width=1></TD>
    </TR>
  </TBODY>
</TABLE><!--end of bottom row-->
</BODY>
</HTML>
