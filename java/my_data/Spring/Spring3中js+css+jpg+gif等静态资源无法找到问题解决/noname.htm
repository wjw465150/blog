<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Spring3中js+css+jpg+gif等静态资源无法找到问题解决</title>
<body><!--StartFragment--><div class="postTitle">
		<a id="viewpost1_TitleUrl" class="postTitle2" href="http://www.blogjava.net/Steven-bot/articles/361333.html">Spring3中js/css/jpg/gif等静态资源无法找到（No mapping found for HTTP request with URI）问题解决</a>
	</div>
	<div><p><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial">最近项目中使用到Spring3，在感叹Spring3注解配置清爽的同时竟然出现了这个不和谐的事情，实在无法忍受</span></p> <p><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial; COLOR: #99e600; BACKGROUND-COLOR: #660000">问题：</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial">部署项目后程序加载或用浏览器访问时出现类似的警告，2011-01-19  10:52:51,646 WARN [org.springframework.web.servlet.PageNotFound] -</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial; COLOR: #ff0000">&lt;No mapping found  for HTTP request with URI [/sandDemo001/images/1.jpg] in DispatcherServlet with  name 'spring'&gt;</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial">，主要看尖括号内部分。</span></p> <p><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial; COLOR: #99e600; BACKGROUND-COLOR: #660000">问题原因：</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial">罪魁祸首是web.xml下对spring的DispatcherServlet请求url映射的配置，原配置如下：</span></p> <p><strong><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&lt;servlet&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: 'Comic Sans MS'; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9" >&nbsp;&nbsp;&nbsp;  &lt;servlet-name&gt;spring&lt;/servlet-name&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;/servlet&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;servlet-mapping&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;servlet-name&gt;spring&lt;/servlet-name&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;/servlet-mapping&gt;</span></strong></p> <p><span style="FONT-SIZE: 14px; COLOR: #660000; BACKGROUND-COLOR: #ffffff"><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial; COLOR: #99e600; BACKGROUND-COLOR: #660000">分析原因：</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&lt;servlet-mapping&gt;</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial">的</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial; COLOR: #660000; BACKGROUND-COLOR: #d9d9d9">&lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial">
把所有的请求都交给spring去处理了，而所有available的请求url都是在Constroller里使用类似
@RequestMapping(value  = "/login/{user}", method =  
RequestMethod.GET)这样的注解配置的，这样的话对js/css/jpg/gif等静态资源的访问就会得不到。</span></span></p> <p><span style="FONT-SIZE: 14px; COLOR: #660000; BACKGROUND-COLOR: #ffffff"><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial; COLOR: #99e600; BACKGROUND-COLOR: #660000">解决方法：</span><span style="FONT-SIZE: 16px; FONT-FAMILY: Arial">在web.xml里添加如下的配置</span></span></p> <p><strong><span style="FONT-SIZE: 14px; COLOR: #660000; BACKGROUND-COLOR: #ffffff"><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&lt;servlet-mapping&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;  &lt;servlet-name&gt;default&lt;/servlet-name&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;  &nbsp;&lt;url-pattern&gt;*.css&lt;/url-pattern&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&lt;/servlet-mapping&gt;</span><br>&nbsp;<br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&lt;servlet-mapping&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;  &lt;servlet-name&gt;default&lt;/servlet-name&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;&lt;url-pattern&gt;*.gif&lt;/url-pattern&gt;</span></span></strong></p> <p><strong><span style="FONT-SIZE: 14px; COLOR: #660000; BACKGROUND-COLOR: #ffffff"><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;/servlet-mapping&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;servlet-mapping&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;  &lt;servlet-name&gt;default&lt;/servlet-name&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;  &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;/servlet-mapping&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;servlet-mapping&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;  &lt;servlet-name&gt;default&lt;/servlet-name&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&nbsp;&nbsp;&nbsp;  &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;</span><br><span style="FONT-SIZE: 14px; FONT-FAMILY: Comic Sans MS; BACKGROUND-COLOR: #d9d9d9">&nbsp;&lt;/servlet-mapping&gt;<br><br></span></span></strong></p><div><p><strong><strong><span style="FONT-SIZE: 18px; FONT-FAMILY: Arial; COLOR: #ff0000; BACKGROUND-COLOR: #ffffff">解决方法2：<span style="FONT-SIZE: 14px; COLOR: #000000">在spring的配置文件中添加如下一行：</span></span></strong></strong></p><strong> <p><strong></strong><span style="FONT-SIZE: 14px; COLOR: #660000; BACKGROUND-COLOR: #ffffff"><strong><span style="COLOR: #006699"><span>&lt;mvc:default-servlet-handler/&gt;</span></span></strong></span></p> <p><span style="FONT-SIZE: 14px; COLOR: #660000; BACKGROUND-COLOR: #ffffff">注意，需要是spring3.0.5以上版本<br></span></p><div><span style="FONT-FAMILY: verdana, 'courier new'; FONT-WEIGHT: normal; COLOR: #000000" ><strong><span style="FONT-SIZE: 14px; COLOR: #660000; BACKGROUND-COLOR: #ffffff" ><span style="FONT-SIZE: 14px; FONT-FAMILY: 'Comic Sans MS'; BACKGROUND-COLOR: #d9d9d9" ><div style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px" ><p style="MARGIN: 5px auto; TEXT-INDENT: 0px"      ><strong><span style="FONT-SIZE: 18px; FONT-FAMILY: Arial; COLOR: #ff0000; BACKGROUND-COLOR: #ffffff" >解决方法3</span></strong></p></div></span></span></strong></span></div><div><div style="OVERFLOW: hidden; WORD-BREAK: normal" name="cmtcontent">&lt;!--
 Handles HTTP GET requests for /resources/** by efficiently serving up  
static resources in the ${webappRoot}/resources directory  --&gt;<br>&nbsp;<br>&nbsp;&lt;mvc:resources mapping="/resources/**" location="/resources/"  /&gt; <br>&nbsp; <br>这个配置告诉spring 静态资源的处理方式</div><div style="OVERFLOW: hidden; WORD-BREAK: normal" name="cmtcontent"> &nbsp;</div><div style="OVERFLOW: hidden; WORD-BREAK: normal" name="cmtcontent"> &nbsp;</div></div></strong></div></div><!--EndFragment-->
</body>
</htm</html>