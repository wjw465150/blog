<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script async="" src="index_files/getRecommendList.html.js"></script><script src="index_files/hm.js"></script><script src="index_files/hm-1.js"></script>  

    <script src="index_files/hm-2.js"></script><script type="text/javascript" src="index_files/tracking.js" charset="utf-8"></script>  

    <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script><script type="text/javascript" src="index_files/repoAddr2.js"></script>

  
 <meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" media="handheld" href="#">

    <title>New Item</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="JNI（Java Native Interface），出于学习JNI的目的，为了能够更方便快速地运行程序。本文的是在IDEA中进行，而不在AndroidStudio，这样能够对NDK的工作过程有个更深刻的认识，同时也能对JNI的原理有更深的理解。虽然本文是HelloWorld篇，但是其中涉及到很多内容。博主将遇到的坑都记录下来了，希望能够帮到大家。这篇文章可能是2016年的最后一篇文章了，接下来JNI相关系列文章明年">
    <script src="index_files/jquery.js" type="text/javascript"></script>
      <script type="text/javascript" src="index_files/jquery-version.js"></script>
    <script type="text/javascript" src="index_files/ad.js"></script>
        <!--new top-->
       
        <link rel="stylesheet" href="index_files/index.css">
        <!--new top-->
    
      <!-- ad begin -->
         <script language="javascript" type="text/javascript" src="index_files/tracking-1.js"></script>
    <!-- ad end-->

    <link rel="Stylesheet" type="text/css" href="index_files/style.css">
    <link id="RSSLink" title="RSS" type="application/rss+xml" rel="alternate" href="http://blog.csdn.net/huachao1001/rss/list">
    <link rel="shortcut icon" href="urn:not-loaded:http://c.csdnimg.cn/public/favicon.ico">
    <link type="text/css" rel="stylesheet" href="index_files/default.css">
 


<script><!--
/* Script removed by snapshot save */
--></script>

<script src="index_files/share.js"></script><style type="text/css"><!--
/* Effective stylesheet produced by snapshot save */
--></style><style type="text/css"><!--
/* Effective stylesheet produced by snapshot save */
--></style><style type="text/css"><!--
/* Effective stylesheet produced by snapshot save */
--></style><style type="text/css"><!--
/* Effective stylesheet produced by snapshot save */
#MathJax_Message { position: fixed; left: 1px; bottom: 2px; background-color: rgb(230, 230, 230); border: 1px solid rgb(149, 149, 149); margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap; }
--></style><link rel="stylesheet" type="text/css" href="index_files/job_reco.css"><link href="index_files/bdsstyle.css" rel="stylesheet" type="text/css"><script src="index_files/wxLogin.js"></script><link rel="stylesheet" type="text/css" href="index_files/style-1.css"><script src="index_files/logger.js"></script><link type="text/css" rel="stylesheet" href="index_files/style-2.css"></head>
<body><div id="MathJax_Message" style="DISPLAY: none"></div><iframe style="DISPLAY: none" src="index_files/generated-content.html" frameborder="0"></iframe><!-- 广告位开始 -->
        <ins data-revive-id="8c38e720de1c90a6f6ff52f3f89c4d57" data-revive-zoneid="149"></INS><!-- 广告位结束 --><!--new top-->
    <script id="toolbar-tpl-scriptId" src="index_files/html.js" type="text/javascript" skin="black" prod="blog" fixed="true"></script><div class="csdn-toolbar csdn-toolbar-skin-black ">        <div class="container row center-block ">          <div class="col-md-3 pull-left logo clearfix"><a href="http://www.csdn.net/?ref=toolbar" title="CSDN首页" target="_blank" class="icon"></a><a title="频道首页" href="http://blog.csdn.net/?ref=toolbar_logo" class="img blog-icon"></a></div>          <div class="pull-right login-wrap unlogin">            <ul class="btns">              <li class="loginlink"><A href="https://passport.csdn.net/account/login?ref=toolbar" target=_top>登录&nbsp;</a>|<a target="_top" href="http://passport.csdn.net/account/mobileregister?ref=toolbar&amp;action=mobileRegister">&nbsp;注册</a></li>              <li class="search">                <div class="icon on-search-icon">                  <div class="wrap">                    <div class="curr-icon-wrap">                      <div class="curr-icon"></div>                    </div>                    <form action="http://so.csdn.net/search" method="get" target="_blank">                      <input value="toolbar" name="ref" accesskey="2" type="hidden">                      <div class="border">                        <input name="q" accesskey="2" placeholder="搜索" ><span class="icon-enter-sm"></span>                      </div>                    </form>                  </div>                </div>              </li>              <li class="favor">                <div class="icon on-favor-icon">                  <div class="wrap">                    <div class="curr-icon-wrap">                      <div class="curr-icon"></div>                    </div>                    <div style="DISPLAY: none" class="favor-success"><span class="msg">收藏成功</span>                      <div class="btns"><span class="btn btn-primary ok">确定</span></div>                    </div>                    <div style="DISPLAY: none" class="favor-failed"><span class="icon-danger-lg"></span><span class="msg">收藏失败，请重新收藏</span>                      <div class="btns"><span class="btn btn-primary ok">确定</span></div>                    </div>                    <form role=form class="form-horizontal favor-form">                      <div class="form-group">                        <div class="clearfix">                          <label for="input-title" class="col-sm-2 control-label"><span class="red_txt">*</span>标题</label>                          <div class="col-sm-10">                            <input id="inputTitle" class="title form-control" value ="IntelliJ IDEA平台下JNI编程（一）—HelloWorld篇 - huachao1001的专栏 - 博客频道 - CSDN.NET" placeholder="">                          </div>                        </div>                        <div class="alert alert-danger"><strong></strong>标题不能为空</div>                      </div>                      <div class="form-group" style="DISPLAY: none">                        <label for="input-url" class="col-sm-2 control-label">网址</label>                        <div class="col-sm-10">                          <input id="input-url" class="url form-control" value ="http://blog.csdn.net/huachao1001/article/details/53906237" placeholder="">                        </div>                      </div>                      <div class="form-group">                        <label for="input-tag" class="col-sm-2 tag control-label">标签</label>                        <div class="col-sm-10">                          <input id="input-tag" class="form-control tag" >                        </div>                      </div>                      <div class="form-group">                        <label for="input-description" class="description col-sm-2 control-label">位置</label>                        <div class="col-sm-10">                          <div class="my_lib_box">                            个人主页&nbsp;-&nbsp;<a href="http://my.csdn.net/" target="_blank">我的知识</a>                          </div>                          <div class="checkbox">                            <div class="pull-left">                              <label>                                <input name="share" class="save_lib_map" checked type="checkbox">同时保存至：                              </label>                            </div>                            <div class="pull-left">                              <div class="dropdown">                                <button id="toolbar_sele_map" 
 >                                  选择知识图谱                                  <i class="fa fa-chevron-down"></i>                                </button>                                <div class="top_arr"></div>                                <div class="outside">                                  <ul class="dropdown-menu" id="toolbar_Design_knowledge"></ul>                                </div>                              </div>                            </div>                            <div class="pull-left new_txt">                              <a href="http://lib.csdn.net/my/create/structure" target="_blank">新建？</a>                            </div>                          </div>                        </div>                      </div>                      <div class="form-group">                        <div class="col-sm-offset-2 col-sm-10 ft">                          <div class="col-sm-4 pull-left" style="DISPLAY: none">                            <div class="checkbox">                              <label>                                <input name="share" checked class="share" type="checkbox">公开                              </label>                            </div>                          </div>                          <div class="col-sm-8 pull-right favor-btns">                            <button class="cancel btn btn-default" >取消</button>                            <button type="submit" class="submit btn btn-primary">收藏</button>                          </div>                        </div>                      </div>                    </form>                  </div>                </div>              </li>              <li class="notify">                <div style="DISPLAY: none" class="number"></div>                <div style="DISPLAY: none" class="icon-hasnotes-sm"></div>                <div id="header_notice_num"></div>                <div class="icon on-notify-icon">                  <div class="wrap">                    <div class="curr-icon-wrap">                      <div class="curr-icon"></div>                    </div>                    <div id="note1" class="csdn_note">                      <div class="box"></div>                    <iframe src="index_files/unnamed.html" style="HEIGHT: 100%; WIDTH: 100%; BACKGROUND: none transparent scroll repeat 0% 0%; POSITION: absolute; LEFT: 0px; Z-INDEX: -1; TOP: 0px" 
  frameborder="0" allowTransparency 
 ></iframe></div>                  </div>                </div>              </li>              <li class="ugc">                <div class="icon on-ugc-icon">                  <div class="wrap clearfix">                    <div class="curr-icon-wrap">                      <div class="curr-icon"></div>                    </div>                    <dl>                      <dt><a href="http://geek.csdn.net/news/expert?ref=toolbar" target="_blank" class="p-news clearfix" style="DISPLAY: none" 
   ><em class="icon"></em><span>分享资讯</span></a>                      <dt style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; BORDER-LEFT: medium none" 
   ><a href="http://u.download.csdn.net/upload?ref=toolbar" target="_blank" class="p-doc clearfix"><em class="icon"></em><span>传PPT/文档</span></a>                      <dt><a href="http://bbs.csdn.net/topics/new?ref=toolbar" target="_blank" class="p-ask clearfix"><em class="icon"></em><span>提问题</span></a>                      <dt><a href="http://write.blog.csdn.net/postedit?ref=toolbar" target="_blank" class="p-blog clearfix"><em class="icon"></em><span>写博客</span></a>                      <dt><a href="http://u.download.csdn.net/upload?ref=toolbar" target="_blank" class="p-src clearfix"><em class="icon"></em><span>传资源</span></a>                      <dt><A class="c-obj clearfix" href="https://code.csdn.net/projects/new?ref=toolbar" target=_blank ><em class="icon"></em><span>创建项目</span></a>                      <dt><A class="c-code clearfix" href="https://code.csdn.net/snippets/new?ref=toolbar" target=_blank ><em class="icon"></em><span>创建代码片</span></a></dt>                    </dl>                  </div>                </div>              </li>              <li class="profile">                <div class="icon on-profile-icon"><IMG class=curr-icon-img src="index_files/100x100.jpg">                  <div class="wrap clearfix">                    <div class="curr-icon-wrap">                      <div class="curr-icon"></div>                    </div>                    <div class="bd">                      <dl class="clearfix">                        <dt class="pull-left img"><a target="_blank" href="http://my.csdn.net/?ref=toolbar" class="avatar"><IMG src="index_files/100x100.jpg"></a>                        <dd class="info" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; BORDER-LEFT: medium none" 
   ><a target="_blank" href="http://my.csdn.net/?ref=toolbar" class="nickname"></a><A class=set-nick href="https://passport.csdn.net/account/profile">设置昵称<span class="write-icon"></span></a><span class="dec"><a class="fill-dec" href="http://my.csdn.net/" target="_blank">编辑自我介绍，让更多人了解你<span class="write-icon"></span></a></span></dd>                      </dl>                    </div>                    <div class="ft clearfix"><a target="_blank" href="http://my.csdn.net/my/account/changepwd?ref=toolbar" class="pull-left"><span class="icon-cog"></span>帐号设置</a><A class=pull-left style="OVERFLOW: hidden; HEIGHT: 27px; WIDTH: 18px; WHITE-SPACE: nowrap; MARGIN-LEFT: 132px" href="https://passport.csdn.net/account/logout?ref=toolbar" target=_top ><span class="icon-signout"></span><span class="out">退出</span></a></div>                  </div>                </div>              </li>              <li class="apps">                <div id="chasnew123" class="hasnew" style="DISPLAY: none"></div>                <div id="cappsarea123" class="icon on-apps-icon">                  <div class="wrap clearfix">                    <div class="curr-icon-wrap">                      <div class="curr-icon"></div>                    </div>                  <div class="detail">                    <dl>                      <dt>                        <h5>社区</h5>                      <dd> <a href="http://blog.csdn.net/?ref=toolbar" target="_blank">博客</a>                      <dd> <a href="http://bbs.csdn.net/?ref=toolbar" target="_blank">论坛</a>                      <dd> <a href="http://download.csdn.net/?ref=toolbar" target="_blank">下载</a>                      <dd> <a href="http://lib.csdn.net/?ref=toolbar" target="_blank">知识库</a>                      <dd><a href="http://ask.csdn.net/?ref=toolbar" target="_blank">技术问答</a>                      <dd><a href="http://geek.csdn.net/?ref=toolbar" target="_blank">极客头条</a>                      <dd style="DISPLAY: none"> <a href="http://hero.csdn.net/?ref=toolbar" target="_blank">英雄会</a></dd>                    </dl>                  </div>                  <div class="detail">                    <dl>                      <dt>                        <h5>服务</h5>                      <dd style="DISPLAY: none"> <a href="http://job.csdn.net/?ref=toolbar" target="_blank">JOB<IMG style="WIDTH: 23px; MARGIN-TOP: -26px; DISPLAY: none" src="index_files/new.gif" ></a>                      <dd> <a href="http://edu.csdn.net/?ref=toolbar" target="_blank">学院<IMG style="WIDTH: 23px; MARGIN-TOP: -26px; DISPLAY: none" src="index_files/new.gif" ></a>                      <dd> <A href="https://code.csdn.net/?ref=toolbar" target=_blank>CODE</a>                      <dd> <a href="http://huiyi.csdn.net/?ref=toolbar" target="_blank">活动</a>                      <dd> <a href="http://www.csto.com/?ref=toolbar" target="_blank">CSTO</a>                      <dd> <a href="http://mall.csdn.net/?ref=toolbar" target="_blank">C币兑换<IMG style="WIDTH: 23px; MARGIN-TOP: -26px; DISPLAY: none" src="index_files/new.gif" ></a></dd>                    </dl>                  </div>                  <div class="detail last">                    <dl>                      <dt>                        <h5>俱乐部</h5>                      <dd> <a href="http://cto.csdn.net/?ref=toolbar" target="_blank">CTO俱乐部</a>                      <dd> <a href="http://student.csdn.net/?ref=toolbar" target="_blank">高校俱乐部</a></dd>                    </dl>                  </div>                </div>              </div>            </li>            </ul>          </div>        </div>    </div><!--new top-->
    <div id="container">
        <div id="header">
    <div class="header">
        <div id="blog_title">
            <h2>
                <a href="http://blog.csdn.net/huachao1001">huachao1001的专栏</a></h2>
            <h3>每天学习一点点，每天进步一点点...</h3>
            <div class="clear">
            </div>
        </div>
        <div class="clear">
        </div>
        
     
    </div>
</div>
<div id="navigator">
    <div class="navigator_bg">
    </div>
    <div class="navigator">
        <ul>           
                <li id="btnContents"><a href="http://blog.csdn.net/huachao1001?viewmode=contents"><span onclick="">
                    <IMG src="index_files/ico_list.gif">目录视图</span></a></li>
                <li id="btnView"><a href="http://blog.csdn.net/huachao1001?viewmode=list"><span onclick="">
                    <IMG src="index_files/ico_summary.gif">摘要视图</span></a></li>
                <li id="btnRss"><a href="http://blog.csdn.net/huachao1001/rss/list"><span onclick="">
                    <IMG src="index_files/ico_rss.gif">订阅</span></a></li>                
            

            </ul>
    </div>
</div>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>

        <div id="body">
            <div id="main">
                <div class="main">
                        <div class="ad_class">
<div class="notice tracking-ad" data-mod="popu_3"> 


<a href="http://blog.csdn.net/blogdevteam/article/details/64923779">
<font color="blue">CSDN日报20170322——《关于软件研发的一些体会总结》</font></a> 
&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://blog.csdn.net/blogdevteam/article/details/60961185">
<font color="red">同步博客至 CSDN ，让更多开发者看到你的文章
</font></a>&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://edu.csdn.net/huiyiCourse/series_detail/29?ref=blog&amp;loc=r0">
<font color="blue">看微博技术大咖解析互联网应用架构实战
</font></a>
</div>                        </div>
                        



  
<LINK rel=stylesheet type=text/css href="index_files/comment1.css">
<LINK rel=stylesheet type=text/css href="index_files/style1.css">
<script language="JavaScript" type="text/javascript" src="index_files/jquery.cookie.js"></script>
<script type="text/javascript" src="index_files/main.js"></script>
<LINK rel=stylesheet href="index_files/markdown_views.css">
<LINK rel=stylesheet href="index_files/category.css">
<script type="text/javascript" src="index_files/MathJax.js"></script>
<script type="text/javascript" src="index_files/web-storage-cache.min.js"></script>
<script type="text/javascript" src="index_files/replace.min.js"></script>




  <script type="text/ecmascript"><!--
/* Script removed by snapshot save */
--></script>
<div id="article_details" class="details">
    <div class="article_title">   
         <span class="ico ico_type_Original"></span>


    <h1>
        <span class="link_title"><A href="#">
        IntelliJ IDEA平台下JNI编程（一）—HelloWorld篇            
        </a></span>
    </h1>
</div>

   

        <div class="article_manage clearfix">
        <div class="article_l">
            <span class="link_categories">
            标签：
              <a href="http://www.csdn.net/tag/JNI" target="_blank" onclick="">JNI</a><a href="http://www.csdn.net/tag/NDK" target="_blank" onclick="">NDK</a><a href="http://www.csdn.net/tag/IEDA" target="_blank" onclick="">IEDA</a><a href="http://www.csdn.net/tag/Android" target="_blank" onclick="">Android</a><a href="http://www.csdn.net/tag/Studio" target="_blank" onclick="">Studio</a>
            </span>
        </div>
        <div class="article_r">
            <span class="link_postdate">2016-12-30 11:30</span>
            <span class="link_view" title="阅读次数">939人阅读</span>
            <span class="link_comments" title="评论次数"> <A onclick="" href="#comments">评论</a>(5)</span>
            <span class="link_collect tracking-ad" data-mod="popu_171"> <A onclick="" title=收藏 href="javascript:void(0);">收藏</a></span>
             <span class="link_report"> <A onclick="" title=举报 href="#report">举报</a></span>

        </div>
    </div>
    <div class="embody" style="DISPLAY: none" id="embody">
        <span class="embody_t">本文章已收录于：</span>
        <div class="embody_c" id="lib" value="'{"err":0,"msg":"ok","data":[]}'"></div>
    </div>
<STYLE type=text/css><!--

/* Effective stylesheet produced by snapshot save */

.embody { padding: 10px; margin: 0px -20px; border-bottom: 1px solid rgb(237, 237, 237); }

.embody_b { margin: 0px; padding: 10px 0px; }

.embody .embody_t, .embody .embody_c { display: inline-block; margin-right: 10px; }

.embody_t { font-size: 12px; color: rgb(153, 153, 153); }

.embody_c { font-size: 12px; }

--></STYLE>
    <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
      <div class="category clearfix">
        <div class="category_l">
           <IMG src="index_files/category_icon.jpg">
            <span>分类：</span>
        </div>
        <div class="category_r">
                    <label onclick="">
                        <span onclick="">Android<em>（42）</em></span>
                      <IMG class=arrow-down style="DISPLAY: inline" src="index_files/arrow_triangle__down.jpg" >
                      <IMG class=arrow-up style="DISPLAY: none" src="index_files/arrow_triangle_up.jpg" >
                        <div class="subItem">
                            <div class="subItem_t"><a href="http://blog.csdn.net/huachao1001/article/category/2862631" target="_blank">作者同类文章</a><i class="J_close">X</i></div>
                            <ul class="subItem_l" id="top_2862631">                            
                            </ul>
                        </div>
                    </label>                    
        </div>
    </div>
    <script type="text/javascript" src="index_files/category.js"></script>  
        <div class="bog_copyright">         
            <p class="copyright_p">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
        </div>

  

  
  
     

<div style="CLEAR: both"></div><div style="BORDER-TOP: #ccc 1px solid; BORDER-RIGHT: #ccc 1px solid; BACKGROUND: #eee; MIN-WIDTH: 200px; BORDER-BOTTOM: #ccc 1px solid; FLOAT: left; PADDING-BOTTOM: 4px; PADDING-TOP: 4px; PADDING-LEFT: 10px; BORDER-LEFT: #ccc 1px solid; PADDING-RIGHT: 10px"><p style="TEXT-ALIGN: right; MARGIN: 0px"><span style="FLOAT: left">目录<A title=系统根据文章中H1到H6标签自动生成文章目录 href="#">(?)</a></span><A onclick="" title=展开 href="#">[+]</a></p><ol style="PADDING-LEFT: 14px; MARGIN-LEFT: 14px; DISPLAY: none; LINE-HEIGHT: 160%"><li><A href="#t0">搭建GCC编译环境</a><ol><li><A href="#t1">1 安装MinGW</a></li></ol><li><A href="#t2">开始编码</a><ol><li><A href="#t3">1 编写Java文件</a><li><A href="#t4">2 生成JNI头文件</a><ol><li><A href="#t5">21 手动输入javah指令</a><li><A href="#t6">22 一键生成头文件</a></li></ol></li></ol><li><A href="#t7">编写C文件并编译成dll或so文件</a><li><A href="#t8">1 手动输入命令生成</a><ol><li><A href="#t9">2 一键生成dll</a></li></ol><li><A href="#t10">运行</a><li><A href="#t11">可能出现的错误</a><ol><li><A href="#t12">1 javalibrarypath找不到dll的错误</a><li><A href="#t13">2 无法识别__int64类型错误</a><li><A href="#t14">3 64-bit mode not compiled</a></li></ol><li><A href="#t15">参考资料</a></li></ol></div><div style="CLEAR: both"></div><div id="article_content" class="article_content">
        <div class="markdown_views"><p>转载请注明出处：<A href="#">【huachao1001的专栏：http://blog.csdn.net/huachao1001/article/details/53906237】</a></p>

<p>JNI（Java Native Interface），出于学习JNI的目的，为了能够更方便快速地运行程序。本文的是在IDEA中进行，而不在AndroidStudio，这样能够对NDK的工作过程有个更深刻的认识，同时也能对JNI的原理有更深的理解。虽然本文是HelloWorld篇，但是其中涉及到很多内容。博主将遇到的坑都记录下来了，希望能够帮到大家。这篇文章可能是2016年的最后一篇文章了，接下来JNI相关系列文章明年推出，欢迎大家关注。</p>

<h1 id="1-搭建gcc编译环境"><a name="t0"></a>1. 搭建GCC编译环境</h1>

<p>既然使用的了<code>JNI</code>，那就不可避免地需要将<code>C/C++</code>文件编译成<code>dll（windows）</code>或<code>so（Linux）</code>文件。因为我是在<code>Windows</code>平台下开发，可以有如下选择：</p>

<blockquote>
  <ol>
  <li>使用VC（或VS）编译成dll 
 
  <li>使用GCC编译成dll</li>
  </ol>
</blockquote>

<p>因为开发<code>Android</code>应用肯定是需要编译成<code>Linux</code>平台的<code>so</code>文件，因此，为了后面开发<code>Android</code>程序的兼容，使用<code>GCC</code>编译器比较好。而<code>Windows</code>平台下的<code>GCC</code>又可以有如下选择：</p>

<blockquote>
  <ol>
  <li>使用<code>MinGW</code>
  <li>使用<code>Cygwin</code></li>
  </ol>
</blockquote>

<p>这里我选择了<code>MinGW</code>，不管选择哪个，只要能让本地有GCC编译环境即可。</p>

<blockquote>
  <p>注意：搭建GCC编译环境时，一定要选择正确的GCC编译版本（32位和64位）。如果你本地安装的JDK是64位的，那么选择64位GCC，否则选择32位。这是为了使得编译后的库文件跟JVM的位一致，否则后面JVM无法调用dll（或so）。</p>
</blockquote>



<h2 id="11-安装mingw"><a name="t1"></a>1.1 安装MinGW</h2>

<p>安装MinGW的方法很多，可以前往<A href="https://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/">https://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/</a> 中自己选择需要的包。老实说，我也不是很清楚哪些包需要下载，没花时间研究，感兴趣的自己研究一些各个包的功能。不过这里有个安装教程<A href="https://github.com/cpluspluscom/ChessPlusPlus/wiki/MinGW-Build-Tutorial">https://github.com/cpluspluscom/ChessPlusPlus/wiki/MinGW-Build-Tutorial</a>按照这里的方法安装就可以。</p>

<p>另外，针对64位的，这里<A href="https://nuwen.net/mingw.html">https://nuwen.net/mingw.html</a>提供了完整的压缩包，直接下载<A href="https://nuwen.net/files/mingw/mingw-14.1.exe">https://nuwen.net/files/mingw/mingw-14.1.exe</a>运行。如下：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=指定解压路径 src="index_files/20161230100339149.png" ></p>

<p>其本质也是解压缩，把需要的MinGW库和程序解压到指定目录。如果懒的去看英文，我这里将我解压后的重新压缩了下，大家去下载并且解压即可直接使用。</p>

<blockquote>
  <p>链接:<A href="https://pan.baidu.com/s/1slpQrrJ"> https://pan.baidu.com/s/1slpQrrJ </a> <br>
  密码: fykw</p>
</blockquote>

<p>解压完成后，刚才指定的解压目录中的bin加入到path环境变量中。例如上面图中解压到E:\MinGw，那么应当将E:\MinGw\bin加入到环境变量path中。注意，请确保bin目录确实在E:\MinGw中，如果不在，可能在更深一层目录中，自行确定bin的目录。</p>

<p>做完后，打开控制台，输入：gcc -v，如下：</p>



<pre class="prettyprint" name="code"><code class="hljs lasso has-numbering">C:<span class="hljs-subst">\</span>Users<span class="hljs-subst">\</span>NetLab<span class="hljs-subst">\</span>Desktop<span class="hljs-subst">&gt;</span>gcc <span class="hljs-attribute">-v</span>
Using built<span class="hljs-attribute">-in</span> specs<span class="hljs-built_in">.</span>
COLLECT_GCC<span class="hljs-subst">=</span>gcc
COLLECT_LTO_WRAPPER<span class="hljs-subst">=</span>e:/mingw/bin<span class="hljs-subst">/</span><span class="hljs-built_in">..</span>/libexec/gcc/x86_64<span class="hljs-attribute">-w64</span><span class="hljs-attribute">-mingw32</span>/<span class="hljs-number">6.3</span><span class="hljs-number">.0</span>/lto<span class="hljs-attribute">-wrapper</span><span class="hljs-built_in">.</span>exe
Target: x86_64<span class="hljs-attribute">-w64</span><span class="hljs-attribute">-mingw32</span>
Configured <span class="hljs-keyword">with</span>: <span class="hljs-built_in">..</span>/src/configure <span class="hljs-subst">--</span>enable<span class="hljs-attribute">-languages</span><span class="hljs-subst">=</span>c,c<span class="hljs-subst">++</span> <span class="hljs-subst">--</span>build<span class="hljs-subst">=</span>x86_64<span class="hljs-attribute">-w64</span><span class="hljs-attribute">-mingw32</span> <span class="hljs-subst">--</span>host<span class="hljs-subst">=</span>x86_64<span class="hljs-attribute">-w64</span><span class="hljs-attribute">-mingw32</span> <span class="hljs-subst">--</span>target<span class="hljs-subst">=</span>x86_64<span class="hljs-attribute">-w64</span><span class="hljs-attribute">-mingw32</span> <span class="hljs-subst">--</span>disable<span class="hljs-attribute">-multilib</span> <span class="hljs-subst">--</span>prefix<span class="hljs-subst">=</span>/c/temp/gcc/dest <span class="hljs-subst">--</span><span class="hljs-keyword">with</span><span class="hljs-attribute">-sysroot</span><span class="hljs-subst">=</span>/c/temp/gcc/dest <span class="hljs-subst">--</span>disable<span class="hljs-attribute">-libstdcxx</span><span class="hljs-attribute">-pch</span> <span class="hljs-subst">--</span>disable<span class="hljs-attribute">-nls</span> <span class="hljs-subst">--</span>disable<span class="hljs-attribute">-shared</span> <span class="hljs-subst">--</span>disable<span class="hljs-attribute">-win32</span><span class="hljs-attribute">-registry</span> <span class="hljs-subst">--</span>enable<span class="hljs-attribute">-checking</span><span class="hljs-subst">=</span>release <span class="hljs-subst">--</span><span class="hljs-keyword">with</span><span class="hljs-attribute">-tune</span><span class="hljs-subst">=</span>haswell
<span class="hljs-keyword">Thread</span> model: win32
gcc version <span class="hljs-number">6.3</span><span class="hljs-number">.0</span> (GCC)</code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4<li>5<li>6<li>7<li>8</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>



<h1 id="2-开始编码"><a name="t2"></a>2. 开始编码</h1>



<h2 id="21-编写java文件"><a name="t3"></a>2.1 编写Java文件</h2>

<p>新建一个<code>Java Project</code>，创建包<code>com.huachao.java</code>，如下：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=创建项目 src="index_files/20161229150735715.png" ></p>

<p>在包<code>com.huachao.java</code>下编写HelloJNI类：</p>



<pre class="prettyprint" name="code"><code class="language-java hljs  has-numbering"><span class="hljs-keyword">package</span> com.huachao.java;

<span class="hljs-javadoc">/**
 * Created by HuaChao on 2016/12/29.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloJNI</span> {</span>
    <span class="hljs-keyword">static</span> {
        <span class="hljs-comment">// hello.dll (Windows) or libhello.so (Unixes)</span>
        System.loadLibrary(<span class="hljs-string">"hello"</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sayHello</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(String[] args) {

        <span class="hljs-keyword">new</span> HelloJNI().sayHello();  <span class="hljs-comment">// invoke the native method</span>
    }

}</code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4<li>5<li>6<li>7<li>8<li>9<li>10<li>11<li>12<li>13<li>14<li>15<li>16<li>17<li>18<li>19</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>函数System.loadLibrary()是加载dll（windows）或so（Linux）库，只需名称即可，无需加入文件名后缀（.dll或.so）。native关键字将函数sayHello()声明为本地函数，由C/C++实现。具体的实现就在hello.dll（Windows平台）或hello.so（Linux平台）中</p>



<h2 id="22-生成jni头文件"><a name="t4"></a>2.2 生成JNI头文件</h2>



<h3 id="221-手动输入javah指令"><a name="t5"></a>2.2.1 手动输入javah指令</h3>

<p>JNI生成头文件是通过JDK中提供的javah来完成，javah在 <code>{JDKHome}/bin</code>目录中。用法如下：</p>



<pre class="prettyprint" name="code"><code class="hljs lasso has-numbering">javah <span class="hljs-attribute">-jni</span> <span class="hljs-attribute">-classpath</span> (搜寻类目录) <span class="hljs-attribute">-d</span> (输出目录) (类名)</code><ul class="pre-numbering" ><li>1</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>例如，将<code>E:\Porject\out\com\huachao\java</code>目录中的<code>HelloJNI.class</code>生成头文件，并放入到<code>E:\Project\jni</code>中：</p>



<pre class="prettyprint" name="code"><code class="language-java hljs  has-numbering">javah -jni -classpath  E:\Porject\out\com\huachao\java -d E:\Project\jni  com.huachao.java.HelloJNI.java</code><ul class="pre-numbering" ><li>1</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>需要注意的是，使用javah来生成头文件（.h）时，-classpath指定的是编译后的java文件（.class）的目录，而不是源文件（.java）的目录，因此在使用javah指令之前，先build一下项目（或直接运行一下）。此时会生称out目录，所有编译后的文件都会存放在这个目录中。</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=out目录 src="index_files/20161229151602249.png" ></p>

<p>接下来，直接在IDEA的Terminal窗口运行javah：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=执行javah指令 src="index_files/20161229161132319.png" ></p>

<p>此时在jni目录中生成了头文件<code>com_huachao_java_HelloJNI.h</code></p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=自动生成头文件 src="index_files/20161229160818158.png" ></p>

<p>内容如下：</p>



<pre class="prettyprint" name="code"><code class="language-cpp hljs  has-numbering"><span class="hljs-comment">/* DO NOT EDIT THIS FILE - it is machine generated */</span>
<span class="hljs-preprocessor">#include &lt;jni.h&gt;</span>
<span class="hljs-comment">/* Header for class com_huachao_java_HelloJNI */</span>

<span class="hljs-preprocessor">#ifndef _Included_com_huachao_java_HelloJNI</span>
<span class="hljs-preprocessor">#define _Included_com_huachao_java_HelloJNI</span>
<span class="hljs-preprocessor">#ifdef __cplusplus</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> {
<span class="hljs-preprocessor">#endif</span>
<span class="hljs-comment">/*
 * Class:     com_huachao_java_HelloJNI
 * Method:    sayHello
 * Signature: ()V
 */</span>
JNIEXPORT <span class="hljs-keyword">void</span> JNICALL Java_com_huachao_java_HelloJNI_sayHello
  (JNIEnv *, jobject);

<span class="hljs-preprocessor">#ifdef __cplusplus</span>
}
<span class="hljs-preprocessor">#endif</span>
<span class="hljs-preprocessor">#endif</span></code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4<li>5<li>6<li>7<li>8<li>9<li>10<li>11<li>12<li>13<li>14<li>15<li>16<li>17<li>18<li>19<li>20<li>21</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>接下来我们只需实现<code>Java_com_huachao_java_HelloJNI_sayHello(JNIEnv *, jobject)</code>即可。仔细观察就会发现这个函数名称是有规律的，即<code>Java_&lt;包&gt;_&lt;类名&gt;_&lt;函数名&gt;</code>，JNIEXPORT和JNICALL这两个宏定义暂时不用管。JNIEnv 和jobject后面系列文章会详细介绍，这里暂时不理会。</p>



<h3 id="222-一键生成头文件"><a name="t6"></a>2.2.2 一键生成头文件</h3>

<p>在2.2.1小节中，介绍了输入javah生成头文件方法。但是如果目录层次很深，或者是有多个需要生成头文件的class文件，这工作量太大了，当然你可以通过写个小程序来实现。但是这里有个更便捷的方法。点击<code>File&gt;Settings&gt;Tools&gt;External Tools</code>：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt="External Tools" src="index_files/20161229154929547.png" ></p>

<p>添加一个先的External Tools:</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt="添加一个先的External Tools" src="index_files/20161229160517100.png" ></p>

<p>在HelloJNI.java文件中<code>点击右键&gt;External Tools&gt;Generate Header File</code>，</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=点击生成头文件 src="index_files/20161229155645642.png" ></p>

<p>点击生成，可以看到Terminal窗口会自动运行指令。跟2.2.1小节的指令一模一样。</p>



<h1 id="3-编写c文件并编译成dll或so文件"><a name="t7"></a>3. 编写C文件并编译成dll（或so）文件</h1>



<h1 id="31-手动输入命令生成"><a name="t8"></a>3.1 手动输入命令生成</h1>

<p>在jni目录中新建HelloJNI.c文件，如下：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=新建C文件 src="index_files/20161229161832185.png" ></p>

<p>编辑HelloJNI.c如下：</p>



<pre class="prettyprint" name="code"><code class="language-c hljs  has-numbering"><span class="hljs-preprocessor">#include&lt;jni.h&gt;</span>
<span class="hljs-preprocessor">#include &lt;stdio.h&gt;</span>
<span class="hljs-preprocessor">#include "com_huachao_java_HelloJNI.h"</span>

JNIEXPORT <span class="hljs-keyword">void</span> JNICALL Java_com_huachao_java_HelloJNI_sayHello(JNIEnv *env, jobject thisObj) {
   <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Hello World!\n"</span>);
   <span class="hljs-keyword">return</span>;
}</code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4<li>5<li>6<li>7<li>8</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>接下来就是使用GCC对HelloJNI.c编译，在Terminal窗口输入如下:</p>



<pre class="prettyprint" name="code"><code class="hljs avrasm has-numbering"><span class="hljs-label">E:</span>\workspace\StudyJNI&gt;gcc -c jni/HelloJNI<span class="hljs-preprocessor">.c</span>
jni/HelloJNI<span class="hljs-preprocessor">.c</span>:<span class="hljs-number">1</span>:<span class="hljs-number">17</span>: fatal error: jni<span class="hljs-preprocessor">.h</span>: No such file <span class="hljs-keyword">or</span> directory
 <span class="hljs-preprocessor">#include &lt;jni.h&gt;</span>
</code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>发现报错，找不到jni.h头文件，将JDK目录中的include目录加入，即为：</p>



<pre class="prettyprint" name="code"><code class="hljs avrasm has-numbering"><span class="hljs-label">E:</span>\workspace\StudyJNI&gt;gcc -c -I<span class="hljs-string">"E:\JDK\include"</span> jni/HelloJNI<span class="hljs-preprocessor">.c</span>
<span class="hljs-keyword">In</span> file included from jni/HelloJNI<span class="hljs-preprocessor">.c</span>:<span class="hljs-number">1</span>:<span class="hljs-number">0</span>:
<span class="hljs-label">E:</span>\JDK\include/jni<span class="hljs-preprocessor">.h</span>:<span class="hljs-number">45</span>:<span class="hljs-number">20</span>: fatal error: jni_md<span class="hljs-preprocessor">.h</span>: No such file <span class="hljs-keyword">or</span> directory
compilation terminated.
</code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4<li>5</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>又报找不到jni_md.h错误，继续将JDK目录中的include/win32加入，即：</p>



<pre class="prettyprint" name="code"><code class="hljs tex has-numbering">gcc -c -I"E:<span class="hljs-command">\JDK</span><span class="hljs-command">\include</span>" -I"E:<span class="hljs-command">\JDK</span><span class="hljs-command">\include</span><span class="hljs-command">\win</span>32" jni/HelloJNI.c</code><ul class="pre-numbering" ><li>1</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>完成编译。此时在项目中会生成HelloJNI.o文件。接下来是将HelloJNI.o转为HelloJNI.dll，即转为windows平台下的动态链接库。在Terminal中输入如下：</p>



<pre class="prettyprint" name="code"><code class="hljs lasso has-numbering">gcc <span class="hljs-attribute">-Wl</span>,<span class="hljs-subst">--</span>add<span class="hljs-attribute">-stdcall</span><span class="hljs-attribute">-alias</span> <span class="hljs-attribute">-shared</span> <span class="hljs-attribute">-o</span> hello<span class="hljs-built_in">.</span>dll HelloJNI<span class="hljs-built_in">.</span>o</code><ul class="pre-numbering" ><li>1</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>此时项目目录中生成了hello.dll文件:</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=生成dll src="index_files/20161229163015609.png" ></p>



<h2 id="32-一键生成dll"><a name="t9"></a>3.2 一键生成dll</h2>

<p>有了前面使用External Tools一键生成头文件的经验后，我们可以将编译成dll的过程命令也加入到External Tools中。前面将c文件编译链接成dll文件分了2个命令，这里我们直接通过一个命令来完成：</p>



<pre class="prettyprint" name="code"><code class="hljs lasso has-numbering">gcc <span class="hljs-attribute">-Wl</span>,<span class="hljs-subst">--</span>add<span class="hljs-attribute">-stdcall</span><span class="hljs-attribute">-alias</span> <span class="hljs-attribute">-I</span><span class="hljs-string">"E:\JDK\include"</span> <span class="hljs-attribute">-I</span><span class="hljs-string">"E:\JDK\include\win32"</span> <span class="hljs-attribute">-shared</span> <span class="hljs-attribute">-o</span> <span class="hljs-built_in">.</span>/lib/hello<span class="hljs-built_in">.</span>dll <span class="hljs-built_in">.</span>/jni/HelloJNI<span class="hljs-built_in">.</span>c</code><ul class="pre-numbering" ><li>1</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>这样就将c文件编译成了dll，在这里把生成的dll文件加入到了lib目录中，而不是像之前那直接放到项目底下。因此在java.library.path应该指定目录为lib。</p>

<p>有了上面的命令后，可以很轻松的加入到External Tools中了。按照前面的方法，点击<code>File&gt;Settings&gt;Tools&gt;External Tools&gt;+</code>，输入内容如下：</p>

<blockquote>
  <p>name：<code>Generate DLL</code> <br>
  Program：<code>&lt;GCC路径&gt;</code> <br>
  Parameters：<code>-Wl,--add-stdcall-alias -I"$JDKPath$\include" -I"$JDKPath$\include\win32" -shared -o ./lib/$FileNameWithoutExtension$.dll ./jni/$FileNameWithoutExtension$.c</code> <br>
  Working Directory：<code>$ProjectFileDir$</code></p>
</blockquote>

<p><IMG title="" style="MAX-WIDTH: 950px" alt="添加External Tools" src="index_files/20161230111535979.png" ></p>

<p>在HelloJNI.c中点击右键，选择External Tools&gt;Generate DLL。此时，在lib目录中会得到dll文件。</p>



<h1 id="4-运行"><a name="t10"></a>4. 运行</h1>

<p>运行HelloJNI.java类后，如下：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt=运行结果 src="index_files/20161230104350394.png" ></p>



<h1 id="5-可能出现的错误"><a name="t11"></a>5 可能出现的错误</h1>



<h2 id="51-javalibrarypath找不到dll的错误"><a name="t12"></a>5.1 java.library.path找不到dll的错误</h2>

<p>此时，点击直接运行HelloJNI.java类时，依然还会有错误：</p>



<pre class="prettyprint" name="code"><code class="hljs avrasm has-numbering">Exception <span class="hljs-keyword">in</span> thread <span class="hljs-string">"main"</span> java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.UnsatisfiedLinkError</span>: no hello <span class="hljs-keyword">in</span> java<span class="hljs-preprocessor">.library</span><span class="hljs-preprocessor">.path</span>
    at java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.ClassLoader</span><span class="hljs-preprocessor">.loadLibrary</span>(ClassLoader<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">1867</span>)
    at java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.Runtime</span><span class="hljs-preprocessor">.loadLibrary</span>0(Runtime<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">870</span>)
    at java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.System</span><span class="hljs-preprocessor">.loadLibrary</span>(System<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">1122</span>)
    at <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.huachao</span><span class="hljs-preprocessor">.java</span><span class="hljs-preprocessor">.HelloJNI</span>.&lt;clinit&gt;(HelloJNI<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">8</span>)
    at java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.Class</span><span class="hljs-preprocessor">.forName</span>0(Native Method)
    at java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.Class</span><span class="hljs-preprocessor">.forName</span>(Class<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">264</span>)
    at <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.intellij</span><span class="hljs-preprocessor">.rt</span><span class="hljs-preprocessor">.execution</span><span class="hljs-preprocessor">.application</span><span class="hljs-preprocessor">.AppMain</span><span class="hljs-preprocessor">.main</span>(AppMain<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">123</span>)

Process finished with exit code <span class="hljs-number">1</span></code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4<li>5<li>6<li>7<li>8<li>9<li>10</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>即找不到我们生成的dll文件。因为在Windows中JVM的<code>java.library.path</code>属性即为环境变量Path指定的目录，而我们生成的dll并未放入到Path指定的任何一个目录中，因此我们需要告诉JVM，dll文件在哪个目录中。点击<code>Run &gt; Edit Configurations...</code>，如下：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt="修改Edit Configurations" src="index_files/20161229163518007.png" ></p>

<p>在VM options中加入java.library.path，指定dll（或so）文件所在的目录，比如本文中dll放在项目目录中的lib中，如下：</p>



<pre class="prettyprint" name="code"><code class="language-java hljs  has-numbering">-Djava.library.path=E:\workspace\StudyJNI\lib</code><ul class="pre-numbering" ><li>1</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>如下图所示：</p>

<p><IMG title="" style="MAX-WIDTH: 950px" alt="修改VM options" src="index_files/20161230112228369.png" ></p>



<h2 id="52-无法识别int64类型错误"><a name="t13"></a>5.2 无法识别<code>__int64</code>类型错误</h2>

<p>错误如下：</p>



<pre class="prettyprint" name="code"><code class="hljs lua has-numbering"> <span class="hljs-built_in">error</span>: unknown <span class="hljs-built_in">type</span> name <span class="hljs-string">'__int64'</span>
 typedef __int64 jlong;
         ^</code><ul class="pre-numbering" ><li>1<li>2<li>3</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>出现这个错误的人一般是使用Cygwin GCC的人，这是因为Cygwin GCC不认识<code>__int64</code>类型，找到<code>&lt;JDK_HOME&gt;/include/win32/jni_md.h</code>，找到<code>typedef __int64 jlong;</code>并修改为：</p>



<pre class="prettyprint" name="code"><code class="language-c hljs  has-numbering"><span class="hljs-preprocessor">#ifdef __GNUC__</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> jlong;
<span class="hljs-preprocessor">#else</span>
<span class="hljs-keyword">typedef</span> __int64 jlong;
<span class="hljs-preprocessor">#endif</span></code><ul class="pre-numbering" ><li>1<li>2<li>3<li>4<li>5</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>或者是编译时将<code>__int64</code>加入，如下：</p>



<pre class="prettyprint" name="code"><code class="hljs lasso has-numbering"><span class="hljs-subst">&gt;</span> gcc<span class="hljs-subst">-</span><span class="hljs-number">3</span> <span class="hljs-attribute">-D</span> __int64<span class="hljs-subst">=</span><span class="hljs-string">"long long"</span> <span class="hljs-attribute">-mno</span><span class="hljs-attribute">-cygwin</span> <span class="hljs-attribute">-Wl</span>,<span class="hljs-subst">--</span>add<span class="hljs-attribute">-stdcall</span><span class="hljs-attribute">-alias</span> 
  <span class="hljs-attribute">-I</span><span class="hljs-string">"&lt;JAVA_HOME&gt;\include"</span> <span class="hljs-attribute">-I</span><span class="hljs-string">"&lt;JAVA_HOME&gt;\include\win32"</span> <span class="hljs-attribute">-shared</span> <span class="hljs-attribute">-o</span> hello<span class="hljs-built_in">.</span>dll HelloJNI<span class="hljs-built_in">.</span>c</code><ul class="pre-numbering" ><li>1<li>2</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>



<h2 id="53-64-bit-mode-not-compiled"><a name="t14"></a>5.3 64-bit mode not compiled</h2>

<p>错误如下：</p>



<pre class="prettyprint" name="code"><code class="hljs lasso has-numbering">HelloJNI<span class="hljs-built_in">.</span>c:<span class="hljs-number">1</span>:<span class="hljs-number">0</span>: sorry, unimplemented: <span class="hljs-number">64</span><span class="hljs-attribute">-bit</span> mode <span class="hljs-literal">not</span> compiled <span class="hljs-keyword">in</span>
 <span class="hljs-variable">#include</span> <span class="hljs-subst">&lt;</span>jni<span class="hljs-built_in">.</span>h<span class="hljs-subst">&gt;</span></code><ul class="pre-numbering" ><li>1<li>2</li></ul><div class="save_code tracking-ad" data-mod="popu_249"><A href="javascript:void(0);"><IMG src="index_files/save_snippets.png"></a></div></pre>

<p>出现这个错误是因为，JDK版本是64位，而GCC编译器编译出的dll（或so）是32位，只需换个64位版本的GCC即可。</p>



<h1 id="参考资料"><a name="t15"></a>参考资料</h1>

<p><A href="https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-3.">https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-3.</a> <br>
<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html">http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html</a></p></div>
        <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
   
</div><!-- Baidu Button BEGIN -->




<div class="bdsharebuttonbox tracking-ad" style="FLOAT: right" data-mod="popu_172">
<A class=bds_more style="BACKGROUND-IMAGE: url(index_files/icons_0_16.png); BACKGROUND-POSITION: 0px 0px" href  ="#"  data-cmd="more"></a>
<A title=分享到QQ空间 class=bds_qzone style="BACKGROUND-POSITION: 0px -52px" href ="#"  data-cmd="qzone"></a>
<A title=分享到新浪微博 class=bds_tsina style="BACKGROUND-POSITION: 0px -104px" href ="#"  data-cmd="tsina"></a>
<A title=分享到腾讯微博 class=bds_tqq style="BACKGROUND-POSITION: 0px -260px" href ="#"  data-cmd="tqq"></a>
<A title=分享到人人网 class=bds_renren style="BACKGROUND-POSITION: 0px -208px" href ="#"  data-cmd="renren"></a>
<A title=分享到微信 class=bds_weixin style="BACKGROUND-POSITION: 0px -1612px" href ="#"  data-cmd="weixin"></a>
</div>
<script><!--
/* Script removed by snapshot save */
--></script>
<!-- Baidu Button END -->

   <LINK rel=stylesheet href="index_files/blog_detail.css"><!--172.16.140.15--><!-- Baidu Button BEGIN -->
<script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=1536434" src="index_files/bds_s_v2.js"></script>

<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
<!-- Baidu Button END -->

 


        <div id="digg" articleid="53906237">
            <dl id="btnDigg" class="digg digg_disable" onclick="">
               
                 <dt>顶 
                <dd>0</dd>
            </dl>
           
              
            <dl id="btnBury" class="digg digg_disable" onclick="">
              
                  <dt>踩 
                <dd>0</dd>               
            </dl>
            
        </div>
     <div class="tracking-ad" data-mod="popu_222"><A href="javascript:void(0);"></a>   </div>
    <div class="tracking-ad" data-mod="popu_223"> <A href="javascript:void(0);"></a>&nbsp;</div>
    <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>

   <ul class="article_next_prev">
                <li class="prev_article"><span onclick="">上一篇</span><a href="http://blog.csdn.net/huachao1001/article/details/53898286" onclick="">打造酷炫AndroidStudio插件</a>
                <li class="next_article"><span onclick="">下一篇</span><a href="http://blog.csdn.net/huachao1001/article/details/53992258" onclick="">IntelliJ IDEA平台下JNI编程（二）—类型映射</a></li>
    </ul>

    <div style="HEIGHT: 10px; CLEAR: both"></div>


        <div class="similar_article" style="DISPLAY: none">
                <h4>我的同类文章</h4>
                <div class="similar_c" style="MARGIN: 20px 0px 0px">
                    <div class="similar_c_t">
                                <label class="similar_cur">
                                    <span style="CURSOR: pointer" onclick="">Android<em>（42）</em></span>
                                </label>
                    </div>
                   
                    <div class="similar_wrap tracking-ad" style="MAX-HEIGHT: 195px" data-mod="popu_141">
                        <a href="http://blog.csdn.net/" style="DISPLAY: none">http://blog.csdn.net</a>
                        <ul class="similar_list fl">                          
                        </ul>

                        <ul class="similar_list fr">                           
                        </ul>
                    </div>
                </div>
            </div>    
    <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
      
</div>

     <div>
             <ins data-revive-id="8c38e720de1c90a6f6ff52f3f89c4d57" data-revive-zoneid="206"> 
    </INS> 
    </div>

<div id="suggest"></div>
         <script language="javascript" type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>

<STYLE><!--

/* Effective stylesheet produced by snapshot save */

.blog-ass-articl dd { color: rgb(51, 102, 153); width: 99%; float: left; overflow: hidden; font: 12px/23px "SimSun"; height: 23px; margin: 0px 30px 0px 0px; padding: 0px 0px 0px 10px; background: transparent url("urn:not-loaded:http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif") no-repeat scroll 0px 10px; }

--></STYLE>

 <LINK rel=stylesheet href="index_files/replace.css">

<div id="relate" class="tracking-ad" data-mod="popu_218">
        <div class="relate_t">
            <h3><span>参考知识库</span></h3>
        </div>
        <div class="relate_c">
        </div>
</div>
 

<dl class="blog-ass-articl" id="res-relatived"> 
    <div class="embody embody_b" id="libkeyparent" style="DISPLAY: none" 
 >
            <span class="embody_t">更多资料请参考：</span>
            <div class="embody_c" id="libkey"></div>
    </div>


     <dt><span>猜你在找</span>    


   


    <div id="adCollege" style="WIDTH: 42%; FLOAT: left"> 
        <script src="index_files/job_reco.js" type="text/javascript"></script> 
        <script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script> 
    <div class="tracking-ad" data-mod="popu_84"></div></div></dt><dd style="BACKGROUND: url(urn:not-loaded:http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) no-repeat 0px 10px; WHITE-SPACE: nowrap" 
 ><a href="http://edu.csdn.net/course/detail/3517?ref=blog&amp;loc=0" title="Linux编程之GCC编译工具实战" target="_blank" strategy="v4:content">Linux编程之GCC编译工具实战</a></dd><dd style="BACKGROUND: url(urn:not-loaded:http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) no-repeat 0px 10px; WHITE-SPACE: nowrap" 
 ><a href="http://edu.csdn.net/course/detail/4351?ref=blog&amp;loc=0" title="Windows Server 2012 DHCP Server 管理" target="_blank" strategy="v4:content">Windows Server 2012 DHCP Server 管理</a></dd><dd style="BACKGROUND: url(urn:not-loaded:http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) no-repeat 0px 10px; WHITE-SPACE: nowrap" 
 ><a href="http://edu.csdn.net/course/detail/370?ref=blog&amp;loc=0" title="Windows Server 2012 DHCP Server 管理" target="_blank" strategy="v4:content">Windows Server 2012 DHCP Server 管理</a></dd><dd style="BACKGROUND: url(urn:not-loaded:http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) no-repeat 0px 10px; WHITE-SPACE: nowrap" 
 ><a href="http://edu.csdn.net/course/detail/2197?ref=blog&amp;loc=0" title="Part 23：Cocos2d-x开发实战-移植-从Win32到Windows Phone8" target="_blank" strategy="v4:content">Part 23：Cocos2d-x开发实战-移植-从Win32到Windows Phone8</a></dd><dd style="BACKGROUND: url(urn:not-loaded:http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) no-repeat 0px 10px; WHITE-SPACE: nowrap" 
 ><a href="http://edu.csdn.net/course/detail/662?ref=blog&amp;loc=0" title="Java Swing、JDBC开发桌面级应用" target="_blank" strategy="v4:content">Java Swing、JDBC开发桌面级应用</a></dd>
   
</dl>
                    </div>                   
                
            </div>  

    
     <div id="res" class="tracking-ad" style="WIDTH: 42%; FLOAT: left; DISPLAY: none; MARGIN-RIGHT: 30px" data-mod="popu_36"></div>
<DL></DL>


<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>  


    <div id="ad_cen">        
                      <ins data-revive-id="8c38e720de1c90a6f6ff52f3f89c4d57" data-revive-zoneid="199">
    </INS>
    </div><!-- 广告位开始 -->
    <ins data-revive-id="8c38e720de1c90a6f6ff52f3f89c4d57" data-revive-zoneid="72"></INS><!-- 广告位结束 -->

<div class="comment_class">
    <div id="comment_title" class="panel_head">
        <span class="see_comment">查看评论</span><a name="comments"></a></div>
    <div id="comment_list">
    </div>
    <div id="comment_bar">
    </div>
    <div id="comment_form"><div class="guest_link">您还没有登录,请<A onclick="" href="javascript:void(0);">[登录]</a>或<a href="http://passport.csdn.net/account/register?from=http%3A%2F%2Fblog.csdn.net%2Fhuachao1001%2Farticle%2Fdetails%2F53906237">[注册]</a></div></div>
    <div class="announce">
        * 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a name="reply"></a><a name="quote"></a></div>
</div>

<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
<script type="text/javascript" src="index_files/comment.js"></script>
    <div id="ad_bot">
    </div>
<div id="report_dialog">
</div>

<div id="d-top" style="BOTTOM: 60px">

        <a id="quick-reply" class="btn btn-top q-reply" title="快速回复" >
            <IMG alt=快速回复 src="index_files/blog-icon-reply.png">
        </a>    
    <a id="d-top-a" class="btn btn-top backtop" title="返回顶部" onclick ="" >         
         <IMG alt=TOP src="index_files/top.png">
    </a>
</div>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>

<STYLE type=text/css><!--

/* Effective stylesheet produced by snapshot save */

.tag_list { background: rgb(255, 255, 255) none repeat scroll 0px 0px; border: 1px solid rgb(215, 203, 193); color: rgb(0, 0, 0); font-size: 12px; line-height: 20px; list-style: outside none none; margin: 10px 2% 0px 1%; padding: 1px; }

--></STYLE>


<div class="tag_list" style="DISPLAY: none"></div>
  <script language="javascript" type="text/javascript"><!--
/* Script removed by snapshot save */
--></script> 


<div id="pop_win" style="BORDER-TOP: rgb(220,220,220) 1px solid; BORDER-RIGHT: rgb(220,220,220) 1px solid; BACKGROUND: rgb(255,255,255) 0px 0px; BORDER-BOTTOM: rgb(220,220,220) 1px solid; POSITION: absolute; LEFT: 630px; BORDER-LEFT: rgb(220,220,220) 1px solid; Z-INDEX: 10000; DISPLAY: none; TOP: 222px; opacity: 1">
    
</div>
<div id="popup_mask"></div>
<STYLE><!--

/* Effective stylesheet produced by snapshot save */

#popup_mask { position: absolute; width: 100%; height: 100%; background: rgb(0, 0, 0) none repeat scroll 0% 0%; z-index: 9999; left: 0px; top: 0px; opacity: 0.3; display: none; }

--></STYLE>




<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
 <script language="javascript" type="text/javascript" src="index_files/async_new.js"></script>      




                        <div class="clear">
                        </div>
        </div>





    </div>
                   
           <div id="side">
               
    <div class="side">
<div id="panel_Profile" class="panel">
<ul class="panel_head"><span>个人资料</span></ul>
<ul class="panel_body profile">
<div id="blog_userface">
    <a href="http://my.csdn.net/huachao1001" target="_blank">
    <IMG title=访问我的空间 style="MAX-WIDTH: 90%" src="index_files/1_huachao1001.jpg" >
    </a>
    <br>
    <span><a href="http://my.csdn.net/huachao1001" class="user_name" target="_blank">huachao1001</a></span>
</div>
<div class="interact">

    <A id=span_add_follow title=[加关注] class=attent href="javascript:void(0);"></a>

 <A onclick="" title=[发私信] class=letter href="javascript:void(0);"></a>  
</div>
<div id="blog_medal">
                       <div class="ico_expert" onclick="" title="CSDN认证专家" style="CURSOR: pointer; HEIGHT: 60px; WIDTH: 60px; BACKGROUND: url(index_files/bokezhuanjiamiddle.png) no-repeat" 
 ></div>
                <div id="bms_box">
                                            <a target="_blank">
                                                    <IMG onmouseover="" onmouseout="" alt=2 src="index_files/zhuanlandaren.png">
                                            </a>
                                            <a target="_blank">
                                                    <IMG onmouseover="" onmouseout="" alt=1 src="index_files/chizhiyiheng.png">
                                            </a>
               </div>
</div>
<ul id="blog_rank">
    <li>访问：<span>224362次</span>
    <li>积分：<span>2998</span>    
    <li>等级： <span style="POSITION: relative; Z-INDEX: 1; DISPLAY: inline-block" 
   >
            <IMG id=leveImg style="VERTICAL-ALIGN: middle" alt ="" src="index_files/blog5.png" >
            <div id="smallTittle" style="BORDER-TOP: #dddddd 2px  solid; HEIGHT:  32px; BORDER-RIGHT:  #dddddd 2px  solid; WIDTH:  101px; BORDER-BOTTOM:  #dddddd 2px  solid; POSITION:  absolute; TEXT-ALIGN: center; LEFT:  -24px; BORDER-LEFT: #dddddd 2px solid; Z-INDEX:  999; DISPLAY:   none; LINE-HEIGHT: 32px; TOP: 25px; BACKGROUND-COLOR: #fff; box-shadow: 0px 2px 2px rgba (0,0,0,0.1)" 
   >
            <div style="HEIGHT: 0px;  BORDER-RIGHT: transparent  10px solid;  WIDTH: 0px;  BORDER-BOTTOM: #eaeaea  8px solid; POSITION: absolute;  LEFT: 42%; BORDER-LEFT: transparent  10px solid; TOP: -8px"></div>
            积分：2998 </div>
        </span>
    <li>排名：<span>第9901名</span></li>
</ul>
<ul id="blog_statistics">
    <li>原创：<span>52篇</span></li>
    <li>转载：<span>1篇</span></li>
    <li>译文：<span>0篇</span></li>
    <li>评论：<span>311条</span></li>
</ul>
</ul>
</div>




<div id="custom_column_42635385" class="panel">
<ul class="panel_head"><span>Android开发交流群</span></ul>
<ul class="panel_body">
<IMG src="index_files/20161114094746543.png">
<script type="text/javascript" src="index_files/jquery-1.js"></script>
<script><!--
/* Script removed by snapshot save */
--></script>
</ul>
</div><div id="panel_Category" class="panel">
    <ul class="panel_head"><span>博客专栏</span></ul>
    <ul class="panel_body" id="sp_column">
    <table cellspacing="0" cellpadding="0"><tbody><tr>
    <td style="PADDING-BOTTOM: 0px; PADDING-TOP: 10px; PADDING-LEFT: 0px; PADDING-RIGHT: 10px"      >
    <a href="http://blog.csdn.net/column/details/14048.html" target="_blank"><IMG style="HEIGHT: 75px; WIDTH: 75px" src="index_files/20161228094125527.jpg" ></a>
    </td>
    <td style="VERTICAL-ALIGN: top; PADDING-BOTTOM: 10px; PADDING-TOP: 10px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px"      >
    <a href="http://blog.csdn.net/column/details/14048.html" target="_blank">AndroidStudio插件开发</a>
    <p>文章：6篇</p>
    <span>阅读：11275</span>
    </td>
    </tr></tbody></table>
    <table cellspacing="0" cellpadding="0"><tbody><tr>
    <td style="PADDING-BOTTOM: 0px; PADDING-TOP: 10px; PADDING-LEFT: 0px; PADDING-RIGHT: 10px"      >
    <a href="http://blog.csdn.net/column/details/android-opengl.html" target="_blank"><IMG style="HEIGHT: 75px; WIDTH: 75px" src="index_files/20160810103925664.png" ></a>
    </td>
    <td style="VERTICAL-ALIGN: top; PADDING-BOTTOM: 10px; PADDING-TOP: 10px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px"      >
    <a href="http://blog.csdn.net/column/details/android-opengl.html" target="_blank">Android OpenGL</a>
    <p>文章：5篇</p>
    <span>阅读：17944</span>
    </td>
    </tr></tbody></table>
    <table cellspacing="0" cellpadding="0"><tbody><tr>
    <td style="PADDING-BOTTOM: 0px; PADDING-TOP: 10px; PADDING-LEFT: 0px; PADDING-RIGHT: 10px"      >
    <a href="http://blog.csdn.net/column/details/huachao1001.html" target="_blank"><IMG style="HEIGHT: 75px; WIDTH: 75px" src="index_files/20160622162730490.jpg" ></a>
    </td>
    <td style="VERTICAL-ALIGN: top; PADDING-BOTTOM: 10px; PADDING-TOP: 10px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px"      >
    <a href="http://blog.csdn.net/column/details/huachao1001.html" target="_blank">Android学习</a>
    <p>文章：8篇</p>
    <span>阅读：79976</span>
    </td>
    </tr></tbody></table>
    </ul>
</div><div id="panel_Category" class="panel">
<ul class="panel_head"><span>文章分类</span></ul>
<ul class="panel_body">    
                 <li>
                    <a href="http://blog.csdn.net/huachao1001/article/category/2862631" onclick="">Android</a><span>(43)</span>
                 <li>
                    <a href="http://blog.csdn.net/huachao1001/article/category/6227358" onclick="">学习笔记</a><span>(9)</span>
                 <li>
                    <a href="http://blog.csdn.net/huachao1001/article/category/6333159" onclick="">OpenGL</a><span>(5)</span>
                 <li>
                    <a href="http://blog.csdn.net/huachao1001/article/category/2472171" onclick="">C语言</a><span>(1)</span>
                </li>
</ul>
</div><div id="panel_Archive" class="panel">
<ul class="panel_head"><span>文章存档</span></ul>
<ul class="panel_body">
<div id="archive_list"><li><a href="http://blog.csdn.net/huachao1001/article/month/2017/03">2017年03月</a><span>(1)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2017/01">2017年01月</a><span>(2)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2016/12">2016年12月</a><span>(5)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2016/11">2016年11月</a><span>(2)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2016/08">2016年08月</a><span>(4)</span><span class="hidelist" style="DISPLAY: none"><li><a href="http://blog.csdn.net/huachao1001/article/month/2016/07">2016年07月</a><span>(10)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2016/06">2016年06月</a><span>(12)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2016/05">2016年05月</a><span>(11)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2016/01">2016年01月</a><span>(3)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2015/11">2015年11月</a><span>(1)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2015/01">2015年01月</a><span>(1)</span><li><a href="http://blog.csdn.net/huachao1001/article/month/2014/08">2014年08月</a><span>(1)</span></span><div id="archive_list_button" class="list_closed">展开</div></li></div>
</ul>
</div>
<div class="panel" id="panel_Search">
    <ul class="panel_head"><span>文章搜索</span></ul>
    <ul class="panel_body">
        <form id="frmSearch" action="http://so.csdn.net/search" class="form_search" target="_blank">
        <span><input id="inputSearch" class="blogsearch" title="请输入关键字" ></span>
        <input id="btnSubmit" value="搜索" title="search in blog" type="button">
        <input name="q" id="inputQ" type="hidden">
        <input name="t" value="blog" type="hidden">
        <a id="btnSearchBlog" target="_blank"></a>
        </form>
    </ul>
</div>

<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>

<div id="custom_column_42141821" class="panel">
<ul class="panel_head"><span>轻松一刻</span></ul>
<ul class="panel_body">
  <OBJECT 
  style="OUTLINE-WIDTH: medium; OUTLINE-STYLE: none; OUTLINE-COLOR: invert" 
  data="index_files/turtle.swf" width=240 height=200 
  type=application/x-shockwave-flash></OBJECT>
<script><!--
/* Script removed by snapshot save */
--></script>
</ul>
</div><div id="hotarticls" class="panel">
<ul class="panel_head">
    <span>       
阅读排行    </span>
</ul>

<ul class="panel_body itemlist">
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51554608" title="CoordinatorLayout的使用如此简单">CoordinatorLayout的使用如此简单</a><span>(23882)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51577291" title="自定义View，有这一篇就够了">自定义View，有这一篇就够了</a><span>(19573)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/52247268" title="2017年秋季校招面经">2017年秋季校招面经</a><span>(14155)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51536074" title="从Android代码中来记忆23种设计模式">从Android代码中来记忆23种设计模式</a><span>(13829)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51659963" title="酷炫的Activity切换动画，打造更好的用户体验">酷炫的Activity切换动画，打造更好的用户体验</a><span>(11723)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51558835" title="玩转AppBarLayout，更酷炫的顶部栏">玩转AppBarLayout，更酷炫的顶部栏</a><span>(11286)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51489582" title="打造浪漫的Android表白程序">打造浪漫的Android表白程序</a><span>(10133)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51594004" title="打造属于你的LayoutManager">打造属于你的LayoutManager</a><span>(8866)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51504469" title="简单明了，彻底地理解Binder">简单明了，彻底地理解Binder</a><span>(8180)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51579437" title="制作圆形图片，你会以下几种？">制作圆形图片，你会以下几种？</a><span>(6567)</span>
</li>
</ul>
</div>
<div id="hotarticls2" class="panel">
<ul class="panel_head"><span>评论排行</span></ul>
<ul class="panel_body itemlist">
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/52247268" title="2017年秋季校招面经">2017年秋季校招面经</a><span>(53)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51554608" title="CoordinatorLayout的使用如此简单">CoordinatorLayout的使用如此简单</a><span>(29)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51577291" title="自定义View，有这一篇就够了">自定义View，有这一篇就够了</a><span>(29)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51659963" title="酷炫的Activity切换动画，打造更好的用户体验">酷炫的Activity切换动画，打造更好的用户体验</a><span>(23)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51504469" title="简单明了，彻底地理解Binder">简单明了，彻底地理解Binder</a><span>(23)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51558835" title="玩转AppBarLayout，更酷炫的顶部栏">玩转AppBarLayout，更酷炫的顶部栏</a><span>(13)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51594004" title="打造属于你的LayoutManager">打造属于你的LayoutManager</a><span>(12)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51536074" title="从Android代码中来记忆23种设计模式">从Android代码中来记忆23种设计模式</a><span>(9)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/52044602" title="Android OpenGL 显示基本图形及相关概念解读">Android OpenGL 显示基本图形及相关概念解读</a><span>(9)</span>
<li>
<a href="http://blog.csdn.net/huachao1001/article/details/51766225" title="彻底理解View事件体系！">彻底理解View事件体系！</a><span>(9)</span>
</li>
</ul>
</div>
<div id="newcomments" class="panel">
<ul class="panel_head"><span>最新评论</span></ul>
<ul class="panel_body itemlist">
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/51558835#comments">玩转AppBarLayout，更酷炫的顶部栏</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/changlei_shennan" class="user_name">changlei_shennan</a>:
确实分开讲很好，，，赞
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/51554608#comments">CoordinatorLayout的使用如此简单</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/changlei_shennan" class="user_name">changlei_shennan</a>:
不错，谢谢楼主
    </p>
    <li>
   
         <A href="#comments">IntelliJ IDEA平台下JNI编程（一）—HelloWorld篇</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/youyi300200" class="user_name">youyi300200</a>:
问个问题： 大型项目， .o 文件怎么生成
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/51866287#comments">理清Activity、View及Window之间关系</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/kangjianwei101" class="user_name">kangjianwei101</a>:
@w6980112:我不认同这个说法，哈哈！
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/51819972#comments">通过自定义Gradle插件修改编译后的class文件</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/CHZiroy" class="user_name">CHZiroy</a>:
多谢楼主分享，另外，使用楼主源码的哥们，记得看看Transform代码中的文件分割符，楼主是com\...
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/51659963#comments">酷炫的Activity切换动画，打造更好的用户体验</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/sunkes" class="user_name">sunkes</a>:
很好的文章，深入浅出。不太明白getWindow().requestFeature(Window.F...
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/51659963#comments">CoordinatorLayout的使用如此简单</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/qq_30587885" class="user_name">qq_30587885</a>:
5.0刚出来的时候我就学习过Behavior，当时可能技术太low了 写了好些demo还没理解，今天...
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/52164828#comments">Android OpenGL添加纹理</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/u014385442" class="user_name">u014385442</a>:
请问我想将一个圆形图片，贴到一个半球内部，形成鱼眼效果，是不是要切成很多图片
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/52164828#comments">CoordinatorLayout的使用如此简单</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/u014027945" class="user_name">u014027945</a>:
无法获取源码，能发给我一份源码吗？1508443835@qq.com
    </p>
    <li>
   
         <a href="http://blog.csdn.net/huachao1001/article/details/51504469#comments">简单明了，彻底地理解Binder</a>
    <p style="MARGIN: 0px"><a href="http://blog.csdn.net/a279822581" class="user_name">a279822581</a>:
图很好，便于理解。不过有点误导的意思
    </p>
    </li>
</ul>
</div>
    </div>
    <div class="clear">
    </div><!-- 广告位开始 --> 
                    <ins data-revive-id="8c38e720de1c90a6f6ff52f3f89c4d57" data-revive-zoneid="189">

           </INS><!-- 广告位结束 -->

           </div>   

            <div class="clear">
            </div>
<DIV></DIV>

        

<script type="text/javascript" src="index_files/cnick.js"></script>
<script type="text/javascript" src="index_files/newblog.min.js"></script>


<script type="text/javascript" src="index_files/showblogmedal.ashx.js"></script>
<script type="text/javascript" src="index_files/JavaScript1.js"></script><LINK rel=stylesheet type=text/css href="index_files/pub_footer_2014.css"><div class="pub_fo"><div id="pub_footerall" class="pub_footer_new"><dl><dt></dt> <dd class="foot_sub_menu"><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a><span>|</span><a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a><span>|</span><a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a><span>|</span><a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a><span>|</span><a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a><span>|</span><a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a><span>|</span><A href="mailto:webmaster@csdn.net">问题报告</a><span>|</span><a target="_blank" href="http://www.csdn.net/friendlink.html">合作伙伴</a><span>|</span><a href="http://bbs.csdn.net/forums/Service" target="_blank">论坛反馈</a></dd><dd class="foot_contact"><A class=qq href="javascript:void(0);" target=_blank>网站客服</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2251809102&amp;site=qq&amp;menu=yes" target="_blank" class="qq">杂志客服</a><a href="http://e.weibo.com/csdnsupport/profile" target="_blank" class="weibo">微博客服</a><A title=联系邮箱 class=email href="mailto:webmaster@csdn.net">webmaster@csdn.net</a><span class="phone" title="服务热线">400-600-2320</span><span class="interval">|</span><span>北京创新乐知信息技术有限公司 版权所有</span><span class="interval">|</span><span>江苏知之为计算机有限公司</span><span class="interval">|</span><span>江苏乐知网络技术有限公司</span></dd><dd class="foot_copyright"><span>京&nbsp;ICP&nbsp;证&nbsp;09002463&nbsp;号</span><span class="interval">|</span><span>Copyright © 1999-2016, CSDN.NET, All Rights Reserved&nbsp;</span><a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><IMG title="" alt=GongshangLogo src="index_files/gongshang_logos.gif"></a></dd></dl></div></div><div id="note1" class="csdn_note" style="WIDTH: 440px; POSITION: absolute; Z-INDEX: 9999; DISPLAY: none">  <span class="notice_top_arrow"><span class="inner"></span></span>  <div class="box"></div></div><div class="csdn_notice_tip" style="WIDTH: 170px; POSITION: absolute; Z-INDEX: 9990; DISPLAY: none">  <iframe src="index_files/unnamed-1.html" scrolling="no" style="HEIGHT: 100%; WIDTH: 100%; BACKGROUND: none transparent scroll repeat 0% 0%; POSITION: absolute; LEFT: 0px; Z-INDEX: -1; TOP: 0px" frameborder="0"></iframe>  <div class="tip_text">您有<strong>0</strong>条新通知</div>  <A class=close2 href="javascript:void(0);"></a></div><script id="noticeScript" type="text/javascript" src="index_files/notify.js" subcount="5" count="5" wrapid="note1" btnid="header_notice_num"></script>

    <script type="text/javascript" src="index_files/login.js"></script>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script><IMG border=0 src="index_files/pv.aspx.txt" width=0 height=0>
<script type="text/javascript" src="index_files/counter.js"></script><script type="text/javascript" charset="UTF-8" src="index_files/msg.popup.js"></script>
<script type="text/javascript" src="index_files/ad-blog.js"></script>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>
 
<DIV></DIV><input id="aa_g_data_ids" type="hidden"> <!--new top-->
    
    <script id="csdn-toolbar-id" type="text/javascript" src="index_files/toolbar.js" subcount="5" count="5" wrapid="note1" btnid="header_notice_num"></script>
<!--new top-->
   
    <LINK rel=stylesheet type=text/css href="index_files/ask_float_block.css">
    <script language="JavaScript" type="text/javascript" src="index_files/wmd.js"></script>
    <script language="JavaScript" type="text/javascript" src="index_files/showdown.js"></script>
    <script language="JavaScript" type="text/javascript" src="index_files/prettify.js"></script>
    <script language="JavaScript" type="text/javascript" src="index_files/ask_float_block.js"></script>
   

   

  <div id="a52b5334d" style="HEIGHT: 1px; WIDTH: 1px; DISPLAY: none">
                    <script id="adJs52b5334" src="index_files/52b5334.js"></script>
                    <script><!--
/* Script removed by snapshot save */
--></script>
   </div>

    <LINK rel=stylesheet href="index_files/blog_code.css">
    <script type="text/javascript" src="index_files/saveToCode.js"></script>
      <script type="text/javascript" src="index_files/main-1.js"></script>

     <LINK rel=stylesheet href="index_files/fa.css">

    <div class="pop_CA_cover" style="DISPLAY: none"></div>
    <div class="pop pop_CA" style="DISPLAY: none">
          <div class="CA_header">
            收藏助手
            <span class="cancel_icon" id="fapancle" onclick=""></span>
          </div>
          <iframe src="index_files/generated-content-1.html" id="fa" scrolling="no" frameborder="0" height="360" width="100%">
    &lt/div&gt
&lt/body&gt
&lt/html&gt   
 </iframe></div><div id="tag-suggest-pop">
  <div class="relative">
    <div class="close"></div>
    <div class="content"></div>
  </div>
</div><LINK rel=stylesheet type=text/css href="index_files/ask_float_fonts_css-6b30ab5c3a2a045e3df585b475.css" media=screen><div class="csdn-tracking-statistics" data-mod="popu_64" chg-blk="0"><a id="com-quick-reply" title="快速回复" ></a><a id="com-quick-collect" title="我要收藏" ></a><a id="com-d-top-a" title="返回顶部" onclick="" ></a> </div><div class="pop_edit ask_second comm_ask_second"><h3>提问</h3><span class="ask_float_span">您的问题将会被发布在“<a class="ask_float_channel" href="http://ask.csdn.net/" target="_blank" style="CURSOR: pointer">技术问答</a>”频道</span><A class=close href="#"  nodetype="close">×</a><div class="context"><div class="err_div"><span class="err_ico"></span><span class="err_txt">该问题已存在，请勿重复提问</span></div><div class="input_div"><input id="askInputSecond" style="FONT-SIZE: 14px" placeholder="问题标题"></div><div class="cm_box"><div class="cm_dialog"></div> <div class="pop_cm cm_add_link"><input id="af_cm_link_txt" placeholder="链接内容" ><input id="af_cm_link_url" placeholder="链接地址" ><input id="af_cm_link_tit" placeholder="链接提示" ><div class="text-right"><span class="btn btn-default btn-sm" id="add_link_btn">插入链接</span> </div> </div><div class="pop_cm cm_add_img"><div class="nav-tabs"><A class="img_tab active" href="#tab_upload">本地上传</a><A class=img_tab href="#tab_weburl">网络图片</a></div><div class="tab_panel active" id="tab_upload"><div class="set_img"><iframe src="index_files/upload.html.xhtml"></iframe></div></div><div class="tab_panel" id="tab_weburl"><input id="af_cm_img_url" placeholder="图片地址" ><input id="af_cm_img_alt" placeholder="图片说明" ><div class="text-right"><span class="btn btn-default btn-sm" id="add_img_btn">插入图片</span> </div></div> </div></div><TEXTAREA id=editor_all style="DISPLAY: none" rows=8></TEXTAREA><div class="editor-toolbar"><i class="separator">|</i><a class="icon-headline" title="标题一（Ctrl+Alt+1）"></a><a class="icon-heading" title="标题二（Ctrl+Alt+2）"></a><a class="icon-bold" title="粗体（Ctrl+B）"></a><a class="icon-italic" title="斜体（Ctrl+I）"></a><i class="separator">|</i><a class="icon-quote-left" title="引用（Ctrl+’）"></a><a class="icon-code" title="插入代码片（Ctrl+,）"></a><a class="icon-list-ul" title="无序列表（Ctrl+L）"></a><a class="icon-list-ol" title="有序列表（Ctrl+Alt+L）"></a><i class="separator">|</i><a class="icon-link" title="添加链接（Ctrl+K）"></a><a class="icon-picture" title="添加图片（Ctrl+Alt+I）"></a><i class="separator">|</i><a class="icon-reply" title="撤退（Ctrl+Z）"></a><a class="icon-share-alt" title="前进（Ctrl+Shift+Z）"></a><i class="separator">|</i><a class="icon-info" href="http://ask.csdn.net/pages/markdown" target="_blank" title="markdown语法参考"></a><a class="icon-preview" title="预览"></a><i class="separator">|</i></div><div class="CodeMirror cm-s-paper CodeMirror-focused"><div style="OVERFLOW: hidden; HEIGHT: 0px; WIDTH: 3px; POSITION: relative"><TEXTAREA spellcheck=false tabIndex=0 style="FONT-SIZE: 4px; HEIGHT: 1em; WIDTH: 1px; POSITION: absolute; OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px" wrap=off autocapitalize="off" autocorrect="off"></TEXTAREA></div><div class="CodeMirror-hscrollbar"><div style="HEIGHT: 1px"></div></div><div class="CodeMirror-vscrollbar"><div style="WIDTH: 1px"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="true"><div class="CodeMirror-sizer" style="MIN-WIDTH: 33px"><div style="POSITION: relative"><div class="CodeMirror-lines"><div style="POSITION: relative; OUTLINE-WIDTH: medium; OUTLINE-STYLE: none; OUTLINE-COLOR: invert"><div class="CodeMirror-measure"><pre>&nbsp;<span style="WIDTH: 1px; DISPLAY: inline-block; MARGIN-RIGHT: -1px">&nbsp;</span></pre></div><div style="POSITION: relative; Z-INDEX: 1"></div><div class="CodeMirror-code"></div><div class="CodeMirror-cursor" style="VISIBILITY: hidden"></div><div class="CodeMirror-cursor CodeMirror-secondarycursor" style="VISIBILITY: hidden"></div></div></div></div></div><div style="HEIGHT: 30px; WIDTH: 1px; POSITION: absolute"></div><div class="CodeMirror-gutters" style="DISPLAY: none"></div></div></div><div class="editor-statusbar"><span class="lines">0</span><span class="words">0</span><span class="cursor">0:0</span></div><div class="div_tags clearfix"><div id="divSearchTags" class="tags_con"><input ></div><input name="txtSearchTags" type="hidden"></div><div id="ask2_tagRecomm_div" class="drt_tagRecomm tracking-ad" data-mod="popu_73"><span class="drt_tit">推荐标签：</span></div></div><div class="success"><div class="left_area"><input id="chk_cb" type="checkbox"><span class="wyxs">我要悬赏</span><input id="cb_num" class="cb_num" readonly><span class="phib_rii"><span> 币</span></span></div><A class=cancel href="#"  nodetype="cancel">取消</a><A class=ok href="#"  nodetype="ok">发布</a></div></div><div id="common_ask_div_sc" class="searchContainer"><div class="sTitle">可能存在类似的问题：</div><div class="sFooter"><a class="sFirstNewAsk">我想提一个新问题</a></div></div><div id="mask_code"></div><div class="gist_edit"><div class="save_snippets clearfix"><div class="tit"><h3>保存代码片</h3><span>整理和分享保存的代码片，请访问<A href="https://code.csdn.net/snippets_manage" target=_blank>代码笔记</a></span></div><div class="con_form"><ul class="gist_edit_list clearfix"><li><span class="red">*</span><span class="txt">标题</span><input id="form_title" class="form-input" placeholder="IntelliJ IDEA平台下JNI编程（一）—HelloWorld篇" ><li><span class="red">*</span><span class="txt">描述</span><TEXTAREA id=form-textarea class=form-textarea placeholder="IntelliJ IDEA平台下JNI编程（一）—HelloWorld篇： http://blog.csdn.net/huachao1001/article/details/53906237"></TEXTAREA><li><span class="red">&nbsp;</span><span class="txt">标签</span><div id="divSearchTags"><span class="label blog_tag"><span>JNI</span><A title="Removing tag" href="javascript:void(0);">x</a></span><span class="label blog_tag"><span>NDK</span><A title="Removing tag" href="javascript:void(0);">x</a></span><span class="label blog_tag"><span>IEDA</span><A title="Removing tag" href="javascript:void(0);">x</a></span><span class="label blog_tag"><span>Android</span><A title="Removing tag" href="javascript:void(0);">x</a></span><span class="label blog_tag"><span>Studio</span><A title="Removing tag" href="javascript:void(0);">x</a></span><input id="insertTag" class="insertTag" name="insertTag" maxlength="21" style="COLOR: rgb(51,51,51)" placeholder   ="请输入标签，按Enter生成(最多5项)"><input id="OrganTag" class="OrganTag" name="OrganTag" value="JNI,NDK,IEDA,Android,Studio," type="hidden"><input id="OldOrganTag" class="OldOrganTag" name="OldOrganTag" type="hidden" 
 ><input name="txtSearchTags" type="hidden"></div></li></ul></div><div class="bottom-bar"><A class="btn-submit btn-cancel" href="javascript:void(0);" >取消</a><span class="tracking-ad" data-mod="popu_250"><A class="btn-submit btn-confirm" href="javascript:void(0);">确定</a></span></div></div></div></body></html>