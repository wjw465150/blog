<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">

<html dir=ltr xml:lang="zh-CN" 
xmlns="http://www.w3.org/1999/xhtml"><head><title>通过iptables简单的实现负载均衡</title><link 
href="favicon.ico" type=image/x-icon rel="shortcut icon"><link 
title=我参与的讨论、问答RSS href="my" type=application/rss+xml rel=alternate><link 
media=screen href="blog_admin.css_1247066018" 
type=text/css rel=stylesheet><link media=screen 
href="blue.css_1235723792" 
type=text/css rel=stylesheet>
<link media=screen 
href="SyntaxHighlighter.css_1201588027" 
type=text/css rel=stylesheet>
<style>
    div#main {background-color: transparent; border: 0; padding: 0px; width: 740px;}
  </style>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>

<div id=page>

<div class=clearfix id=content>

<div id=main>

<div class=blog_main><!--StartFragment-->
<div class=blog_title><h3>通过iptables简单的实现负载均衡</h3><strong>关键字: 通过iptables简单的实现负载均衡</strong> </div>
<div class=blog_content>
<p>输入以下命令:</p>
<p>iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 
8001-8002</p>
<p>&nbsp;</p>
<p>解释:通过NAT的方式吧从端口80接收到的数据随机转发到8001,8002端口</p>
<p>&nbsp;</p>
<p>注意:要使用 iptables-save &gt; /etc/sysconfig/iptables,否则在服务重启后会丢失的.</p>
<p>&nbsp;</p>
<p>另一种方法是直接编辑:/etc/sysconfig/iptables文件,在文件开头添加上:</p>
<p>*nat<br>:PREROUTING ACCEPT [766:86527]<br>:POSTROUTING ACCEPT 
[22:2300]<br>:OUTPUT ACCEPT [22:2300]<br>-A PREROUTING -p tcp -m tcp --dport 80 
-j REDIRECT --to-ports 8001-8002 <br>COMMIT</p></div><!--EndFragment--></div>
</div>
</div>
</div>
<P>&nbsp;</P>
<P>&nbsp;</P>
</body>
</html>