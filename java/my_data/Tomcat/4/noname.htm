<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">

<HTML xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>redhat下为tomcat6配置APR及问题处理</title><LINK 
href="1.ico" 
rel="Shortcut Icon"><LINK media=all 
href="rose_1.css" type=text/css 
rel=stylesheet><LINK media=all 
href="csdn_favbykimi.css" type=text/css 
rel=stylesheet>
<LINK title=RSS href="kunshan_shenbin" 
type=application/rss+xml rel=alternate></HEAD>

<BODY id=defaultuser>

<DIV id=csdnblog_allwrap>

<FORM id=Form1 name=Form1 action=3997443.aspx method=post>

<DIV id=csdnblog_midwrap>

<DIV id=csdnblog_content>

<DIV class=gutter>

<DIV class=default_contents>

<DIV class=user_article><!--StartFragment-->
<H1 class=title_txt>redhat下为tomcat6配置APR及问题处理<CITE class=fav_csdnstylebykimi><A 
title=收藏到我的网摘中，并分享给我的朋友 class=fav_csdnstylebykimi 
href="javascript:d=document;t=d.selection%3F(d.selection.type!='None'?d.selection.createRange().text:''):(d.getSelection?d.getSelection():'');void(saveit=window.open('http://wz.csdn.net/storeit.aspx?t='+escape(d.title)+'&amp;u='+escape(d.location.href)+'&amp;c='+escape(t),'saveit','scrollbars=no,width=590,height=300,left=75,top=20,status=no,resizable=yes'));saveit.focus();">收藏</A></CITE></H1>
<DIV class=blogstory>
<P>转自：<A 
href="http://www.javaeye.com/topic/349703">http://www.javaeye.com/topic/349703</A></P>
<P>1、解压TOMCAT-6.018安装目录下/bin/tomcat-native.tar.gz 
<BR>2、进入解压后的目录/bin/tomcat-native-1.1.14-src/jni/native <BR>3、运行./configure 
<BR>4、如果运行./configure提示： <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "checking for APR... no 
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; configure: error: APR could not be located. Please use the 
--with-apr option." <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 需要先按装APR,步骤如下： <BR>&nbsp;&nbsp;&nbsp;&nbsp; 
从http://apr.apache.org/下载APR（如Apache Portable Runtime 
1.3.3）及APR-util（apr-util-1.3.4.tar.gz） <BR>&nbsp;&nbsp;&nbsp;&nbsp; 4.1先安装APR <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 解压 
apr-1.3.3.tar.gz <BR>进入解压后的目录依次运行 <BR>./configure <BR>make <BR>make install 
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.2后安装APR-util <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 解压 apr-util-1.3.4.tar.gz 
<BR>进入解压后的目录依次运行 <BR>./configure <BR>make <BR>make install <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.3 
进入/bin/tomcat-native-1.1.14-src/jni/native <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 运行： sh buildconf 
--with-apr=/apr-1.3.3&nbsp;&nbsp; (apr所在目录) <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./configure --with-apr=/apr-1.3.3 
<BR>5、在/bin/tomcat-native-1.1.14-src/jni/native，运行 make 和 make install 
<BR>6、设置环境变量,在/etc/profile里添加 <BR>&nbsp;&nbsp;&nbsp; 
LD_LIBRARY_PATH=$CATALINA_HOME/lib:/usr/local/apr/lib:/usr/local/apr <BR>&nbsp;&nbsp;&nbsp; 
export LD_LIBRARY_PATH <BR>7、设置TOMCAT启动参数 <BR>&nbsp;&nbsp;&nbsp; 在catalina.sh 加入启动参数： 
CATALINA_OPTS="$CATALINA_OPTS -Djava.library.path=/usr/local/apr/lib" <BR>&nbsp;&nbsp;&nbsp; 
（在语句echo "Using CATALINA_BASE:&nbsp;&nbsp; $CATALINA_BASE"的上一行） </P></DIV><!--EndFragment--></DIV>
<P>&nbsp;</P>
<P>&nbsp;</P>
</DIV>
</DIV>
</DIV>
</DIV>
</FORM>
</DIV>
</BODY>
</HTML>