<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>RPM使用技巧</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<DIV class=postText 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 13px Verdana, Geneva, Arial, Helvetica, sans-serif; WIDOWS: 1; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px">
<H1 class=SECT1><A name=S1-RPM-USING>使用 RPM</A></H1>
<P>RPM 有五个基本的操作 模式(不包括包的编译): 安装，卸载，升级，查询，校验。本节将对它们一一介绍。要了解完整的细节和选项，可以使用<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>rpm –help</B>, 
或转到<SPAN class=Apple-converted-space>&nbsp;</SPAN><A 
style="TEXT-DECORATION: none; COLOR: rgb(0,102,255)" 
href="http://www.xteamlinux.com.cn/xteamlinux4html/3/s1-rpm-other-resources.html">the 
section called<SPAN class=Apple-converted-space>&nbsp;</SPAN><I 
style="COLOR: green; FONT-STYLE: normal">其它 RPM 资源</I></A><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>得到更多关于 RPM 的信息。</P>
<DIV class=SECT2>
<H2 class=SECT2>3.2.1<SPAN class=Apple-converted-space>&nbsp;</SPAN><A 
name=S2-RPM-INSTALLING>安装</A></H2>
<P>典型的 RPM 有着类似<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT 
class=FILENAME>foo-1.0-1.i386.rpm</TT>这样的名称, 其中指明了包名 (<TT 
class=FILENAME>foo</TT>), 版本号 (<TT class=FILENAME>1.0</TT>), 发行号 (<TT 
class=FILENAME>1</TT>), 和硬件平台 (<TT 
class=FILENAME>i386</TT>)。安装一个软件包只需简单的键入以下命令:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -ivh foo-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo ####################################</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>正如您所看到的, RPM 将会打印出软件包的名字 ( 并不一定要与文件名相同, 可能是<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><TT class=FILENAME>1.rpm</TT>), 
而后打印出一连串的 # 号以表示安装进度。</P>
<DIV class=NOTE>
<TABLE class=NOTE width="100%" border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt" vAlign=top width=25 align=center><IMG 
      style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" 
      hspace=5 alt=Note 
      src="http://www.xteamlinux.com.cn/xteamlinux4html/3/stylesheet-images/note.gif" 
      width=24 height=24></TD>
    <TH vAlign=middle align=left><B>请注意</B></TH></TR>
  <TR>
    <TD style="FONT-SIZE: 10pt">&nbsp;</TD>
    <TD style="FONT-SIZE: 10pt" vAlign=top align=left>
      <P>尽管通常是使用<SPAN class=Apple-converted-space>&nbsp;</SPAN><B 
      class=COMMAND><TT class=USERINPUT><B>rpm -ivh 
      foo-1.0-1.i386.rpm</B></TT></B><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>来安装包, 但也可以用<SPAN 
      class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND><TT 
      class=USERINPUT><B>rpm -Uvh foo-1.0-1.i386.rpm</B></TT></B><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>来替代。<SPAN 
      class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>-U</B><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>是包升级参数, 也可以用来安装新包。参看<SPAN 
      class=Apple-converted-space>&nbsp;</SPAN><A 
      style="TEXT-DECORATION: none; COLOR: rgb(0,102,255)" 
      href="http://www.xteamlinux.com.cn/xteamlinux4html/3/s1-rpm-using.html#S2-RPM-UPGRADING"><I 
      style="COLOR: green; FONT-STYLE: normal">升级</I>一节</A><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>有关RPM 中<SPAN 
      class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>-U</B><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>参数的详细使用情况。</P></TD></TR></TABLE></DIV>
<P>软件包的安装设计非常简单, 但还是有可能发生以下错误:</P>
<DIV class=SECT3>
<H3 class=SECT3 
style="FONT-SIZE: 10pt; BORDER-BOTTOM: rgb(214,214,214) 1px dotted; COLOR: rgb(0,0,0); BACKGROUND-COLOR: transparent"><A 
name=S3-RPM-ERRORS>软件包已被安装</A></H3>
<P>如果软件包已被安装, 会出现以下信息:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -ivh foo-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo package foo-1.0-1 is already installed<BR>error: foo-1.0-1.i386.rpm cannot be installed</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>如果仍要安装该包, 可以在命令行中使用<SPAN class=Apple-converted-space>&nbsp;</SPAN><B 
class=COMMAND>–replacepkgs</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>选项, 
这样 RPM 将忽略该错误信息:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -ivh --replacepkgs foo-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo ####################################</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE></DIV>
<DIV class=SECT3>
<H3 class=SECT3 
style="FONT-SIZE: 10pt; BORDER-BOTTOM: rgb(214,214,214) 1px dotted; COLOR: rgb(0,0,0); BACKGROUND-COLOR: transparent"><A 
name=S3-RPM-CONFLICTING-FILES>文件冲突</A></H3>
<P>如果要安装的软件包中有一个文件已在安装其它包时被安装，会显示以下信息:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -ivh foo-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo /usr/bin/foo conflicts with file from bar-1.0-1<BR>error: foo-1.0-1.i386.rpm cannot be installed</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>要想让RPM 忽略该错误信息, 请使用<SPAN class=Apple-converted-space>&nbsp;</SPAN><B 
class=COMMAND>–replacefiles</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>命令行选项:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -ivh --replacefiles foo-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo ####################################</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE></DIV>
<DIV class=SECT3>
<H3 class=SECT3 
style="FONT-SIZE: 10pt; BORDER-BOTTOM: rgb(214,214,214) 1px dotted; COLOR: rgb(0,0,0); BACKGROUND-COLOR: transparent"><A 
name=S3-RPM-UNRESOLVED-DEPENDENCY>未解决依赖关系</A></H3>
<P>一个 RPM 包可能会 "依赖" 其它软件包, 也就是说要求在安装了特定的软件包之后才能安装该软件包。 如果在安装这个软件包时未解决这种存在的依赖关系, 
会看到:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -ivh bar-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>failed dependencies:<BR> foo is needed by bar-1.0-1</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>只有先安装完所依赖的软件包，才能解决这个问题。 如果想强制安装 (这不是个好办法，因为安装后的软件包未必能正常运行), 可以使用<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>–nodeps</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>命令行选项。自动关联使用<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><STRONG>–aid</STRONG><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>命令行选项</P></DIV></DIV>
<DIV class=SECT2>
<H2 class=SECT2>3.2.2<SPAN class=Apple-converted-space>&nbsp;</SPAN><A 
name=S2-RPM-UNINSTALLING>卸载</A></H2>
<P>卸载软件包就象安装软件包时一样简单:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -e foo</B></TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<DIV class=NOTE>
<TABLE class=NOTE width="100%" border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt" vAlign=top width=25 align=center><IMG 
      style="BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" 
      hspace=5 alt=Note 
      src="http://www.xteamlinux.com.cn/xteamlinux4html/3/stylesheet-images/note.gif" 
      width=24 height=24></TD>
    <TH vAlign=middle align=left><B>请注意</B></TH></TR>
  <TR>
    <TD style="FONT-SIZE: 10pt">&nbsp;</TD>
    <TD style="FONT-SIZE: 10pt" vAlign=top align=left>
      <P>注意这里使用软件包的<SPAN class=Apple-converted-space>&nbsp;</SPAN><I 
      class=EMPHASIS style="COLOR: green; FONT-STYLE: normal">名字</I><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>"<TT class=FILENAME>foo</TT>" , 
      而不是原始软件包的<SPAN class=Apple-converted-space>&nbsp;</SPAN><I class=EMPHASIS 
      style="COLOR: green; FONT-STYLE: normal">文件名</I><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>"<TT 
      class=FILENAME>foo-1.0-1.i386.rpm</TT>"。卸载软件包时, 需要用原始包的实际文件名替换<SPAN 
      class=Apple-converted-space>&nbsp;</SPAN><TT class=FILENAME>foo</TT><SPAN 
      class=Apple-converted-space>&nbsp;</SPAN>包名。</P></TD></TR></TABLE></DIV>
<P>在卸载某个软件包时，可能会发生依赖关系错误，这说明其它包与此包之间有安装依赖关系。例如:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -e foo</B></TT><BR><TT class=COMPUTEROUTPUT>removing these packages would break dependencies:<BR> foo is needed by bar-1.0-1</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>要使 RPM 在卸载此包时忽略该错误 (这不是个好办法，因为卸载后，与它有依赖关系的软件包未必能正常运行), 使用<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>–nodeps</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>命令行选项。</P></DIV>
<DIV class=SECT2>
<H2 class=SECT2>3.2.3<SPAN class=Apple-converted-space>&nbsp;</SPAN><A 
name=S2-RPM-UPGRADING>升级</A></H2>
<P>升级软件包和安装软件包十分类似。</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -Uvh foo-2.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo ####################################</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>RPM 将自动卸载已安装的老版本的<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT 
class=FILENAME>foo</TT><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>软件包，用户无法看到有关信息。事实上用户可能总是使用<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>-U</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>来安装软件包, 因为即便以往未安装过该软件包，也能正常运行。</P>
<P>因为 RPM 执行智能化的软件包升级，自动处理配置文件，会显示如下信息:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=COMPUTEROUTPUT>saving /etc/foo.conf as /etc/foo.conf.rpmsave</TT><BR> </PRE></TD></TR></TABLE>
<P>这表示用户对配置文件的修改，不一定能 "向上兼容" 该软件包中的配置文件。 因此，RPM 
会备份原始的文件，再安装新文件。用户应当尽快解决这两个配置文件的不同之处，以便系统能持续正常运行。</P>
<P>因为升级其实就是软件包的卸载与安装的综合,也可能会遇见那些操作中所可能发生的错误。 再有就是: 在使用<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><I class=EMPHASIS 
style="COLOR: green; FONT-STYLE: normal">旧</I><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>版本的 RPM 软件包来升级新版本的软件时，会产生以下信息:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -Uvh foo-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo package foo-2.0-1 (which is newer) is already installed<BR>error: foo-1.0-1.i386.rpm cannot be installed</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>要使用 RPM 强行 "升级" , 请使用<SPAN class=Apple-converted-space>&nbsp;</SPAN><B 
class=COMMAND>–oldpackage</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>命令行参数:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -Uvh --oldpackage foo-1.0-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo ####################################</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE></DIV>
<DIV class=SECT2>
<H2 class=SECT2>3.2.4<SPAN class=Apple-converted-space>&nbsp;</SPAN><A 
name=S2-RPM-FRESHENING>更新</A></H2>
<P>包的更新与包升级相似:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -Fvh foo-1.2-1.i386.rpm</B></TT><BR><TT class=COMPUTEROUTPUT>foo ####################################</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>RPM 更新选项，是检查命令行中指明的包版本与安装在系统中的包版本是否一致。 当 RPM 更新选项处理完已安装包的新版本时，该包会升级到新版本。 
但是，RPM 更新选项无法安装系统目前没有的软件包。 这与 RPM 升级不同，升级选项<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><I class=EMPHASIS 
style="COLOR: green; FONT-STYLE: normal">能够</I><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>安装软件包，无论旧版本的包是否已安装。</P>
<P>RPM 更新选项可以很好的更新一个软件包或一组软件包。 如果用户下载了大量的软件包，但只想升级系统中已有的包时，RPM 更新选项会非常有用。 使用 RPM 
更新选项意味着你无需从下载的包中挑挑拣拣，也不用事先删除不要的包。</P>
<P>这种情况下, 只需简单的键入:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -Fvh *.rpm</B></TT><BR> </PRE></TD></TR></TABLE>
<P>RPM 工具会自动升级那些已经安装好的包。</P></DIV>
<DIV class=SECT2>
<H2 class=SECT2>3.2.5<SPAN class=Apple-converted-space>&nbsp;</SPAN><A 
name=S2-RPM-QUERYING>查询</A></H2>
<P>使用命令<SPAN class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>rpm 
-q</B>来查询已安装软件包的数据库。简单的使用命令<SPAN class=Apple-converted-space>&nbsp;</SPAN><B 
class=COMMAND>rpm -q foo</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>会打印出foo软件包的包名、版本号和发行号:</P>
<TABLE width="100%" bgColor=#e0e0e0 border=0>
  
  <TR>
    <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=PROMPT># </TT><TT class=USERINPUT><B>rpm -q foo</B></TT><BR><TT class=COMPUTEROUTPUT>foo-2.0-1</TT><BR><TT class=PROMPT>#</TT><BR> </PRE></TD></TR></TABLE>
<P>除了指定包名以外，用户还可以使用以下选项与<SPAN class=Apple-converted-space>&nbsp;</SPAN><B 
class=COMMAND>-q</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>连用，来指明要查询哪些软件包的信息。这些选项被称之为<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><I class=EMPHASIS 
style="COLOR: green; FONT-STYLE: normal">软件包指定选项</I><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>。</P>
<UL>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-a</B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>查询所有已安装的软件包。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-f<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT 
  class=FILENAME><TT class=REPLACEABLE><I 
  style="COLOR: green; FONT-STYLE: normal">&lt;file&gt;</I></TT></TT></B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>将查询包含有文件<SPAN 
  class=Apple-converted-space>&nbsp;</SPAN><TT class=FILENAME><TT 
  class=REPLACEABLE><I 
  style="COLOR: green; FONT-STYLE: normal">&lt;file&gt;</I></TT></TT>的软件包。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-p<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT 
  class=FILENAME><TT class=REPLACEABLE><I 
  style="COLOR: green; FONT-STYLE: normal">&lt;packagefile&gt;</I></TT></TT></B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>查询软件包文件名为<SPAN 
  class=Apple-converted-space>&nbsp;</SPAN><TT class=FILENAME><TT 
  class=REPLACEABLE><I 
  style="COLOR: green; FONT-STYLE: normal">&lt;packagefile&gt;</I></TT></TT>的包。</P></LI></UL>
<P>有几种方式来指定查询软件包时所显示的信息。 以下选项可以出选择感兴趣的信息，加以显示。这样的选项被称作<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><I class=EMPHASIS 
style="COLOR: green; FONT-STYLE: normal">信息选择选项</I><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>。</P>
<UL>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-i</B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>显示软件包信息，如描述、发行号、大小、编译日期、安装日期、硬件平台、以及其它一些各类信息。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-l</B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>列出软件包中包含的文件。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-s</B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>显示软件包中所有文件的状态。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-d</B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>列出被标注为文档的文件 (如，man 手册、 info 
  信息、README，等等) 。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P><B class=COMMAND>-c</B><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>列出被标注为配置文件的文件。这些文件是需要在安装完毕后加以定制的，如 
  (<TT class=FILENAME>sendmail.cf</TT>,<SPAN 
  class=Apple-converted-space>&nbsp;</SPAN><TT class=FILENAME>passwd</TT>,<SPAN 
  class=Apple-converted-space>&nbsp;</SPAN><TT class=FILENAME>inittab</TT>, 等) 
  。</P></LI></UL>
<P>如果要在执行上述选项的同时，显示文件列表, 可以同时使用<SPAN class=Apple-converted-space>&nbsp;</SPAN><B 
class=COMMAND>-v</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>命令行选项，就能得出与<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>ls -l</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>格式类似的输出。</P></DIV>
<DIV class=SECT2>
<H2 class=SECT2>3.2.6<SPAN class=Apple-converted-space>&nbsp;</SPAN><A 
name=S2-RPM-VERIFYING>校验</A></H2>
<P>包校验是比较自软件包中安装的文件信息和软件包中的原始文件的相同信息。 
与其它校验相同，包校验将比较文件的长度、MD5校验和、许可、类型、文件属主和群组。</P>
<P>使用<SPAN class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>rpm 
-V</B><SPAN class=Apple-converted-space>&nbsp;</SPAN>命令进行包校验。用户可以配合使用各个<I 
class=EMPHASIS style="COLOR: green; FONT-STYLE: normal">包选择选项</I><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>，来列出校验包的查询结果。 简单地使用<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><B class=COMMAND>rpm -V foo</B><SPAN 
class=Apple-converted-space>&nbsp;</SPAN>可以校验 foo 包中原始安装时的所有文件。例如:</P>
<UL>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>校验包含特定文件的软件包:<BR></P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -Vf /bin/vi</B><BR> </PRE></TD></TR></TABLE></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>校验所有已安装的软件包:<BR></P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -Va</B><BR> </PRE></TD></TR></TABLE></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>用 RPM 包文件校验已安装的软件包:<BR></P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -Vp foo-1.0-1.i386.rpm</B><BR> </PRE></TD></TR></TABLE>
  <P>如果担心RPM数据库被破坏，就可以使用这种方式加以校验。</P></LI></UL>
<P>如果校验结果一切正常，将不会产生任何输出。如果有不一致的地方，会显示出来。 输出格式是8位长字符串, "c" 用以指配置文件, 
接着是文件名。8位长字符，每个代表一个文件属性与RPM数据库中记录的属性相比较的结果。"." (点) 表示测试通过。 下面的字符代表某测试的失败:</P>
<UL>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>5 — MD5 校验和</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>S — 文件长度</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>L — 符号链接</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>T — 文件修改日期</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>D — 设备</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>U — 用户</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>G — 用户组</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>M — 模式 (包含许可和文件类型)</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>? — 不可读文件</P></LI></UL>
<P>如果有信息输出, 用户应当认真加以考虑，是该删除、重新安装、还是修正出现的问题。<BR></P>
<H1 class=SECT1><A name=S1-RPM-IMPRESSING>使用 RPM 相互交流</A></H1>
<P>RPM 是一个对于系统维护和诊断，解决问题的十分有用的工具。了解各种选项用法的最好方式是通过例子来学习。</P>
<UL>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>比如误删了一些文件, 但又不能确定到底删除那些文件。要想验证一下整个系统丢失了那些文件的话，可以键入:</P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -Va</B><BR> </PRE></TD></TR></TABLE>
  <P>如果有文件丢失或已被损坏, 就可以重新安装或先卸载再重新安装软件包。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>如果碰到了一个不认识的文件，要想查处它属于哪个软件包，可以输入以下命令 :</P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -qf /usr/X11R6/bin/ghostview</B><BR> </PRE></TD></TR></TABLE>
  <P>这个输出的结果是:</P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=COMPUTEROUTPUT>gv-3.5.8-10</TT><BR> </PRE></TD></TR></TABLE></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>如果上述两种情况同时发生，例如文件<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT 
  class=FILENAME>/usr/bin/paste</TT>出了问题，在验证该文件的软件包时，发现不知道该软件包的名字，这时可以简单的键入:<BR></P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -Vf /usr/bin/paste</B><BR> </PRE></TD></TR></TABLE>
  <P>这样就能验证出该软件包了。</P></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>如果想了解一个正在使用的程序的详细信息, 可以键入如下命令，获取拥有该程序的软件包中的文档信息 (下例中是<SPAN 
  class=Apple-converted-space>&nbsp;</SPAN><TT 
  class=APPLICATION>ispell</TT>):</P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -qdf /usr/bin/md5sum</B><BR> </PRE></TD></TR></TABLE>
  <P>输出结果为:</P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=COMPUTEROUTPUT>/usr/share/doc/textutils-2.0a/NEWS<BR>/usr/share/doc/textutils-2.0a/README<BR>/usr/info/textutils.info.gz<BR>/usr/man/man1/cat.1.gz<BR>/usr/man/man1/cksum.1.gz<BR>/usr/man/man1/comm.1.gz<BR>/usr/man/man1/csplit.1.gz<BR>/usr/man/man1/cut.1.gz<BR>/usr/man/man1/expand.1.gz<BR>/usr/man/man1/fmt.1.gz<BR>/usr/man/man1/fold.1.gz<BR>/usr/man/man1/head.1.gz<BR>/usr/man/man1/join.1.gz<BR>/usr/man/man1/md5sum.1.gz<BR>/usr/man/man1/nl.1.gz<BR>/usr/man/man1/od.1.gz<BR>/usr/man/man1/paste.1.gz<BR>/usr/man/man1/pr.1.gz<BR>/usr/man/man1/ptx.1.gz<BR>/usr/man/man1/sort.1.gz<BR>/usr/man/man1/split.1.gz<BR>/usr/man/man1/sum.1.gz<BR>/usr/man/man1/tac.1.gz<BR>/usr/man/man1/tail.1.gz<BR>/usr/man/man1/tr.1.gz<BR>/usr/man/man1/tsort.1.gz<BR>/usr/man/man1/unexpand.1.gz<BR>/usr/man/man1/uniq.1.gz<BR>/usr/man/man1/wc.1.gz</TT><BR> </PRE></TD></TR></TABLE></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>如果发现了一个新<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT 
  class=APPLICATION>sndconfig</TT><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>RPM 包, 但又不清楚这个包有什么用。为了找出它的信息，输入:</P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -qip sndconfig-0.48-1.i386.rpm</B><BR> </PRE></TD></TR></TABLE>
  <P>输出结果是:<BR></P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=COMPUTEROUTPUT>Name : sndconfig Relocations: (not relocateable)<BR>Version : 0.48 Vendor: Red Hat<BR>Release : 1 Build Date: Mon 10 Jul 2000 02:25:40<BR>Install date: (none) Build Host: porky.devel.redhat.com<BR>Group : Applications/Multimedia Source RPM: sndconfig-0.48-1.src.rpm<BR>Size : 461734 License: GPL <BR>Packager : Red Hat &lt;http://bugzilla.redhat.com/bugzilla&gt;<BR>Summary : The Red Hat Linux sound configuration tool.<BR>Description :<BR>Sndconfig is a text based tool which sets up the configuration files<BR>you'll need to use a sound card with a Red Hat Linux system.<BR>Sndconfig can be used to set the proper sound type for programs which<BR>use the /dev/dsp, /dev/audio and /dev/mixer devices. The sound<BR>settings are saved by the aumix and sysV runlevel scripts.</TT><BR> </PRE></TD></TR></TABLE></LI>
  <LI style="LIST-STYLE-TYPE: disc; FONT-SIZE: 10pt; FONT-STYLE: normal">
  <P>现在想看看<SPAN class=Apple-converted-space>&nbsp;</SPAN><TT 
  class=APPLICATION>koules</TT><SPAN 
  class=Apple-converted-space>&nbsp;</SPAN>RPM 软件包都安装了那些文件，可以输入:</P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><B class=COMMAND>rpm -qlp sndconfig-0.48-1.i386.rpm</B><BR> </PRE></TD></TR></TABLE>
  <P>输出如下:<BR></P>
  <TABLE width="90%" bgColor=#e0e0e0 border=0>
    
    <TR>
      <TD style="FONT-SIZE: 10pt"><PRE class=SCREEN><TT class=COMPUTEROUTPUT>/usr/sbin/pnpprobe<BR>/usr/sbin/sndconfig<BR>/usr/share/locale/cs/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/da/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/de/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/es/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/fr/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/hu/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/id/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/is/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/it/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/ko/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/no/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/pt/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/pt_BR/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/ro/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/ru/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/sk/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/sl/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/sr/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/sv/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/tr/LC_MESSAGES/sndconfig.mo<BR>/usr/share/locale/uk/LC_MESSAGES/sndconfig.mo<BR>/usr/share/man/man8/pnpprobe.8.gz<BR>/usr/share/man/man8/sndconfig.8.gz<BR>/usr/share/sndconfig/sample.au<BR>/usr/share/sndconfig/sample.midi</TT><BR> </PRE></TD></TR></TABLE></LI></UL>
<P>这只不过是 RPM 使用过程中的几个例子。随着您进一步的使用系统，会发现 rpm 的更多用途。</P>
<P></P></DIV><BR></DIV><BR class=Apple-interchange-newline></body>
</html>
