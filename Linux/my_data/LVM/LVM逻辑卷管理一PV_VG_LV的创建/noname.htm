<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>LVM逻辑卷管理一PV/VG/LV的创建</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body><!--StartFragment--><div><span style="FONT-FAMILY: courier new">LVM———<span lang="EN-US">Logical Volume Manager(</span></span><span>逻辑卷管理器</span><span lang="EN-US">)</span><span>的简写。</span><span lang="EN-US">LVM</span><span>可以帮助我们为应用与用户方便地分配存储空间。在</span><span lang="EN-US">LVM</span><span>管理下的逻辑卷可以按需改变大小或添加移除。</span><span lang="EN-US">LVM</span><span>也允许按用户组对存储卷进行管理，允许管理员用更直观的名称</span><span lang="EN-US">(</span><span>如</span><span lang="EN-US">"sales',</span><span lang="EN-US">'development')</span><span>代替物理磁盘</span><span lang="EN-US">(</span><span>如</span><span lang="EN-US">'sda',</span><span lang="EN-US">'sdb')</span><span>来标识存储卷。</span><span> 
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"></div>
<table style="HEIGHT: 300px; WIDTH: 572px" width="572" border="1" cellpadding="1" cellspacing="1">
<tbody>
<tr>
<td>&nbsp;</td>
<td>
<div align="center"><span>传统分区概念</span><span lang="EN-US"></span></div></td>
<td>
<div align="center"><span lang="EN-US">LVM</span><span>逻辑卷管理</span></div></td></tr>
<tr>
<td><span>磁盘空间独立性</span><span lang="EN-US"></span> </td>
<td><span>不能充分利用，尤其是一个</span><span lang="EN-US">FS</span><span>只能对应一个分区</span><span lang="EN-US"></span> </td>
<td><span>多磁盘</span><span lang="EN-US">PV</span><span>组成存储池</span><span lang="EN-US">VG</span><span>，再根据应用细分逻辑卷</span><span lang="EN-US">LV</span><span>，空间利用率提高</span><span lang="EN-US"></span> </td></tr>
<tr>
<td><span>空间扩展性</span><span lang="EN-US"></span> </td>
<td><span>重新分区</span><span lang="EN-US"></span> </td>
<td><span>采取静态或动态在线扩展卷组容量</span><span lang="EN-US"></span> </td></tr>
<tr>
<td><span>数据备份</span><span lang="EN-US"></span> </td>
<td><span>业务繁忙时，</span><span lang="EN-US">I/O</span><span>接口读写频繁</span><span lang="EN-US"></span> </td>
<td><span>可采取快照方式捕捉某一逻辑卷的瞬间精确拷贝已完成在线备份工作</span><span lang="EN-US"></span> </td></tr>
<tr>
<td><span>用户使用性</span><span lang="EN-US"></span> </td>
<td><span>分区标识无法满足大量用户要求</span><span lang="EN-US"></span> </td>
<td><span>可根据用户需求定义</span><span lang="EN-US">lv</span><span>逻辑卷的卷标</span><span lang="EN-US"></span> </td></tr></tbody></table></span>
<div></div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">&nbsp;</div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">一、创建LVM的准备工作<br>&nbsp;&nbsp;&nbsp; 1.搭建环境：OS:RHEL5.3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LVM包<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IDE磁盘/dev/hdb(1024MB),/dev/hdd(1024MB)<br>&nbsp;&nbsp;&nbsp; 2.转换磁盘分区——&gt;lvm卷分区<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最终方案：/dev/hdb ——&gt; 创建&nbsp; /dev/hdb1(Id:5,System:Extended)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/hdb5(Id:8e,System:Linux LVM)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/hdd ——&gt; 创建&nbsp; /dev/hdd1(Id:5,System:Extended)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/hdd5(Id:8e,System:Linux LVM)<br>&nbsp;&nbsp;&nbsp; 操作：(仅以/dev/hdb为例)</div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"></div>
<table style="HEIGHT: 19px; WIDTH: 570px; BORDER-COLLAPSE: collapse" width="570" border="1" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td><code><span style="COLOR: #000000">
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><br>&nbsp;&nbsp;&nbsp; #fdisk /dev/hdb&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; #p(显示分区情况)——&gt;#n(新建分区)——&gt;#e(创建扩展分区)——&gt;#l(创建逻辑分区)<br>&nbsp;&nbsp;&nbsp; #此处为实验环境方便后面的增减操作，所以我们将/dev/hdb全部划分为一个分区<br>&nbsp;&nbsp;&nbsp; #t(设置磁盘Hex code)——&gt;#8e(LinuxLVM)——&gt;#w(保存操作)<br>&nbsp;&nbsp;&nbsp; #p</div>
<div style="MARGIN: 5px; LINE-HEIGHT: 150%">&nbsp;&nbsp;&nbsp; Disk /dev/hdb: 1073 MB, 1073741824 bytes<br>&nbsp;&nbsp;&nbsp; 16 heads, 63 sectors/track, 2080 cylinders<br>&nbsp;&nbsp;&nbsp; Units = cylinders of 1008 * 512 = 516096 bytes<br>&nbsp;&nbsp;&nbsp;&nbsp;Device Boot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Start&nbsp;&nbsp;&nbsp;&nbsp; End&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Blocks&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Id&nbsp;&nbsp;&nbsp;&nbsp; System<br>&nbsp;&nbsp;&nbsp; /dev/hdb1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2080&nbsp;&nbsp;&nbsp;&nbsp; 1048288+&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp; Extended<br>&nbsp;&nbsp;&nbsp; /dev/hdb5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2080&nbsp;&nbsp;&nbsp;&nbsp; 1048257&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;8e&nbsp;&nbsp;&nbsp; Linux LVM<br>&nbsp;&nbsp;&nbsp;<strong> #partprobe (此命令让kernel会重新读取磁盘分区表，修改生效)</strong></div></span></code></td></tr></tbody></table>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">&nbsp;&nbsp;&nbsp; </div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"><span style="FONT-SIZE: x-small"><font size="2"><span style="FONT-SIZE: small">二、创建LVM</span><br></font><font size="1">&nbsp;&nbsp;&nbsp; 1.创建PV盘<br>&nbsp;&nbsp;&nbsp; 方案：&nbsp;&nbsp; /dev/hdb ——&gt; lvm2[1024MB]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/hdd ——&gt; lvm2[1024MB]</font></span></div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">&nbsp;&nbsp;&nbsp; <strong>操作:</strong></div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"></div>
<table style="HEIGHT: 19px; WIDTH: 570px; BORDER-COLLAPSE: collapse" width="570" border="1" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td>
<div>&nbsp;&nbsp;&nbsp; #pvcreate /dev/hdb5 /dev/hdd5<br>&nbsp;&nbsp;&nbsp; #pvscan<br>&nbsp;&nbsp;&nbsp; #pvdisplay</div>
<div>&nbsp; "/dev/hdb5" is a new physical volume of "1023.69 MB"<br>&nbsp; --- NEW Physical volume ---<br>&nbsp; PV Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/hdb5<br>&nbsp; VG Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; PV Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1023.69 MB<br>&nbsp; Allocatable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NO<br>&nbsp; PE Size (KByte)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Total PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Free PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Allocated PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; PV UUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; zM7103-SJg4-ZjOb-BeL0-dlR1-HHh6-HCG8kG</div>
<div>&nbsp; "/dev/hdd5" is a new physical volume of "1023.69 MB"<br>&nbsp; --- NEW Physical volume ---<br>&nbsp; PV Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/hdd5<br>&nbsp; VG Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; PV Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1023.69 MB<br>&nbsp; Allocatable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NO<br>&nbsp; PE Size (KByte)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Total PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Free PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Allocated PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; PV UUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hAk1Dx-QulA-YV4G-p8wa-7sWw-FiaC-10GorS</div></td></tr></tbody></table>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">&nbsp;&nbsp; </div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">2.创建VG存储池<br>&nbsp;&nbsp;&nbsp; 方案：&nbsp;&nbsp; lvm2(/dev/hdb)——&gt; vg1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lvm2(/dev/hdd)——&gt; vg2<br>&nbsp;&nbsp;&nbsp;<strong> 操作：</strong></div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"></div>
<table style="BORDER-COLLAPSE: collapse" width="95%" border="1" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td>
<div><span>&nbsp;&nbsp;&nbsp; #vgcreate vg1 /dev/hdb5<br>&nbsp;&nbsp;&nbsp; #vgcreate vg2 /dev/hdd5<br>&nbsp;&nbsp;&nbsp; #vgscan<br>&nbsp;&nbsp;&nbsp; #vgdisplay</span></div>
<div><span>&nbsp;&nbsp;&nbsp; --- Volume group ---<br>&nbsp; VG Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vg2<br>&nbsp; System ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; Format&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lvm2<br>&nbsp; Metadata Areas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br>&nbsp; Metadata Sequence No&nbsp; 1<br>&nbsp; VG Access&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read/write<br>&nbsp; VG Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resizable<br>&nbsp; MAX LV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Cur LV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Open LV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Max PV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Cur PV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br>&nbsp; Act PV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br><strong>&nbsp; VG Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1020.00 MB<br>&nbsp; PE Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.00 MB<br>&nbsp; Total PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255</strong><br>&nbsp; Alloc PE / Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 / 0&nbsp;&nbsp; <br>&nbsp; Free&nbsp; PE / Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 255 / 1020.00 MB<br>&nbsp; VG UUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Wa4Jo8-k3xY-BTng-uV6j-0Ee1-Vp8b-fNVrhQ</span></div>
<div><span>&nbsp; --- Volume group ---<br>&nbsp; VG Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vg1<br>&nbsp; System ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; Format&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lvm2<br>&nbsp; Metadata Areas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br>&nbsp; Metadata Sequence No&nbsp; 1<br>&nbsp; VG Access&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read/write<br>&nbsp; VG Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resizable<br>&nbsp; MAX LV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Cur LV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Open LV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Max PV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br>&nbsp; Cur PV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br>&nbsp; Act PV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br><strong>&nbsp; VG Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1020.00 MB<br>&nbsp; PE Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.00 MB<br>&nbsp; Total PE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255</strong><br>&nbsp; Alloc PE / Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 / 0&nbsp;&nbsp; <br>&nbsp; Free&nbsp; PE / Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 255 / 1020.00 MB<br>&nbsp; VG UUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UGjfZd-shth-ZRTU-sVVm-MD0s-wzVB-zd7Uwt</span></div>
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><code><span style="COLOR: #000000"></span></code></div></td></tr></tbody></table>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">&nbsp;</div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">3.分配LV逻辑卷<br>&nbsp;&nbsp;&nbsp; 方案：&nbsp;&nbsp; work(/dev/hdb5)——&gt; vg1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Study(/dev/hdd5)——&gt; vg2<br>&nbsp;&nbsp;&nbsp;<strong> 操作：</strong></div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"></div>
<table style="BORDER-COLLAPSE: collapse" width="95%" border="1" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td><span>&nbsp;&nbsp;&nbsp; #lvcreate –L 500M –n work vg1<br>&nbsp;&nbsp;&nbsp; #lvcreate –L 500M –n study vg2<br>&nbsp;&nbsp;&nbsp; #lvscan<br>&nbsp;&nbsp;&nbsp; #lvdisplay</span> 
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><code><span style="COLOR: #000000"></span></code>&nbsp;</div>
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><code><span style="COLOR: #000000"><span><font face="新宋体">--- Logical volume ---<br>&nbsp; LV Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/vg2/study<br>&nbsp; VG Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vg2<br>&nbsp; LV UUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 53VT9v-dyp0-lSST-eDFz-w2Ns-Os0Z-ERnqVU<br>&nbsp; LV Write Access&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read/write<br>&nbsp; LV Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; available<br>&nbsp; # open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br></font><font face="新宋体"><strong>&nbsp; LV Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;500.00 MB<br>&nbsp; Current LE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;125</strong><br>&nbsp; Segments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br>&nbsp; Allocation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inherit<br>&nbsp; Read ahead sectors&nbsp;&nbsp;&nbsp;&nbsp; auto<br>&nbsp; - currently set to&nbsp;&nbsp;&nbsp;&nbsp; 256<br>&nbsp; Block device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 253:1</font></span></span></code></div>
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><code><span style="COLOR: #000000"><span><font face="新宋体">&nbsp; --- Logical volume ---<br>&nbsp; LV Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /dev/vg1/work<br>&nbsp; VG Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vg1<br>&nbsp; LV UUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lhgKVg-hi95-W9gw-wOkZ-uyuy-BgZp-RrsCcA<br>&nbsp; LV Write Access&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read/write<br>&nbsp; LV Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; available<br>&nbsp; # open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0<br></font><font face="新宋体"><strong>&nbsp; LV Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;500.00 MB<br>&nbsp; Current LE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;125</strong><br>&nbsp; Segments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br>&nbsp; Allocation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inherit<br>&nbsp; Read ahead sectors&nbsp;&nbsp;&nbsp;&nbsp; auto<br>&nbsp; - currently set to&nbsp;&nbsp;&nbsp;&nbsp; 256<br>&nbsp; Block device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 253:0</font></span></span></code></div></td></tr></tbody></table>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"><font face="新宋体"></font>&nbsp;</div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">4.分区格式化</div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt"></div>
<table style="BORDER-COLLAPSE: collapse" width="95%" border="1" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td>
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><code><span style="COLOR: #000000"><span style="FONT-FAMILY: nsimsun">&nbsp;&nbsp;&nbsp; #mkfs<span style="COLOR: #0000cc">.</span>ext3 /dev/vg1/work&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //或 #mkfs -j /dev/vg1/work<br>&nbsp;&nbsp;&nbsp;&nbsp;#mkfs<span style="COLOR: #0000cc">.</span>ext3 /dev/vg2/study&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//...<br>&nbsp;&nbsp;&nbsp;&nbsp;#<span style="COLOR: #ff0000">df</span> –l<br><br>Disk /dev/hda<span style="COLOR: #0000cc">:</span> 8589 MB<span style="COLOR: #0000cc">,</span> 8589934592 bytes<br>255 heads<span style="COLOR: #0000cc">,</span> 63 sectors/track<span style="COLOR: #0000cc">,</span> 1044 cylinders<br>Units <span style="COLOR: #0000cc">=</span> cylinders <span style="COLOR: #ff0000">of</span> 16065 <span style="COLOR: #0000cc">*</span> 512 <span style="COLOR: #0000cc">=</span> 8225280 bytes<br>&nbsp;<br>&nbsp;&nbsp;Device Boot Start End&nbsp; Blocks&nbsp;&nbsp; Id System<br>/dev/hda1 <span style="COLOR: #0000cc"><strong>*</strong></span>&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 32&nbsp;&nbsp; 257008<span style="COLOR: #0000cc">+</span>&nbsp; 83&nbsp; Linux<br>/dev/hda2&nbsp;&nbsp;&nbsp;&nbsp; 33&nbsp;&nbsp; &nbsp;97&nbsp;&nbsp; 522112<span style="COLOR: #0000cc">+</span>&nbsp; 83&nbsp; Linux<br>/dev/hda3&nbsp;&nbsp;&nbsp;&nbsp; 98&nbsp;&nbsp;&nbsp; 358&nbsp; 2096482<span style="COLOR: #0000cc">+</span> 83&nbsp; Linux<br>/dev/hda4&nbsp;&nbsp;&nbsp;&nbsp; 359&nbsp;&nbsp;&nbsp;1044 5510295&nbsp; 5&nbsp; Extended<br>/dev/hda5&nbsp;&nbsp;&nbsp;&nbsp; 359&nbsp;&nbsp; 549&nbsp; 1534176&nbsp; 83&nbsp; Linux<br>/dev/hda6&nbsp;&nbsp;&nbsp;&nbsp; 550&nbsp;&nbsp; 848&nbsp; 2401686&nbsp; 83&nbsp; Linux<br>/dev/hda7&nbsp;&nbsp;&nbsp;&nbsp; 849&nbsp;&nbsp; 913&nbsp; 522081&nbsp;&nbsp; 82&nbsp; Linux swap / Solaris<br>/dev/hda8&nbsp;&nbsp;&nbsp;&nbsp; 914&nbsp;&nbsp; 978&nbsp; 522081&nbsp;&nbsp; 83&nbsp; Linux<br>/dev/hda9&nbsp;&nbsp;&nbsp;&nbsp; 979&nbsp;&nbsp; 1043 522081&nbsp;&nbsp; 83&nbsp; Linux<br><br>Disk /dev/hdb<span style="COLOR: #0000cc">:</span> 1073 MB<span style="COLOR: #0000cc">,</span> 1073741824 bytes<br>16 heads<span style="COLOR: #0000cc">,</span> 63 sectors/track<span style="COLOR: #0000cc">,</span> 2080 cylinders<br>Units <span style="COLOR: #0000cc">=</span> cylinders <span style="COLOR: #ff0000">of</span> 1008 <span style="COLOR: #0000cc">*</span> 512 <span style="COLOR: #0000cc">=</span> 516096 bytes<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;Device Boot Start End&nbsp;&nbsp; Blocks Id System<br>/dev/hdb1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 2080 1048288<span style="COLOR: #0000cc">+</span> 5 Extended<br><strong>/dev/hdb5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp; 2080 1048257 8e Linux LVM</strong><br><br>Disk /dev/hdd<span style="COLOR: #0000cc">:</span> 1073 MB<span style="COLOR: #0000cc">,</span> 1073741824 bytes<br>16 heads<span style="COLOR: #0000cc">,</span> 63 sectors/track<span style="COLOR: #0000cc">,</span> 2080 cylinders<br>Units <span style="COLOR: #0000cc">=</span> cylinders <span style="COLOR: #ff0000">of</span> 1008 <span style="COLOR: #0000cc">*</span> 512 <span style="COLOR: #0000cc">=</span> 516096 bytes<br><br>Device&nbsp;&nbsp; Boot Start End&nbsp;&nbsp; Blocks &nbsp;Id&nbsp; System<br>/dev/hdd1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;1&nbsp;&nbsp; 2080 1048288<span style="COLOR: #0000cc">+</span>&nbsp; 5&nbsp; &nbsp;Extended<br><strong>/dev/hdd5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp; 2080 1048257&nbsp;&nbsp; 8e&nbsp; Linux LVM</strong></span></span></code></div></td></tr></tbody></table>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">&nbsp;&nbsp;&nbsp; </div>
<div class="MsoNormal" style="MARGIN: 0cm 0cm 0pt">5.挂载新分区</div><br>
<table style="BORDER-COLLAPSE: collapse" width="95%" border="1" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td>
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><code><span style="COLOR: #000000"><font face="新宋体">&nbsp;#mkdir <span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">/</span>home/work <span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">/</span>home/study<br>&nbsp;#mount <span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">/</span>dev/vg1/work <span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">/</span>home/work<br>&nbsp;#mount <span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">/</span>dev/vg2/study <span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">.</span><span style="COLOR: #0000cc">/</span>home/study<br>&nbsp;#<span style="COLOR: #ff0000">df</span> –Th<br><br>Filesystem &nbsp;<span style="COLOR: #0000ff">Type</span>&nbsp; <span style="COLOR: #0000ff">Size</span> Used Avail Use% Mounted on<br>/dev/hda2&nbsp;&nbsp; ext3 494M 212M 257M&nbsp; 46%&nbsp;&nbsp; /<br>/dev/hda9&nbsp;&nbsp; ext3 494M 45M 425M&nbsp;&nbsp; 10%&nbsp;&nbsp; /var<br>/dev/hda8&nbsp;&nbsp; ext3 494M 11M 458M&nbsp;&nbsp; 3%&nbsp;&nbsp;&nbsp; /opt<br>/dev/hda6&nbsp;&nbsp; ext3 2<span style="COLOR: #0000cc">.</span>3G 68M 2<span style="COLOR: #0000cc">.</span>1G&nbsp;&nbsp; 4%&nbsp;&nbsp;&nbsp; /home<br>/dev/hda3&nbsp;&nbsp; ext3 2<span style="COLOR: #0000cc">.</span>0G 1<span style="COLOR: #0000cc">.</span>7G 182M&nbsp; 91%&nbsp;&nbsp; /usr<br>/dev/hda5&nbsp; &nbsp;ext3 1<span style="COLOR: #0000cc">.</span>5G 35M 1<span style="COLOR: #0000cc">.</span>4G&nbsp;&nbsp; 3%&nbsp;&nbsp;&nbsp; /usr/<span style="COLOR: #0000ff">local</span><br>/dev/hda1&nbsp;&nbsp; ext3 244M 12M 219M&nbsp;&nbsp; 6%&nbsp;&nbsp;&nbsp; /boot<br>tmpfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpfs 125M 0&nbsp;&nbsp;125M&nbsp;&nbsp; 0%&nbsp;&nbsp;&nbsp; /dev/shm</font></span></code></div>
<div style="MARGIN: 5px; LINE-HEIGHT: 150%"><code><span style="COLOR: #000000"><br><strong><font face="新宋体">/dev/mapper/vg1<span style="COLOR: #0000cc">-</span>work<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext3&nbsp; 485M 11M 449M &nbsp;3%&nbsp;&nbsp;&nbsp; /home/work<br>/dev/mapper/vg2<span style="COLOR: #0000cc">-</span>study<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext3&nbsp; 485M 11M 449M&nbsp; 3%&nbsp;&nbsp;&nbsp; /home/study</font></strong></span></code></div></td></tr></tbody></table>
    		</div>
    		<div class="showBottom">
            
              <table width="720" border="0" cellpadding="0" cellspacing="0">
  <tbody><tr>
    <td align="right"><IMG src="icon01.png" width=15 height=16></td></tr></tbody></table></div>
<P><!--EndFragment--></P>
<P>&nbsp;</P>
</body>
</htm</html>