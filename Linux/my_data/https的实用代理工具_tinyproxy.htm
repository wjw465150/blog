<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>https的实用代理工具:tinyproxy</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: 宋体, Arial, Helvetica, sans-serif;
	font-size: 10pt;
}
</style>

</head>

<body>
<H2 
style="FONT-FAMILY: tahoma, 宋体; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT-STYLE: normal; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">六、DIY配置</SPAN></H2>
<H3 
style="FONT-FAMILY: tahoma, 宋体; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT-STYLE: normal; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A 
name=t6></A><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">4.1 
默认配置文件位置</SPAN></H3>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 14px/22px tahoma, 宋体; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">/etc/tinyproxy.conf</SPAN></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 14px/22px tahoma, 宋体; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">(可以从/etc/init.d/tinyproxy包装器脚本中查到)</SPAN></SPAN>&nbsp;</P>
<H3 
style="FONT-FAMILY: tahoma, 宋体; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT-STYLE: normal; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A 
name=t7></A><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">4.2 
默认配置说明</SPAN></H3>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 14px/22px tahoma, 宋体; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">* 
以根用户启动时，在初始化完成后切换uid/gid为nobody/nogroup</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">* 
Port 默认监听端口为8888(该端口无需用root权限绑定)</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">* 
默认在所在网卡上监听</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">* 
Logfile (必须)日志文件, 
默认/usr/var/log/tinyproxy/tinyproxy.log，在LogFile文件不存在时会警告，不会运行失败。</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">* 
Pidfile (必须)pid文件, 
默认/usr/var/run/tinyproxy/tinyproxy.pid，在PidFile文件不存在时会运行失败。</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">* 
StartServers 初始</SPAN><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">启动的代理服务器子进程(默认是10个)</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">*** 
Allow 
允许使用tinyproxy进行HTTP代理的IP地址。默认是127.0.0.1，如果想要公开tinyproxy代理服务器，则把Allow一行注释掉。</SPAN></P>
<H3 
style="FONT-FAMILY: tahoma, 宋体; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT-STYLE: normal; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><A 
name=t8></A><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">4.3 
Diy配置说明</SPAN></H3>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 14px/22px tahoma, 宋体; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">tinyproxy可以以普通用户权限运行，只要监听端口是公开的就可以了。具体Diy配置方法如下:</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">-- 
打包可执行程序与默认配置文件 --</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">1. 
$which tinyproxy</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">/usr/sbin/tinyproxy</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">2. 
$cp /usr/sbin/tinyproxy ~/bin</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">3. 
$cp /etc/tinyproxy.conf ~/etc</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">-- 
修改配置 --</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">1. 
将Port默认的8888改成你想要的端口(如ljysrv上面的8990 TCP端口)</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">2. 
将Allow 127.0.0.1注释掉</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">3. 
将Logfile改为/tmp/tinyproxy.log</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">4. 
将PidFile改为/tmp/tinyproxy.pid</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">-- 
启动 --</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">1. 
$cd ~/bin</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">2. 
$./tinyproxy -c ~/etc/tinyproxy.conf</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">-- 
关闭 --</SPAN><BR 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px">1. 
$killall tinyproxy</SPAN></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(51,51,51); FONT: 14px/22px tahoma, 宋体; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(239,239,239); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px"><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, 'sans serif', tahoma, verdana, helvetica; LINE-HEIGHT: 24px"> 
 </SPAN>&nbsp;</P></body>
</html>