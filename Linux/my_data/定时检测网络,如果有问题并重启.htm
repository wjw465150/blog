<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><head>
<title>定时检测网络,如果有问题并重启</title>
<META content="text/html; charset=UTF-8" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 10.00.9200.16521"></HEAD>
<BODY>
<P>#!/bin/bash</P>
<P>#######################################################################################<BR>#1) 
copy/paste the following lines into a new file named 
/bin/check_network.sh<BR>#&nbsp;Change the ROUTER_IP variable to the IP address 
that can verify that your network is 
up.<BR>#######################################################################################</P>
<P><BR>ROUTER_IP=192.168.0.1<BR>( ! ping -c1 $ROUTER_IP &gt;/dev/null 
2&gt;&amp;1 ) &amp;&amp; service network restart &gt;/dev/null 2&gt;&amp;1</P>
<P>#######################################################################################<BR>#2) 
Set the execute permissions on the script. As root, type:<BR>#&nbsp;&nbsp; chmod 
+x 
/bin/check_network.sh<BR>#######################################################################################</P>
<P>#######################################################################################<BR>#3) 
Add the following line to /etc/crontab.<BR># */2 * * * * root 
/bin/check_network.sh<BR>#&nbsp;Change the */2 to whatever increment you want to 
have this script run in minutes.<BR>#&nbsp;It's currently set to run 
/bin/check_netowork every two 
minutes.<BR>#######################################################################################</P>
<P>#######################################################################################<BR># 
4) Restart crond serice.<BR># service crond 
restart<BR>####################################################################################### 
</P>
<P>&nbsp; 
</P></BODY></HTML>