<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>CentOS/Redhat 网卡绑定和桥接</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: 宋体, Arial, Helvetica, sans-serif;
	font-size: 10pt;
}
</style>

</head>

<body>
<H3 id=L......bonding......:..code.modprobe.bonding..code. 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">加载bonding模块:<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style="BORDER-TOP: rgb(234,234,234) 1px solid; BORDER-RIGHT: rgb(234,234,234) 1px solid; WHITE-SPACE: nowrap; BORDER-BOTTOM: rgb(234,234,234) 1px solid; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; MARGIN: 0px 2px; BORDER-LEFT: rgb(234,234,234) 1px solid; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(248,248,248); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px">modprobe 
bonding</CODE></H3>
<H3 id=L..............................:..code.lsmod...grep.bonding..code. 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">确认模块是否加载成功:<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><CODE 
style="BORDER-TOP: rgb(234,234,234) 1px solid; BORDER-RIGHT: rgb(234,234,234) 1px solid; WHITE-SPACE: nowrap; BORDER-BOTTOM: rgb(234,234,234) 1px solid; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; MARGIN: 0px 2px; BORDER-LEFT: rgb(234,234,234) 1px solid; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(248,248,248); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px">lsmod 
| grep bonding</CODE></H3>
<H3 id=L......NeetworkManager 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">停止NeetworkManager</H3>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 14px/22px Helvetica, arial, sans-serif; MARGIN: 15px 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact"><CODE 
style="BORDER-TOP: rgb(234,234,234) 1px solid; BORDER-RIGHT: rgb(234,234,234) 1px solid; WHITE-SPACE: nowrap; BORDER-BOTTOM: rgb(234,234,234) 1px solid; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; MARGIN: 0px 2px; BORDER-LEFT: rgb(234,234,234) 1px solid; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(248,248,248); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px">service 
NetworkManager stop</CODE></P>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 14px/22px Helvetica, arial, sans-serif; MARGIN: 15px 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact"><CODE 
style="BORDER-TOP: rgb(234,234,234) 1px solid; BORDER-RIGHT: rgb(234,234,234) 1px solid; WHITE-SPACE: nowrap; BORDER-BOTTOM: rgb(234,234,234) 1px solid; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; MARGIN: 0px 2px; BORDER-LEFT: rgb(234,234,234) 1px solid; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(248,248,248); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px">chkconfig 
NetworkManager off</CODE></P>
<H3 
id=L....etc.sysconfig.network-scripts................ifcfg-bond0.............................. 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">在/etc/sysconfig/network-scripts/目录下建立ifcfg-bond0文件，文件内容如下：</H3><PRE style="OVERFLOW: auto; FONT-SIZE: 13px; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 6px; FONT-STYLE: normal; PADDING-TOP: 6px; PADDING-LEFT: 10px; MARGIN: 15px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; LETTER-SPACING: normal; LINE-HEIGHT: 19px; PADDING-RIGHT: 10px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><CODE class=ini style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; WHITE-SPACE: pre; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(248,248,255); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><SPAN class=setting style="-webkit-print-color-adjust: exact">DEVICE=<SPAN class=value style="-webkit-print-color-adjust: exact">bond0</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">BOOTPROTO=<SPAN class=value style="-webkit-print-color-adjust: exact">static</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">ONBOOT=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">yes</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">BONDING_OPTS=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=string style="COLOR: rgb(221,17,68); -webkit-print-color-adjust: exact">"mode=0 miimon=100"</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">IPADDR=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">192.168</SPAN>.<SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">100.17</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">NETMASK=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">255.255</SPAN>.<SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">255.0</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">GATEWAY=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">192.168</SPAN>.<SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">100.1</SPAN></SPAN></SPAN>
</CODE></PRE>
<H3 id=L..................ifcfg-eth0.................. 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">然后分别修改ifcfg-eth0文件，如下：</H3><PRE style="OVERFLOW: auto; FONT-SIZE: 13px; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 6px; FONT-STYLE: normal; PADDING-TOP: 6px; PADDING-LEFT: 10px; MARGIN: 15px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; LETTER-SPACING: normal; LINE-HEIGHT: 19px; PADDING-RIGHT: 10px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><CODE class=ini style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; WHITE-SPACE: pre; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(248,248,255); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><SPAN class=setting style="-webkit-print-color-adjust: exact">DEVICE=<SPAN class=value style="-webkit-print-color-adjust: exact">eth0</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">BOOTPROTO=<SPAN class=value style="-webkit-print-color-adjust: exact">none</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">ONBOOT=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">yes</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">USERCTL=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">no</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">MASTER=<SPAN class=value style="-webkit-print-color-adjust: exact">bond0</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">SLAVE=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">yes</SPAN></SPAN></SPAN>
</CODE></PRE>
<H3 id=L......ifcfg-eth1..................... 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">在把ifcfg-eth1文件修改如下：</H3><PRE style="OVERFLOW: auto; FONT-SIZE: 13px; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 6px; FONT-STYLE: normal; PADDING-TOP: 6px; PADDING-LEFT: 10px; MARGIN: 15px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; LETTER-SPACING: normal; LINE-HEIGHT: 19px; PADDING-RIGHT: 10px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><CODE class=ini style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; WHITE-SPACE: pre; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(248,248,255); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><SPAN class=setting style="-webkit-print-color-adjust: exact">DEVICE=<SPAN class=value style="-webkit-print-color-adjust: exact">eth1</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">BOOTPROTO=<SPAN class=value style="-webkit-print-color-adjust: exact">none</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">ONBOOT=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">yes</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">USERCTL=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">no</SPAN></SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">MASTER=<SPAN class=value style="-webkit-print-color-adjust: exact">bond0</SPAN></SPAN>
<SPAN class=setting style="-webkit-print-color-adjust: exact">SLAVE=<SPAN class=value style="-webkit-print-color-adjust: exact"><SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">yes</SPAN></SPAN></SPAN>
</CODE></PRE>
<H3 
id=L....etc.modprobe.d................modprobe.conf........code.vi..etc.modprobe.d.modprobe.conf..code.......................... 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">在/etc/modprobe.d/目录下建立modprobe.conf文件(<CODE 
style="BORDER-TOP: rgb(234,234,234) 1px solid; BORDER-RIGHT: rgb(234,234,234) 1px solid; WHITE-SPACE: nowrap; BORDER-BOTTOM: rgb(234,234,234) 1px solid; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; MARGIN: 0px 2px; BORDER-LEFT: rgb(234,234,234) 1px solid; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(248,248,248); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px">vi 
/etc/modprobe.d/modprobe.conf</CODE>)，文件内容如下：</H3><PRE style="OVERFLOW: auto; FONT-SIZE: 13px; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 6px; FONT-STYLE: normal; PADDING-TOP: 6px; PADDING-LEFT: 10px; MARGIN: 15px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; LETTER-SPACING: normal; LINE-HEIGHT: 19px; PADDING-RIGHT: 10px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><CODE class=nginx style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; WHITE-SPACE: pre; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(248,248,255); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><SPAN class=title style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">alias</SPAN> netdev-bond0 bonding
</CODE></PRE>
<H3 id=L........etc.sysctl.conf 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">编辑 
/etc/sysctl.conf</H3><PRE style="OVERFLOW: auto; FONT-SIZE: 13px; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; FONT-VARIANT: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 6px; FONT-STYLE: normal; PADDING-TOP: 6px; PADDING-LEFT: 10px; MARGIN: 15px 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; LETTER-SPACING: normal; LINE-HEIGHT: 19px; PADDING-RIGHT: 10px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"><CODE class=avrasm style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; WHITE-SPACE: pre; BORDER-BOTTOM: medium none; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0.5em; PADDING-TOP: 0.5em; PADDING-LEFT: 0.5em; MARGIN: 0px; BORDER-LEFT: medium none; DISPLAY: block; PADDING-RIGHT: 0.5em; BACKGROUND-COLOR: rgb(248,248,255); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px"> net<SPAN class=preprocessor style="FONT-WEIGHT: bold; COLOR: rgb(153,153,153); -webkit-print-color-adjust: exact">.bridge</SPAN><SPAN class=preprocessor style="FONT-WEIGHT: bold; COLOR: rgb(153,153,153); -webkit-print-color-adjust: exact">.bridge</SPAN>-nf-<SPAN class=keyword style="FONT-WEIGHT: bold; COLOR: rgb(51,51,51); -webkit-print-color-adjust: exact">call</SPAN>-iptables=<SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">1</SPAN>  
 net<SPAN class=preprocessor style="FONT-WEIGHT: bold; COLOR: rgb(153,153,153); -webkit-print-color-adjust: exact">.ipv</SPAN>4<SPAN class=preprocessor style="FONT-WEIGHT: bold; COLOR: rgb(153,153,153); -webkit-print-color-adjust: exact">.ip</SPAN>_forward=<SPAN class=number style="COLOR: rgb(0,153,153); -webkit-print-color-adjust: exact">1</SPAN>
</CODE></PRE>
<H3 id=L...bond0..................br0 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">将bond0桥接到桥接器br0</H3>
<BLOCKQUOTE 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(119,119,119); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/22px Helvetica, arial, sans-serif; PADDING-LEFT: 15px; MARGIN: 15px 0px; BORDER-LEFT: rgb(221,221,221) 4px solid; LETTER-SPACING: normal; PADDING-RIGHT: 15px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact">
  <P style="MARGIN: 0px; -webkit-print-color-adjust: exact">brctl addbr br0 
  #创建一个桥接口<BR style="-webkit-print-color-adjust: exact">brctl addif br0 bond0 
  #重要,add interface to bridge<BR style="-webkit-print-color-adjust: exact">brctl 
  show</P></BLOCKQUOTE>
<H3 id=L..................:.service.network.restart 
style="CURSOR: text; FONT-SIZE: 18px; FONT-FAMILY: Helvetica, arial, sans-serif; FONT-VARIANT: normal; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 20px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-font-smoothing: antialiased; -webkit-print-color-adjust: exact">然后重启网络: 
service network restart</H3>
<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 14px/22px Helvetica, arial, sans-serif; MARGIN: 15px 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact">之后就可以用ifconfig 
-a看到绑定好的bond0网卡，bond0与eth0，eth1的mac地址均为一样。 可以同过cat /proc/net/bonding/bond0 
此命令查看绑定情况</P>
<HR 
style="BORDER-TOP: 0px; HEIGHT: 4px; BORDER-RIGHT: 0px; BACKGROUND-IMAGE: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; BACKGROUND-POSITION: 0px 0px; COLOR: rgb(204,204,204); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/22px Helvetica, arial, sans-serif; PADDING-LEFT: 0px; BORDER-LEFT: 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact">

<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 14px/22px Helvetica, arial, sans-serif; MARGIN: 15px 0px 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact">说明： 
miimon是用来进行链路监测的。 
比如：miimon=100，单位是ms(毫秒)这边的100，是100ms，即是0.1秒那么系统每100ms监测一次链路连接状态，如果有一条线路不通就转入另一条线路；<BR 
style="-webkit-print-color-adjust: exact">mode的值表示工作模式，他共有0，1,2,3四种模式，常用的为0、1两种。<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><BR 
style="-webkit-print-color-adjust: exact">mode共有七种(0~6)，这里解释两个常用的选项。<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><BR 
style="-webkit-print-color-adjust: exact"><CODE 
style="BORDER-TOP: rgb(234,234,234) 1px solid; BORDER-RIGHT: rgb(234,234,234) 1px solid; WHITE-SPACE: nowrap; BORDER-BOTTOM: rgb(234,234,234) 1px solid; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; MARGIN: 0px 2px; BORDER-LEFT: rgb(234,234,234) 1px solid; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(248,248,248); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px">mode=0</CODE>：表示load 
balancing (round-robin)为负载均衡方式，两块网卡都在工作。<SPAN 
class=Apple-converted-space>&nbsp;</SPAN><BR 
style="-webkit-print-color-adjust: exact"><CODE 
style="BORDER-TOP: rgb(234,234,234) 1px solid; BORDER-RIGHT: rgb(234,234,234) 1px solid; WHITE-SPACE: nowrap; BORDER-BOTTOM: rgb(234,234,234) 1px solid; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; MARGIN: 0px 2px; BORDER-LEFT: rgb(234,234,234) 1px solid; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(248,248,248); -webkit-print-color-adjust: exact; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px">mode=1</CODE>：表示fault-tolerance 
(active-backup)提供冗余功能，工作方式是主备的工作方式，其中一块网卡在工作（若eth0断掉），则自动切换到另一个块网卡（eth1做备份）。 
bonding只能提供链路监测，即从主机到交换机的链路是否接通。如果只是交换机对外的链路down掉了，而交换机本身并没有故障，那么bonding会认为链路没有问题而继续使用。</P>

<P 
style="WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; COLOR: rgb(0,0,0); FONT: 14px/22px Helvetica, arial, sans-serif; MARGIN: 15px 0px 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; -webkit-print-color-adjust: exact"> 
 
&nbsp;</P></body></HTML>