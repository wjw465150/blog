<!-- saved from url=http://linux.chinaitlab.com/manual/rhl-cg/s1-openssh-client-config.html -->
<script>
window.onerror = new Function("return(false);")
</script><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>SSH为版本2生成RSA钥匙对</title><LINK title="Red Hat Linux 9" 
href="index.html" rel=HOME><LINK title=OpenSSH href="ch-openssh.html" 
rel=UP><LINK title="配置 OpenSSH 服务器" href="s1-openssh-server-config.html" 
rel=PREVIOUS><LINK title=其它资料 href="s1-openssh-additional-resources.html" 
rel=NEXT><LINK href="rhdocs-man.css" type=text/css rel=STYLESHEET></HEAD>

<BODY class=SECT1 text=#000000 vLink=#840084 aLink=#0000ff link=#0000ff 
bgColor=#ffffff scroll=yes>

<DIV class=SECT1>

<DIV class=SECT2><!--StartFragment--><H2 class=SECT2><A name=S2-OPENSSH-GENERATE-KEYPAIRS></A>15.3.4. 生成钥匙对</H2>
<P>如果你不想每次使用 <TT class=COMMAND>ssh</TT>、<TT class=COMMAND>scp</TT> 或 <TT 
class=COMMAND>sftp</TT> 时都要输入口令来连接远程机器，你可以生成一对授权钥匙。 </P>
<P>钥匙必须为每个用户生成。要为某用户生成钥匙，用想连接到远程机器的用户身份来遵循下面的步骤。如果你用根用户的身份完成了下列步骤，就只有根用户才能使用这对钥匙。 
</P>
<P>从 OpenSSH 版本 3.0 开始，<TT class=FILENAME>~/.ssh/authorized_keys2</TT>、<TT 
class=FILENAME>~/.ssh/known_hosts2</TT> 和 <TT 
class=FILENAME>/etc/ssh_known_hosts2</TT> 就会过时。SSH 协议 1 和 2 共享 <TT 
class=FILENAME>~/.ssh/authorized_keys</TT>、<TT 
class=FILENAME>~/.ssh/known_hosts</TT> 和 <TT 
class=FILENAME>/etc/ssh/ssh_known_hosts</TT> 文件。 </P>
<P>Red Hat Linux 9 默认使用 SSH 协议 2 和 RSA 钥匙。 </P>
<DIV class=TIP>
<P></P>
<TABLE class=TIP width="100%" border=0>
<TBODY>
<TR>
<TD vAlign=top align=center width=25><IMG hspace=5 alt=窍门 
src="tip.png"></TD>
<TH vAlign=middle align=left><B>窍门</B></TH></TR>
<TR>
<TD>&nbsp;</TD>
<TD vAlign=top align=left>
<P>如果你重装了 Red Hat Linux，但是想保留现有的钥匙对，备份你的主目录中的 <TT class=FILENAME>.ssh</TT> 
目录。重装后，把该目录复制回主目录。该进程可为系统上的所有用户进行，包括根用户。 </P></TD></TR></TBODY></TABLE></DIV>
<DIV class=SECT3>
<H3 class=SECT3><A name=S3-OPENSSH-RSA-KEYS-V2></A>15.3.4.1. 为版本 2 生成 RSA 
钥匙对</H3>
<P>使用下列步骤来为 SSH 协议的版本 2 生成 RSA 钥匙对。从 OpenSSH 2.9 开始，它已成为默认设置。 </P>
<P></P>
<OL type=1>
<LI>
<P>要生成 RSA 钥匙对与协议的版本 2 合作，在 shell 提示下键入下列命令： </P>
<TABLE class=SCREEN width="90%" bgColor=#dcdcdc>
<TBODY>
<TR>
<TD><PRE class=SCREEN><TT class=COMMAND>ssh-keygen -t rsa</TT></PRE></TD></TR></TBODY></TABLE>
<P>接受 <TT class=FILENAME>~/.ssh/id_rsa</TT> 的默认位置。输入一个与你的帐号口令不同的口令句，再输入一次来确认。 
</P>
<P>公钥被写入 <TT class=FILENAME>~/.ssh/id_rsa.pub</TT>。密钥被写入 <TT 
class=FILENAME>~/.ssh/id_rsa</TT>。决不能把密钥出示给任何人。 </P>
<LI>
<P>使用 <TT class=COMMAND>chmod 755 ~/.ssh</TT> 命令改变你的 <TT 
class=FILENAME>.ssh</TT> 目录的许可权限。 </P>
<LI>
<P>把 <TT class=FILENAME>~/.ssh/id_rsa.pub</TT> 的内容复制到你想连接的机器上的 <TT 
class=FILENAME>~/.ssh/authorized_keys</TT> 文件中。如果 <TT 
class=FILENAME>~/.ssh/authorized_keys</TT> 不存在，你可以把 <TT 
class=FILENAME>~/.ssh/id_rsa.pub</TT> 文件复制到那个机器上的 <TT 
class=FILENAME>~/.ssh/authorized_keys</TT> 文件中。 </P>
<LI>
<P> &nbsp; </P></LI></OL></DIV><!--EndFragment--></DIV>
</DIV>
</BODY>
</HTML>