<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>在 Gradle 脚本中处理Manifest: ClassPath</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style>
html,body { 
	/* Default Font */
	font-family: 宋体, Arial, Helvetica, sans-serif;
	font-size: 10pt;
}
</style>

</head>

<body>
<DIV class=article_title 
style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; TEXT-ALIGN: left; PADDING-TOP: 0px; FONT: 20px/30px 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 5px 0px; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
<H3 
style="VERTICAL-ALIGN: middle; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 20px/30px 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: inline; PADDING-RIGHT: 0px"><SPAN 
class=link_title 
style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">在 Gradle 脚本中处理Manifest: ClassPath</SPAN></H3></DIV>
<DIV id=article_content class=article_content 
style="WHITE-SPACE: normal; TEXT-TRANSFORM: none; WORD-SPACING: 0px; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; TEXT-ALIGN: left; PADDING-TOP: 0px; FONT: 14px/26px Arial; PADDING-LEFT: 0px; MARGIN: 20px 0px 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px">
<P 
style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">运行Java程序时，为了告诉系统到哪里去找外部的库文件，必须以Class-Path的形式把库的路径传递给jvm。基本的方式就是在Manifest文件中指定Class-Path，在Gradle 
中，可以使用如下代码：</P>
<DIV id=codeSnippetWrapper 
style="OVERFLOW: auto; CURSOR: text; FONT-SIZE: 8pt; BORDER-TOP: silver 1px solid; FONT-FAMILY: 'Courier New', courier, monospace; BORDER-RIGHT: silver 1px solid; BORDER-BOTTOM: silver 1px solid; PADDING-BOTTOM: 4px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 4px; PADDING-LEFT: 4px; MARGIN: 20px 0px 10px; BORDER-LEFT: silver 1px solid; LINE-HEIGHT: 12pt; PADDING-RIGHT: 4px; MAX-HEIGHT: 200px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)">
<DIV id=codeSnippet 
style="BORDER-TOP-STYLE: none; OVERFLOW: visible; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)"><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: white"><SPAN id=lnum1 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   1:</SPAN> jar {</PRE><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)"><SPAN id=lnum2 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   2:</SPAN>     manifest {</PRE><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: white"><SPAN id=lnum3 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   3:</SPAN>         attributes <SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">'Main-Clas'</SPAN>: <SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">'your.Class'</SPAN></PRE><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)"><SPAN id=lnum4 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   4:</SPAN>         attributes <SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">'Class-Path'</SPAN>: <SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">'ext.libA.jar ext.libB.jar'</SPAN></PRE><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: white"><SPAN id=lnum5 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   5:</SPAN>     }</PRE><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)"><SPAN id=lnum6 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   6:</SPAN> }</PRE></DIV></DIV>
<P 
style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">问题是，如果你的项目有20个jar需要导入，难道也一个个输入吗（真正的程序员拒绝打字到手软……）？如果变更了怎么办？</P>
<P 
style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">Well，在这里我不打算深究Gradle的DSL，也不指望用很标准的Gradle风格来搞定一切，但既然Gradle的配置文件本质上是Groovy，那么我的确知道在groovy中可以这样做……假设你所有的jar都放在lib文件夹里。那么在build.gradle文件的开头定义 
libPath = ‘lib’，然后，将前面第4行代码改为：</P>
<DIV id=codeSnippetWrapper 
style="OVERFLOW: auto; CURSOR: text; FONT-SIZE: 8pt; BORDER-TOP: silver 1px solid; FONT-FAMILY: 'Courier New', courier, monospace; BORDER-RIGHT: silver 1px solid; BORDER-BOTTOM: silver 1px solid; PADDING-BOTTOM: 4px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 4px; PADDING-LEFT: 4px; MARGIN: 20px 0px 10px; BORDER-LEFT: silver 1px solid; LINE-HEIGHT: 12pt; PADDING-RIGHT: 4px; MAX-HEIGHT: 200px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)">
<DIV id=codeSnippet 
style="BORDER-TOP-STYLE: none; OVERFLOW: visible; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)"><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: white"><SPAN id=lnum1 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   1:</SPAN> attributes <SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">'Class-Path'</SPAN>: <SPAN style="COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">new</SPAN> File(libPath).list().findAll {</PRE><PRE style="BORDER-TOP-STYLE: none; OVERFLOW: visible; WORD-WRAP: break-word; FONT-SIZE: 8pt; BORDER-LEFT-STYLE: none; FONT-FAMILY: 'Courier New', courier, monospace; WHITE-SPACE: pre-wrap; BORDER-BOTTOM-STYLE: none; COLOR: black; PADDING-BOTTOM: 0px; DIRECTION: ltr; TEXT-ALIGN: left; PADDING-TOP: 0px; BORDER-RIGHT-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0em; LINE-HEIGHT: 12pt; PADDING-RIGHT: 0px; WIDTH: 1100px; BACKGROUND-COLOR: rgb(244,244,244)"><SPAN id=lnum2 style="COLOR: rgb(96,96,96); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">   2:</SPAN>     it.endsWith(<SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">'.jar'</SPAN>) }.collect { <SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">"$libPath/$it"</SPAN> }.join(<SPAN style="COLOR: rgb(0,96,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">' '</SPAN>)</PRE></DIV></DIV>
<P 
style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">这就是动态语言的表现力!!!</P></DIV></body>
</html>