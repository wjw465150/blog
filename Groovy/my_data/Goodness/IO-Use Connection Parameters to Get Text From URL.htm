<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=UTF8" http-equiv="content-type"><title>IO-Use Connection Parameters to Get Text From URL</title></head><body>
<div id="body_content" style="border: 0px none ; margin: 0px; padding: 0px; background: rgb(255, 255, 255) none repeat scroll 0%; color: rgb(0, 0, 0); font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 300; letter-spacing: normal; line-height: 28px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><div id="main_content" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="main section" id="main" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="widget Blog" id="Blog1" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="blog-posts hfeed" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="post hentry" style="border: 0px none ; margin: 0px 0px 40px; padding: 0px;"><h3 class="post-title entry-title" style="border: 0px none ; margin: 0px 0px 16px; padding: 0px; font-weight: lighter; font-size: 26px; line-height: 26px; font-family: 'Helvetica Neue UltraLight','Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,sans-serif;">Groovy Goodness: Use Connection Parameters to Get Text From URL</h3><div class="post-body entry-content" style="border: 0px none ; margin: 0px; padding: 0px;"><p style="border: 0px none ; margin: 0px 0px 20px; padding: 0px;">For a long time we can simply<span class="Apple-converted-space">&nbsp;</span><a href="http://mrhaki.blogspot.com/2009/10/groovy-goodness-reading-url-content.html" style="border: 0px none ; margin: 0px; padding: 0px; color: rgb(51, 51, 51);">get the text from an URL</a><span class="Apple-converted-space">&nbsp;</span>in Groovy. Since Groovy 1.8.1 we can set parameters to the underlying<span class="Apple-converted-space">&nbsp;</span><code style="border: 1px solid rgb(212, 217, 217); margin: 0px; padding: 1px 4px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 0.9375em; line-height: 24px; font-family: Menlo,Monaco,'Liberation Mono',Consolas,monospace; color: rgb(59, 59, 59); white-space: nowrap; text-shadow: none; background-color: rgb(239, 241, 241);">URLConnection</code><span class="Apple-converted-space">&nbsp;</span>that is used to get the content. The parameters are passed as a Map to the<span class="Apple-converted-space">&nbsp;</span><code style="border: 1px solid rgb(212, 217, 217); margin: 0px; padding: 1px 4px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 0.9375em; line-height: 24px; font-family: Menlo,Monaco,'Liberation Mono',Consolas,monospace; color: rgb(59, 59, 59); white-space: nowrap; text-shadow: none; background-color: rgb(239, 241, 241);">getText()</code><span class="Apple-converted-space">&nbsp;</span>method or to the<span class="Apple-converted-space">&nbsp;</span><code style="border: 1px solid rgb(212, 217, 217); margin: 0px; padding: 1px 4px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 0.9375em; line-height: 24px; font-family: Menlo,Monaco,'Liberation Mono',Consolas,monospace; color: rgb(59, 59, 59); white-space: nowrap; text-shadow: none; background-color: rgb(239, 241, 241);">newReader()</code><span class="Apple-converted-space">&nbsp;</span>or<span class="Apple-converted-space">&nbsp;</span><code style="border: 1px solid rgb(212, 217, 217); margin: 0px; padding: 1px 4px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 0.9375em; line-height: 24px; font-family: Menlo,Monaco,'Liberation Mono',Consolas,monospace; color: rgb(59, 59, 59); white-space: nowrap; text-shadow: none; background-color: rgb(239, 241, 241);">newInputStream()</code><span class="Apple-converted-space">&nbsp;</span>methods for an URL.</p><p style="border: 0px none ; margin: 0px 0px 20px; padding: 0px;">We can set the following parameters:<br></p><ul style="border: 0px none ; margin: 0px; padding: 0px;"><li style="border: 0px none ; margin: 0px 0px 0px 20px; padding: 0px;">connectTimeout in milliseconds</li><li style="border: 0px none ; margin: 0px 0px 0px 20px; padding: 0px;">readTimeout in milliseconds</li><li style="border: 0px none ; margin: 0px 0px 0px 20px; padding: 0px;">useCaches</li><li style="border: 0px none ; margin: 0px 0px 0px 20px; padding: 0px;">allowUserInteraction</li><li style="border: 0px none ; margin: 0px 0px 0px 20px; padding: 0px;">requestProperties is a Map with general request properties</li></ul><pre class="brush:groovy" style="border: 0px none ; margin: 0px; padding: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: 24px; font-family: Menlo,Monaco,'Liberation Mono',Consolas,monospace;">// Contents of http://www.mrhaki.com/url.html:<br>// Simple test document<br>// for testing URL extensions<br>// in Groovy.<br><br>def url = "http://www.mrhaki.com/url.html".toURL()<br><br>// Simple Integer enhancement to make<br>// 10.seconds be 10 * 1000 ms.<br>Integer.metaClass.getSeconds = { -&gt;<br>    delegate * 1000<br>}<br><br>// Get content of URL with parameters.<br>def content = url.getText(connectTimeout: 10.seconds, readTimeout: 10.seconds,<br>                          useCaches: true, allowUserInteraction: false,<br>                          requestProperties: ['User-Agent': 'Groovy Sample Script'])<br><br>assert content == '''\<br>Simple test document<br>for testing URL extensions<br>in Groovy.<br>'''<br><br>url.newReader(connectTimeout: 10.seconds, useCaches: true).withReader { reader -&gt;<br>    assert reader.readLine() == 'Simple test document'<br>}<br></pre></div></div></div></div></div></div></div>
<iframe name="oauth2relay1769301342" id="oauth2relay1769301342" src="about:blank" tabindex="-1" style="border: 0px none ; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 300; letter-spacing: normal; line-height: 28px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; width: 1px; height: 1px; position: absolute; top: -100px;"></iframe><br class="Apple-interchange-newline">

  

</body></html>