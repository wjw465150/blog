<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="zh-cn"><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Base-the With Method</title></head><body>
<div id="body_content" style="border: 0px none ; margin: 0px; padding: 0px; background: rgb(255, 255, 255) none repeat scroll 0%; color: rgb(0, 0, 0); font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 300; letter-spacing: normal; line-height: 28px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -moz-background-clip: initial; -moz-background-origin: initial; -moz-background-inline-policy: initial;"><div id="main_content" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="main section" id="main" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="widget Blog" id="Blog1" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="blog-posts hfeed" style="border: 0px none ; margin: 0px; padding: 0px;"><div class="post hentry" style="border: 0px none ; margin: 0px 0px 40px; padding: 0px;"><h3 class="post-title entry-title" style="border: 0px none ; margin: 0px 0px 16px; padding: 0px; font-weight: lighter; font-size: 26px; line-height: 26px; font-family: 'Helvetica Neue UltraLight','Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,sans-serif;">Groovy Goodness: the With Method</h3><div class="post-body entry-content" style="border: 0px none ; margin: 0px; padding: 0px;"><p style="border: 0px none ; margin: 0px 0px 20px; padding: 0px;">Groovy
has a with method we can use to group method calls and property access
to an object. The with method accepts a closure and every method call
or property access in the closure applies to the object if applicable.
The method is part of<span class="Apple-converted-space">&nbsp;</span><a href="http://groovy.codehaus.org/groovy-jdk/java/lang/Object.html" style="border: 0px none ; margin: 0px; padding: 0px; color: rgb(51, 51, 51);">Groovy's extensions</a><span class="Apple-converted-space">&nbsp;</span>to the<span class="Apple-converted-space">&nbsp;</span><code style="border: 1px solid rgb(212, 217, 217); margin: 0px; padding: 1px 4px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 0.9375em; line-height: 24px; font-family: Menlo,Monaco,'Liberation Mono',Consolas,monospace; color: rgb(59, 59, 59); white-space: nowrap; text-shadow: none; background-color: rgb(239, 241, 241);">java.lang.Object</code><span class="Apple-converted-space">&nbsp;</span>class. Let's see this with an example:</p><pre class="brush:groovy" style="border: 0px none ; margin: 0px; padding: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: 24px; font-family: Menlo,Monaco,'Liberation Mono',Consolas,monospace;">class Sample {<br>    String username<br>    String email<br>    List&lt;String&gt; labels = []<br>    def speakUp() { "I am $username" }<br>    def addLabel(value) { labels &lt;&lt; value }<br>}<br><br>def sample = new Sample()<br>sample.with {<br>    username = 'mrhaki'<br>    email = 'email@host.com'<br>    println speakUp()  // Output: I am mrhaki<br>    addLabel 'Groovy' <br>    addLabel 'Java'    <br>}<br>assert 2 == sample.labels.size()<br>assert 'Groovy' == sample.labels[0]<br>assert 'Java' == sample.labels[1]<br>assert 'mrhaki' == sample.username<br>assert 'email@host.com' == sample.email<br><br>def sb = new StringBuilder()<br>sb.with {<br>    append 'Just another way to add '<br>    append 'strings to the StringBuilder '<br>    append 'object.'    <br>}<br><br>assert 'Just another way to add strings to the StringBuilder object.' == sb.toString()<br><br>// Another example as seen at <br>// http://javajeff.blogspot.com/2008/11/getting-groovy-with-with.html<br>def cal = Calendar.instance<br>cal.with {<br>    clear()<br>    set(YEAR, 2009)<br>    set MONTH, SEPTEMBER<br>    set DATE, 4    <br>    add DATE, 2<br>}<br>assert'September 6, 2009' == cal.time.format('MMMM d, yyyy')<br></pre><p style="border: 0px none ; margin: 0px 0px 20px; padding: 0px;"></p></div></div></div><div class="clear" style="border: 0px none ; margin: 0px; padding: 0px; clear: both;"></div></div></div></div></div>
<iframe name="oauth2relay374961354" id="oauth2relay374961354" src="about:blank" tabindex="-1" style="border: 0px none ; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 300; letter-spacing: normal; line-height: 28px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; width: 1px; height: 1px; position: absolute; top: -100px;"></iframe><br class="Apple-interchange-newline">
</body></html>