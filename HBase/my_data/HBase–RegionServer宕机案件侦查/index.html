<!DOCTYPE html><!--
 ______________ 
< TUICOOL.COM >
 -------------- 
        \   ^__^
         \  (**)\__$__$__
            (__)\       )\/\
             U  ||------|
                ||     ||
--><html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta content="authenticity_token" name="csrf-param">
<meta content="DtW8GaLCcoe2F/TuhzbERDMvm5iiV/wjLCptx9E8wsU=" name="csrf-token">
    <title>
            HBase – RegionServer宕机案件侦查 - 推酷
   </title>
    <meta name="description" content="HBase – RegionServer宕机案件侦查">
  <link rel="shortcut icon" href="index_files/favicon.ico" type="image/x-icon">
  <link href="http://static0.tuicool.com/images/icon114.png" rel="Bookmark">
  <link rel="apple-touch-icon" sizes="57x57" href="urn:not-loaded:http://static1.tuicool.com/images/icon57.png"> 
  <link rel="apple-touch-icon" sizes="72x72" href="urn:not-loaded:http://static2.tuicool.com/images/icon72.png">  
  <link rel="apple-touch-icon" sizes="114x114" href="urn:not-loaded:http://static0.tuicool.com/images/icon114.png">    
  <link rel="apple-touch-icon" sizes="144x144" href="urn:not-loaded:http://static1.tuicool.com/images/icon144.png">  
  <link href="index_files/application-2cfd59154d46613c0d5f82142c1f6aa1.css" media="screen" rel="stylesheet" type="text/css">
  <link href="index_files/font-awesome.min.css" rel="stylesheet">
  <script src="index_files/application-5c19f81d7795619188f5a2cb78fc7803.js" type="text/javascript"></script>

  <!--[if IE 7]>
  <link rel="stylesheet" href="http://assets.tuicool.com/assets/font-awesome-ie7.min.css">
  <![endif]--> 
    <script type="text/javascript" src="index_files/tip.js"></script>
  
  <script type="text/javascript" src="index_files/spin.min.js"></script><style type="text/css"></style>
<link rel="stylesheet" href="index_files/github.css">

</head>
<body class="  pace-done"><div class="pace  pace-inactive"><div data-progress="99" data-progress-text="100%" style="transform: translate3d(100%, 0px, 0px);" class="pace-progress">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>
  
  <div id="header" class="navbar-fixed-top">
    <div class="container">
      <div class="navbar">
        <div class="navbar-inner">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> 
            <span class="icon-bar"></span> 
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span> 
          </a>
          <a href="http://www.tuicool.com/" class="brand">推酷</a>        
        <nav class="nav-collapse collapse">
            <ul class="nav navbar primary-nav">                            
              <li class="active">
                <a href="http://www.tuicool.com/ah">
                  文章
                </a>
              </li>              
              <li class="">
                <a href="http://www.tuicool.com/sites/hot">
                  站点
                </a>
              </li>
              <li class="">
                <a href="http://www.tuicool.com/topics">
                  主题
                </a>
              </li>
              <li class="">
                <a href="http://course.tuicool.com/">
                  公开课
                </a>
              </li>
              <li class="">
                <a href="http://huodong.tuicool.com/">
                  活动
                </a>
              </li>
              <li class="">
                <a href="http://www.tuicool.com/mobile">
                  客户端
                    <sup style="font-size:0.8em;color: #16A085;">荐</sup>
                </a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">周刊 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="http://www.tuicool.com/mags">编程狂人</a></li>
                  <li><a href="http://www.tuicool.com/mags/design">设计匠艺</a></li> 
                  <li><a href="http://www.tuicool.com/mags/startup">创业周刊</a></li> 
                  <li><a href="http://www.tuicool.com/mags/tech">科技周刊</a></li>      
                  <li><a href="http://www.tuicool.com/mags/guru">Guru Weekly</a></li> 
                  <li><a href="http://www.tuicool.com/articles/weekly">一周拾遗</a></li>                  
                </ul>
              </li>
              
              </ul>
            <form class="navbar-search pull-left" action="http://www.tuicool.com/search">
              <input class="search-query span2" name="kw" placeholder="搜索" type="text">
            </form>
            <ul class="nav pull-right">
                <li><a href="http://www.tuicool.com/login">登录</a></li>
            </ul>
          </nav>
        </div>
      </div>
  </div>   
</div>
  <div id="flash_container" class="noPrint">    
  </div>
  
  <div class="container-fluid">  
      
<div class="row-fluid article_row_fluid">
    <div class="span8 contant article_detail_bg">
        <h1>HBase – RegionServer宕机案件侦查</h1>
        <div class="article_meta">
            <div style="margin-bottom: 5px;">
            <span class="timestamp">时间 2016-04-15 22:09:36
            </span>
            <span class="from">
                <i class="icon-globe"></i>
                    <a class="cut cut28 from" href="http://www.tuicool.com/sites/eMBFfe" target="_blank">有态度的HBase
                    </a>
            </span>
            </div>
            <div class="source">
                <i style="float:left;">原文</i>  
                <a class="cut cut70" href="http://hbasefly.com/2016/04/15/hbase-regionserver-crash/?utm_source=tuicool&amp;utm_medium=referral" style="display:inline-block;">http://hbasefly.com/2016/04/15/hbase-regionserver-crash/</a>
            </div>
            <div>
                <span>主题</span>
                <a href="http://www.tuicool.com/topics/11030035" target="_blank">
                    <span class="new-label">HBase</span>
                </a>
            </div>
        </div>
        <div class="article_body" id="nei">
            <div> 
 <p>本来静谧的晚上，吃着葡萄干看着球赛，何等惬意！然而一条报警短信如闪电一般打破了夜晚的宁静，线上集群一台RS宕了！于是倏地从床上坐起来，看了看监控，瞬间惊呆了：单台机器的读写吞吐量竟然达到了5w ops/sec！如此庞大的请求是造成RS宕机的原因？如果真是这样，它是怎么造成的？如果不是这样，那又是什么原因？各种疑问瞬间从脑子里一一闪过，甭管那么多，先把日志备份一份，再把RS拉起来。接下来还是Bug排查老套路：日志、监控和源码三管齐下，来看看到底发生了什么！</p> 
 <p> <span> <b>案件现场篇</b> </span> </p> 
 <p>下图是使用监控工具Ganglia对事发RegionServer当时读写吞吐量的监控曲线，从图中可以看出，大约在19点~21点半的时间段内，这台RS的吞吐量都维持了3w ops/sec左右，峰值更是达到了6w ops/sec。之前我们就线上单台RS能够承受的最大读写吞吐量进行过测定，基本也就维持在2w左右，主要是因为网络带宽瓶颈。而在宕机前这台RS的读写吞吐量超出这么多，直觉告诉我RS宕机原因就是它！</p> 
 <p> <img src="index_files/FfMB3uE.png%21web.png" class="alignCenter"> <br> </p> 
 <p>接着就赶紧把日志拉出来看，满屏的responseTooSlow，如下图所示：</p> 
 <p> <img src="index_files/vumANj.png%21web.png" class="alignCenter"> <br> </p> 
 <p>很显然，这种异常最大可能原因就是Full GC，果然，经过耐心地排查，可以看到很多如下所示的Full GC日志片段：</p> 
 <pre class="prettyprint cs"><span class="number">2016</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span>:<span class="number">27</span>:<span class="number">13</span>,<span class="number">174</span> WARN  [JvmPauseMonitor] util.JvmPauseMonitor: Detected pause <span class="keyword">in</span> JVM or host machine (eg GC): pause of approximately <span class="number">20542</span>ms
GC pool <span class="string">'ParNew'</span> had collection(s): count=<span class="number">1</span> time=<span class="number">0</span>ms
GC pool <span class="string">'ConcurrentMarkSweep'</span> had collection(s): count=<span class="number">2</span> time=<span class="number">20898</span>ms
<span class="number">2016</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span>:<span class="number">27</span>:<span class="number">13</span>,<span class="number">174</span> WARN  [regionserver60020.periodicFlusher] util.Sleeper: We slept <span class="number">20936</span>ms instead of <span class="number">100</span>ms, <span class="keyword">this</span> <span class="keyword">is</span> likely due to a <span class="keyword">long</span> garbage collecting pause and it<span class="string">'s usually bad, see http://hbase.apache.org/book.html#trouble.rs.runtime.zkexpired</span></pre> 
 <p>可以看出，HBase执行了一次CMS GC，导致整个进程所有线程被挂起了20s。通过对MemStore的监控也可以看出这段时间GC力度之大，如下图所示：</p> 
 <p> <img src="index_files/n267Rb2.png%21web.png" class="alignCenter"> <br> </p> 
 <p>GC时间长最明显的危害是会造成上层业务的阻塞，通过日志也可以看出些许端倪：</p> 
 <pre class="prettyprint sql">java.io.IOException: Connection re<span class="operator"><span class="keyword">set</span> <span class="keyword">by</span> peer
        <span class="keyword">at</span> sun.nio.ch.FileDispatcherImpl.read0(Native Method)
        <span class="keyword">at</span> sun.nio.ch.SocketDispatcher.<span class="keyword">read</span>(SocketDispatcher.java:<span class="number">39</span>)
        <span class="keyword">at</span> sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:<span class="number">223</span>)
        <span class="keyword">at</span> sun.nio.ch.IOUtil.<span class="keyword">read</span>(IOUtil.java:<span class="number">197</span>)
        <span class="keyword">at</span> sun.nio.ch.SocketChannelImpl.<span class="keyword">read</span>(SocketChannelImpl.java:<span class="number">384</span>)
        <span class="keyword">at</span> org.apache.hadoop.hbase.ipc.RpcServer.channelRead(RpcServer.java:<span class="number">2246</span>)
        <span class="keyword">at</span> org.apache.hadoop.hbase.ipc.RpcServer$<span class="keyword">Connection</span>.readAndProcess(RpcServer.java:<span class="number">1496</span>)
....
<span class="number">2016</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span>:<span class="number">32</span>:<span class="number">40</span>,<span class="number">173</span> WARN  [B.DefaultRpcServer.<span class="keyword">handler</span>=<span class="number">125</span>,queue=<span class="number">5</span>,port=<span class="number">60020</span>] ipc.RpcServer: RpcServer.respondercallId: <span class="number">7540</span> service: ClientService methodName: Multi <span class="keyword">size</span>: <span class="number">100.2</span> K <span class="keyword">connection</span>: <span class="number">10.160</span><span class="number">.247</span><span class="number">.139</span>:<span class="number">56031</span>: <span class="keyword">output</span> error
<span class="number">2016</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span>:<span class="number">32</span>:<span class="number">40</span>,<span class="number">173</span> WARN  [B.DefaultRpcServer.<span class="keyword">handler</span>=<span class="number">125</span>,queue=<span class="number">5</span>,port=<span class="number">60020</span>] ipc.RpcServer: B.DefaultRpcServer.<span class="keyword">handler</span>=<span class="number">125</span>,queue=<span class="number">5</span>,port=<span class="number">60020</span>: caught a ClosedChannelException, this means that the server was processing a request but the client went away. The error message was: <span class="keyword">null</span></span></pre> 
 <div> 
  <p>上述日志表示HBase服务端因为Full GC导致一直无法响应用户请求，用户客户端程序在一定时间过后就会SocketTimeout并断掉此Connection。连接断掉之后，服务器端就会打印如上日志。然而，这些和我们的终极目标好像并没有太大关系，别忘了我们的目标是找到RS宕机的原因哦！</p> 
 </div> 
 <p> <span> <b>破案铺垫篇</b> </span> </p> 
 <p>经过对案件现场的排查，唯一有用的线索就是HBase在宕机前经历了很严重、很频繁的Full GC，从下面日志可以进一步看出，这些Full GC都是在 concurrent mode failure模式下发生的，也就是因为大量内存碎片导致的！</p> 
 <pre class="prettyprint perl">(concurrent mode failure): <span class="number">45876255</span>K-&gt;<span class="number">21800674</span>K(<span class="number">46137344</span>K), <span class="number">10.0625300</span> secs] <span class="number">48792749</span>K-&gt;<span class="number">21800674</span>K(<span class="number">49283072</span>K), [CMS Perm : <span class="number">43274</span>K-&gt;<span class="number">43274</span>K(<span class="number">262144</span>K)], <span class="number">10.2083040</span> secs] [Times: user=<span class="number">12.02</span> sys=<span class="number">0</span>.<span class="number">00</span>, real=<span class="number">10.20</span> secs]
<span class="number">2016</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span>:<span class="number">22</span>:<span class="number">43</span>,<span class="number">990</span> WARN  [JvmPauseMonitor] util.JvmPauseMonitor: Detected pause in JVM <span class="keyword">or</span> host machine (eg GC): pause of approximately <span class="number">10055</span>ms
GC pool <span class="string">'ParNew'</span> had collection(<span class="keyword">s</span>): count=<span class="number">2</span> <span class="keyword">time</span>=<span class="number">244</span>ms
GC pool <span class="string">'ConcurrentMarkSweep'</span> had collection(<span class="keyword">s</span>): count=<span class="number">1</span> <span class="keyword">time</span>=<span class="number">10062</span>ms</pre> 
 <p>上文提到Full GC会对上层业务产生很严重的影响，那有没有可能会对下层依赖方也产生很大的影响呢？事实是Yes！而且，RS宕机的大部分原因也要归咎于此！</p> 
 <p>进一步查看日志，发现HBase日志中出现下述异常：</p> 
 <pre class="prettyprint ruby"><span class="number">2016</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">44</span>,<span class="number">006</span> <span class="constant">WARN</span>  [<span class="constant">ResponseProcessor</span> <span class="keyword">for</span> block <span class="constant">BP</span>-<span class="number">632656502</span>-<span class="number">10.160</span>.<span class="number">173.93</span>-<span class="number">1448595094942</span><span class="symbol">:blk_1073941840_201226</span>] hdfs.<span class="constant">DFSClient</span><span class="symbol">:</span> <span class="constant">DFSOutputStream</span> <span class="constant">ResponseProcessor</span> exception  <span class="keyword">for</span> block <span class="constant">BP</span>-<span class="number">632656502</span>-<span class="number">10.160</span>.<span class="number">173.93</span>-<span class="number">1448595094942</span><span class="symbol">:blk_1073941840_201226</span></pre> 
 <pre class="prettyprint ruby">java.io.<span class="constant">IOException</span><span class="symbol">:</span> <span class="constant">Bad</span> response <span class="constant">ERROR</span> <span class="keyword">for</span> block <span class="constant">BP</span>-<span class="number">632656502</span>-<span class="number">10.160</span>.<span class="number">173.93</span>-<span class="number">1448595094942</span><span class="symbol">:blk_1073941840_201226</span> from datanode <span class="number">10.160</span>.<span class="number">173.93</span><span class="symbol">:</span><span class="number">50010</span>
at org.apache.hadoop.hdfs.<span class="constant">DFSOutputStream</span><span class="variable">$DataStreamer</span><span class="variable">$ResponseProcessor</span>.run(<span class="constant">DFSOutputStream</span>.<span class="symbol">java:</span><span class="number">732</span>)</pre> 
 <div> 
  <p> <span>从日志内容来看应该是hbase调用DFSClient从datanode加载block数据”</span> <span>BP-632656502-10.160.173.93-1448595094942:blk_1073941840_201226″，但是datanode返回失败。具体失败原因需要查看datanode节点日志，如下所示：</span> </p> 
  <pre class="prettyprint sql">2016-04-14 21:22:43,789 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: opWriteB<span class="operator"><span class="keyword">lock</span> BP-<span class="number">632656502</span>-<span class="number">10.160</span><span class="number">.173</span><span class="number">.93</span>-<span class="number">1448595094942</span>:blk_1073941840_201226 received <span class="keyword">exception</span> java.net.SocketTimeoutException: <span class="number">10000</span> millis timeout while waiting <span class="keyword">for</span> channel <span class="keyword">to</span> be ready <span class="keyword">for</span> <span class="keyword">read</span>. ch : java.nio.channels.SocketChannel[connected <span class="keyword">local</span>=/<span class="number">10.160</span><span class="number">.173</span><span class="number">.94</span>:<span class="number">50010</span> remote=/<span class="number">10.160</span><span class="number">.173</span><span class="number">.94</span>:<span class="number">30110</span>]

<span class="number">2016</span>-<span class="number">04</span>-<span class="number">14</span> <span class="number">21</span>:<span class="number">22</span>:<span class="number">43</span>,<span class="number">779</span> ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: hz-hbase4.photo<span class="number">.163</span>.org:<span class="number">50010</span>:DataXceiver error processing WRITE_BLOCK operation  src: /<span class="number">10.160</span><span class="number">.173</span><span class="number">.94</span>:<span class="number">30123</span> dest: /<span class="number">10.160</span><span class="number">.173</span><span class="number">.94</span>:<span class="number">50010</span>
java.net.SocketTimeoutException: <span class="number">10000</span> millis timeout while waiting <span class="keyword">for</span> channel <span class="keyword">to</span> be ready <span class="keyword">for</span> <span class="keyword">read</span>. ch : java.nio.channels.SocketChannel[connected <span class="keyword">local</span>=/<span class="number">10.160</span><span class="number">.173</span><span class="number">.94</span>:<span class="number">50010</span> remote=/<span class="number">10.160</span><span class="number">.173</span><span class="number">.94</span>:<span class="number">30123</span>]</span></pre> 
 </div> 
 <p> 很显然，从日志可以看出，datanode一直在等待来自客户端的read请求，但是直至SocketTimeout，请求都没有过来，此时datanode会将该连接断开，导致客户端收到上 <span>述”Bad response ERROR ***”的异常。</span> </p> 
 <p>那这和Full GC有什么关系呢？很简单，就是因为Full GC导致HBase所有内部线程挂起，因此发往datanode的read请求也被挂起了，datanode就等啊等，左等右等都等不到，万不得已才将连接断掉。</p> 
 <p>查看Hadoop客户端源码可知，如果DFSClient发生上述异常，DFSClient会将一个全局标志errorIndex设为一个非零值。具体可参见DFSOutputStream类中如下代码片段：</p> 
 <p> <span> <img src="index_files/YR3Arqu.png%21web.png" class="alignCenter"> </span> </p> 
 <p> <span> <b>破案结局篇</b> </span> </p> 
 <p>上述铺垫篇最后的结果就是Hadoop客户端会将一个全局标志errorIndex设为一个非零值，那这到底和最终RS宕掉有什么关系呢？来继续往下看。下图HBase日志相关片段截图，记录了比较详细的RS宕机异常信息，我们就以这些异常信息作为切入点进行分析，可以看出至少三条有用的线索，如下图所示：</p> 
 <p> <br> <img src="index_files/URfeuqI.png%21web.png" class="alignCenter"> <br> </p> 
 <p>线索一：RS宕机最直接的原因是因为系统在关闭LogWriter（之后会重新开启一个新的HLog）的时候失败</p> 
 <p>线索二：执行LogWriter关闭失败的原因是”writing trailer”时发生IOException异常</p> 
 <p>线索三：而发生IOException异常的原因是”All datanodes *** are bad”</p> 
 <p>到这里为止，我们能够获得的最靠谱的情报就是RS宕机本质是因为”All datanodes *** are bad”造成的，看字面意思就是这台datanode因为某种原因坏掉了，那我们赶紧去看看datanode的日志，看看那个时间段有没有相关的异常或者错误日志。</p> 
 <p>然而很遗憾，datanode日志在那个时间点没有打印任何异常或者错误日志，而且显示所有服务都正常，信息如下所示：</p> 
 <pre class="prettyprint css">2016-04-14 21<span class="pseudo">:32</span><span class="pseudo">:38</span>,893 <span class="tag">INFO</span> <span class="tag">org</span><span class="class">.apache</span><span class="class">.hadoop</span><span class="class">.hdfs</span><span class="class">.server</span><span class="class">.datanode</span><span class="class">.DataNode</span><span class="class">.clienttrace</span>: <span class="tag">src</span>: 127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span>, <span class="tag">dest</span>: 127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span>, <span class="tag">op</span>: <span class="tag">REQUEST_SHORT_CIRCUIT_FDS</span>, <span class="tag">blockid</span>: 1073941669, <span class="tag">srvID</span>: <span class="tag">DS</span>-22834907-10<span class="class">.160</span><span class="class">.173</span><span class="class">.94-50010-1448595406972</span>, <span class="tag">success</span>: <span class="tag">true</span>
2016-04-14 21<span class="pseudo">:32</span><span class="pseudo">:38</span>,894 <span class="tag">INFO</span> <span class="tag">org</span><span class="class">.apache</span><span class="class">.hadoop</span><span class="class">.hdfs</span><span class="class">.server</span><span class="class">.datanode</span><span class="class">.DataNode</span><span class="class">.clienttrace</span>: <span class="tag">src</span>: 127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span>, <span class="tag">dest</span>: 127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span>, <span class="tag">op</span>: <span class="tag">REQUEST_SHORT_CIRCUIT_FDS</span>, <span class="tag">blockid</span>: 1073941669, <span class="tag">srvID</span>: <span class="tag">DS</span>-22834907-10<span class="class">.160</span><span class="class">.173</span><span class="class">.94-50010-1448595406972</span>, <span class="tag">success</span>: <span class="tag">true</span>
...</pre> 
 <p> <span>看到这里，是不是有点蒙圈：HBase日志里面明明打印说这台datanode坏掉了，但是实际datanode日志显示服务一切正常。这个时候就得翻翻源码了，看看HBase在哪里打印的”</span> <span>All datanodes *** are bad</span> <span>“，通过查看源码，可以看出最终元凶就是上文提到的errorIndex，如下图所示：</span> </p> 
 <p> <img src="index_files/zAzaEjF.png%21web.png" class="alignCenter"> <br> </p> 
 <p> <span>终于拨开天日了，再不完结就要晕了！上文铺垫篇铺垫到最后就得出来因为Full GC最终导致DFSClient将一个全局</span> <span>标志errorIndex设为一个非零值，在这里终于碰头了，简直泪流满面！</span> </p> 
 <p> <span> <b>案件梳理篇</b> </span> </p> 
 <p>整个流程走下来本人都有点晕晕的，涉及的方方面面太多，因此有必要把整个流程完整的梳理一遍，下面简单画了一个示意图：</p> 
 <p> <br> <img src="index_files/z22y2yJ.png%21web.png" class="alignCenter"> <br> </p> 
 <p>经过对整个案件的整理分析，一方面再次锻炼了如何通过监控、日志以及源码定位排查问题的功底，另一方面在HBase运维过程中也需要特别关注如下几点：</p> 
 <p>1. Full GC不仅会严重影响上层业务，造成业务读写请求的卡顿。另外还有可能造成与HDFS之间数据请求的各种异常，这种异常严重的时候甚至会导致RegionServer宕机。</p> 
 <p>2. 上文中提到Full GC基本是由于Concurrent Mode Failure造成，因此最好检查HBase的BlockCache方案配置，建议使用BucketBlockCache方案的offheap模式。</p> 
 <p>3. 一定要严格限制业务层面的流量。一方面需要和业务方交流，由业务方进行限制，另一方面可以探索HBase业务资源隔离的新方案；</p> 
</div>
        </div>
        <div class="article_social">
         <div class="article_like">
    <div class="circle circle-like" id="my_zan" data_id="AnqQjmn">
    </div>
</div>
        <div id="share_weixin_image">
            <img src="index_files/qrcode.php.png" height="100px" width="100px">
        </div>
<div class="article_share_fav">
    <div class="share" id="ckepop">
        <span>分享</span>
        <button class="share_weibo" id="share_weibo_id" title="分享到新浪微博"></button>
        <button class="share_qq" id="share_qq_id" title="分享到QQ空间"></button>
        <button class="share_weixin" id="share_weixin_id"></button>
    </div>
    <div class="fav_correct">
        <button id="my_fav" data_id="AnqQjmn">
            <i class="icon icon-star-empty"></i> <span id="fav_tip">收藏</span>
        </button>
        <button id="article-correct" data_id="AnqQjmn" uid="0">
            <i class="icon icon-warning-sign"></i>
            <span>纠错</span>
        </button>
    </div>
</div>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>


            <div class="bottom_ad huodong-detail-ad-banner clearfix">
                  <a href="http://www.jiankongbao.com/?f=tuicool" target="_blank"><img class="taebljxkczqulspmyloh" src="index_files/jiankongbao700.jpg"></a>

            </div>
        </div>
        <div id="site_articles" style="clear:both;">
              <div class="article-part-title">
                <span>推荐文章</span>
              </div>
          <ul class="side_article_list">
                <li class="side_article_list_item">
                    1.<a href="http://www.tuicool.com/articles/UB32ErU" target="_blank" title="LinkedIn开源Dr. Elephant">
                    LinkedIn开源Dr. Elephant
                    </a>
                </li>
                <li class="side_article_list_item">
                    2.<a href="http://www.tuicool.com/articles/iUvuquA" target="_blank" title="Spark Streaming 数据清理机制">
                    Spark Streaming 数据清理机制
                    </a>
                </li>
                <li class="side_article_list_item">
                    3.<a href="http://www.tuicool.com/articles/maM3Irn" target="_blank" title="6.824 Lab 1: MapReduce">
                    6.824 Lab 1: MapReduce
                    </a>
                </li>
                <li class="side_article_list_item">
                    4.<a href="http://www.tuicool.com/articles/mYNzYfQ" target="_blank" title="ELK结合logback搭建日志中心">
                    ELK结合logback搭建日志中心
                    </a>
                </li>
                <li class="side_article_list_item">
                    5.<a href="http://www.tuicool.com/articles/Uf2YZbJ" target="_blank" title="Intel Spark应用优化和实践经验">
                    Intel Spark应用优化和实践经验
                    </a>
                </li>
                <li class="side_article_list_item">
                    6.<a href="http://www.tuicool.com/articles/YVnemej" target="_blank" title="每日一搏 | Spark 1.6.1 分布式集群环境搭建">
                    每日一搏 | Spark 1.6.1 分布式集群环境搭建
                    </a>
                </li>
          </ul>
        </div>
        <div id="kan_articles"> <div class="article-part-title"> <span>相关推刊</span></div><ul class="kan-list">          <li class="kan-item">            <a href="http://www.tuicool.com/kans/3659873900" target="_blank" class="kan-item-head">              <small>刊主：anjingxz</small>              <img class="kan-cover" src="index_files/z6zeAzb.jpg%21kan.jpg">            </a>            <span class="kan-detail">              <a href="http://www.tuicool.com/kans/3659873900" target="_blank">《默认推刊》</a>              <i class="kan-num">630</i>            </span>          </li>                  <li class="kan-item">            <a href="http://www.tuicool.com/kans/4043366176" target="_blank" class="kan-item-head">              <small>刊主：yt26500</small>              <img class="kan-cover" src="index_files/nUbQJz.jpg%21kan.jpg">            </a>            <span class="kan-detail">              <a href="http://www.tuicool.com/kans/4043366176" target="_blank">《大数据技术》</a>              <i class="kan-num">54</i>            </span>          </li>                  <li class="kan-item">            <a href="http://www.tuicool.com/kans/2084321298" target="_blank" class="kan-item-head">              <small>刊主：蓦苒一</small>              <img class="kan-cover" src="index_files/vq2Aryq.png%21kan.png">            </a>            <span class="kan-detail">              <a href="http://www.tuicool.com/kans/2084321298" target="_blank">《默认推刊》</a>              <i class="kan-num">5029</i>            </span>          </li>        </ul><i class="clearfix"></i></div>
        <div id="article_weibo" style="display:none;">
            <div class="article-part-title">
                <span>相关微博</span>
                <sub>
                    <a href="http://www.tuicool.com/articles/weibo_list/AnqQjmn" target="_blank">(<i id="weibo_num"></i>)</a> 
               </sub>
            </div>
            <div class="related-weibo-list"></div>
        </div>
        <div class="comments">
    <div class="comments-area">
    <div class="comments-header">
        <h5>我来评几句</h5>
        <div class="alert comment-alert alert-error" style="display:none;">
            错误
        </div>
            <textarea cols="60" rows="5" id="comment-body" placeholder="请输入评论内容..." style="resize: none;"></textarea>
            <span class="btn btn-medium btn-submit" id="comment-submit">登录后评论</span>
        <p style="margin-top: 5px;margin-left:10px;">
            已发表评论数(<span class="comment_cnt">0</span>)
        </p>
    </div>
    <div class="comments-list">
        <div class="empty-cmts alert alert-success" style="display:none;">
            没有更多评论了^^
        </div>
    </div>
    <div class="more-comments" style="display:none;">
        <a href="">更多评论</a>
    </div>
    <div class="load-fail" style="display:none;">
        评论加载失败，<a href="javascript:void(0);">重新加载</a>
    </div>
    </div>
</div>

    </div>
        <div class="span4 article_right_side">
            <div class="right_top">
    <div class="article_related_site article_detail_bg">
    <h4 class="article-part-title">相关站点</h4>
    <div class="article_related_site_body clearfix">
        <div class="logo">
            <img src="index_files/eMBFfe.png">
        </div>
        <div class="name">
            <div>
                <a href="http://www.tuicool.com/sites/eMBFfe" target="_blank"> 有态度的HBase</a>
            </div>
            <div>
                <div class="btn btn-success right_site_follow" id="my_follow" data_id="eMBFfe">＋订阅</div>
            </div>
        </div>
    </div>
</div>

<div id="right_site_articles" class="article_detail_bg">
    <div class="article-part-title">
        <span>热门文章</span>
    </div>
    <ul class="side_article_list">
        <li class="side_article_list_item">
            1.<a href="http://www.tuicool.com/articles/UB32ErU" target="_blank" title="LinkedIn开源Dr. Elephant"> LinkedIn开源Dr. Elephant </a>
        </li>
        <li class="side_article_list_item">
            2.<a href="http://www.tuicool.com/articles/iUvuquA" target="_blank" title="Spark Streaming 数据清理机制"> Spark Streaming 数据清理机制 </a>
        </li>
        <li class="side_article_list_item">
            3.<a href="http://www.tuicool.com/articles/maM3Irn" target="_blank" title="6.824 Lab 1: MapReduce"> 6.824 Lab 1: MapReduce </a>
        </li>
        <li class="side_article_list_item">
            4.<a href="http://www.tuicool.com/articles/mYNzYfQ" target="_blank" title="ELK结合logback搭建日志中心"> ELK结合logback搭建日志中心 </a>
        </li>
        <li class="side_article_list_item">
            5.<a href="http://www.tuicool.com/articles/Uf2YZbJ" target="_blank" title="Intel Spark应用优化和实践经验"> Intel Spark应用优化和实践经验 </a>
        </li>
    </ul>
</div>
<div class="right-ad">
      <a href="http://www.jiankongbao.com/?f=tuicool" target="_blank"><img class="taebljxkczqulspmyloh" src="index_files/jiankongbao120.jpg"></a>

</div>
<div class="right-ad" style="margin-top: 5px">
      <a href="https://www.teambition.com/?utm_source=tuicool&amp;utm_medium=banner01" target="_blank"><img class="taebljxkczqulspmyloh" src="index_files/teambition120.jpg"></a>

</div>
<div class="right-ad" style="margin-top: 5px">
      <a href="http://www.opensns.cn/?f=tc" target="_blank"><img class="taebljxkczqulspmyloh" src="index_files/opensns120.jpg"></a>

</div>
<div class="right-ad" style="margin-top: 0px">
      <a href="https://www.jpush.cn/?f=tc" target="_blank"><img class="taebljxkczqulspmyloh" src="index_files/jpush120.jpg"></a>

</div>
<div class="right-ad" style="margin-top: 5px">
      <a href="http://click.aliyun.com/m/3714/" target="_blank"><img class="taebljxkczqulspmyloh" src="index_files/aliyun120.jpg"></a>

</div>
</div>

<div class="operate_zone">
    <div class="right-ad" style="margin-top: 5px">
          <a href="https://www.leangoo.com/?f=tc" target="_blank"><img class="taebljxkczqulspmyloh" src="index_files/leangoo120.jpg"></a>

    </div>
        <div class="frd_pos">
        <script async="" src="index_files/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-7054762349007490" data-ad-slot="5705695566"></ins>
<script><!--
/* Script removed by snapshot save */
--></script>

        </div>
</div>
         </div>
</div>

<div class="read-later-alert">
</div>
<div>
   <a href="#add-article-to-kan" id="add-article-to-kan-btn" class="btn" data-toggle="modal" style="display:none;">添加到推刊</a>
   <!-- add_article to kan -->
<div id="add-article-to-kan" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <span class="add-title">收藏到推刊</span>
    <a href="#new-kan" class="btn pull-right" data-toggle="modal">创建推刊</a>
    <i class="clearfix"></i>
  </div>
  <div class="modal-body">
    <ul id="add-kan-list">
    </ul>
  </div>
  <div class="modal-footer">
    <input value="AnqQjmn" class="article-id" type="hidden"> 
    <button class="btn btn-primary pull-left add-to-btn">  收 藏  </button>
    <button class="btn" data-dismiss="modal" aria-hidden="true">取消</button>
  </div>
</div>
<div class="add-article-to-kan-alert">
  已收藏到推刊！
</div>

   <div id="new-kan" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-body">
    <input name="name" id="new-kan-name" placeholder="推刊名(必填)" required="" data-validation-required-message="请填写推刊名" type="text">
    <span class="new-ness-name">请填写推刊名</span>
    <br>
    <textarea name="desc" id="desc" rows="6" placeholder="推刊描述"></textarea>
    <span class="new-ness-desc">描述不能大于100个字符!</span>
    <br>
    权限设置：<input name="type" value="1" checked="checked" type="radio"> 公开
    <input name="type" value="0" type="radio"> 仅自己可见
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary pull-left create-kan-btn" disabled="disabled">创建</button>
    <button class="btn dismiss-new-kan" data-dismiss="modal" aria-hidden="true">取消</button>
  </div>
</div>


</div>
<div id="article-correct-modal" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×
        </button>
        <h3>文章纠错</h3>
    </div>
    <div class="modal-body">
        <input value="AnqQjmn" id="article-correct-source" type="hidden">
        <div>
            <label for="article-correct-email">
                邮箱地址
            </label>
            <input id="article-correct-email" class="input-large" type="email">
        </div>
        <div>
            <label for="article-correct-select">
                错误类型
            </label>
            <select id="article-correct-select">
                <option selected="selected" value="正文不准确">正文不准确</option>
                <option value="标题不准确">标题不准确</option>
                <option value="排版有问题">排版有问题</option>
                <option value="没有分页内容">没有分页内容</option>
                <option value="图片无法显示">图片无法显示</option>
                <option value="视频无法显示">视频无法显示</option>
                <option value="与原文不一致">与原文不一致</option>
            </select>
        </div>
        <div>
            <label for="article-correct-other">
                补充信息
            </label>
            <textarea id="article-correct-other" class="span6"></textarea>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary pull-right huodong_correct_submit" id="article-correct-submit">
              提交  
        </button>
    </div>
</div>

<style type="text/css"><!--
/* Effective stylesheet produced by snapshot save */
.load-fail { display: none; }
--></style>
<script src="index_files/highlight.pack.js"></script>
<script type="text/javascript"><!--
/* Script removed by snapshot save */
--></script>



  

  </div>

    <div class="footer">
    <div class="footer-inner">
    <dl class="about-link site-link">
        <dt>
            网站相关
        </dt>
        <dd>
            <a target="_blank" href="http://www.tuicool.com/about">关于我们</a>
        </dd>
        <dd>
            <a target="_blank" href="http://www.tuicool.com/mobile">移动应用</a>
        </dd>
        <dd>
            <a target="_blank" href="http://www.tuicool.com/bbs/go/issues">建议反馈</a>
        </dd>
    </dl>
    <dl class="site-link follow-link">
        <dt>
            关注我们
        </dt>
        <dd>
            <a target="_blank" href="http://e.weibo.com/tuicool2012"><img src="index_files/weibo-32.png">推酷网</a>
        </dd>
        <dd><img src="index_files/weixin-32.png">tuicool2012
        </dd>
    </dl>
    <dl class="site-link links">
        <dt>
            友情链接
        </dt>
        <dd>
                <a href="http://www.woshipm.com/" title="人人都是产品经理" target="_blank">人人都是产品经理</a>
                <a href="http://www.pm265.com/" title="PM256" target="_blank">PM256</a>
                <a href="http://www.yidonghua.com/" title="移动信息化" target="_blank">移动信息化</a>
                <a href="http://www.snsiu.com/" title="行晓网" target="_blank">行晓网</a>
                <a href="http://code4app.com/" title="Code4App" target="_blank">Code4App</a>
                <a href="http://www.taskcity.com/" title="智城外包网" target="_blank">智城外包网</a>
                <a href="http://www.huxiu.com/" title="虎嗅" target="_blank">虎嗅</a>
                <a href="http://www.iterduo.com/" title="IT耳朵" target="_blank">IT耳朵</a>
                <a href="http://www.iresearch.cn/" title="艾瑞网" target="_blank">艾瑞网</a>
                <a href="http://mediaworks.caixin.com/" title="创媒工场" target="_blank">创媒工场</a>
                <a href="http://www.managershare.com/" title="经理人分享" target="_blank">经理人分享</a>
                <a href="http://www.shichangbu.com/" title="市场部网" target="_blank">市场部网</a>
                <a href="http://www.ikanchai.com/" title="砍柴网" target="_blank">砍柴网</a>
                <a href="http://www.cocoachina.com/" title="CocoaChina" target="_blank">CocoaChina</a>
                <a href="http://www.ibeifeng.com/" title="北风网" target="_blank">北风网</a>
                <a href="http://www.jiankongbao.com/" title="云智慧" target="_blank">云智慧</a>
                <a href="http://www.wyzc.com/" title="我赢职场" target="_blank">我赢职场</a>
                <a href="http://www.thebigdata.cn/" title="大数据时代" target="_blank">大数据时代</a>
                <a href="http://www.qidic.com/" title="奇笛网" target="_blank">奇笛网</a>
                <a href="http://www.cngulu.com/" title="咕噜网" target="_blank">咕噜网</a>
                <a href="http://www.linuxdiyf.com/" title="红联linux" target="_blank">红联linux</a>
                <a href="http://win10.ithome.com/" title="Win10之家" target="_blank">Win10之家</a>
                <a href="http://www.niaogebiji.com/" title="鸟哥笔记" target="_blank">鸟哥笔记</a>
                <a href="http://www.play.cn/" title="爱游戏" target="_blank">爱游戏</a>
                <a href="http://www.investide.cn/" title="投资潮" target="_blank">投资潮</a>
                <a href="http://www.31huiyi.com/" title="31会议网" target="_blank">31会议网</a>
                <a href="https://www.jpush.cn/" title="极光推送" target="_blank">极光推送</a>
                <a href="https://www.teambition.com/" title="Teambition" target="_blank">Teambition</a>
                <a href="http://www.guigu.org/" title="硅谷网" target="_blank">硅谷网</a>
                <a href="https://home.leangoo.com/" title="leangoo" target="_blank">leangoo</a>
                <a href="https://www.huoban.com/" title="伙伴云表格" target="_blank">伙伴云表格</a>
                <a href="http://www.zealer.com/" title="ZEALER中国" target="_blank">ZEALER中国</a>
                <a href="http://www.opensns.cn/" title="OpenSNS" target="_blank">OpenSNS</a>
            <a href="http://www.tuicool.com/links">更多链接&gt;&gt;</a>  
        </dd>
    </dl>
    <div class="clear"></div>
    </div>
</div>

<div style="display:none;">
   <script src="index_files/stat.php.js" language="JavaScript"></script>
</div>




<div style="display: none;" title="返回顶部" class="return"></div></body></html>