<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272632; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2524"/>

<div><div><br/><div style="font-size: 16px"><div><div style="text-align:center;font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:12px;line-height:1.5;color:black;background:white;"><div style="text-align:center;background:white;background-color:rgb(255, 240, 240);"><div style="text-align:left;"><div style="overflow:hidden;background-color:white;"><div style="background-color:white;"><div style="font-size:14px;line-height:1.8em;"><div style="font-size:14px;">
<div>
<ul style="margin:0px 0px 1.5em;padding:0px;margin-top:0px;margin-bottom:0px;background-color:inherit;font-size:16px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;line-height:1.5;">（1）定义：</strong></li>
</ul>
</div>
<div><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">        HBase ： Hadoop Database，是一个高可靠性、高性能、面向列、可伸缩的分布式存储系统。</span></span></span></span></span></div>
<div><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">        利用HBase技术可在廉价PC Server上搭建起大规模结构化存储集群。</span><br style="background-color:inherit;"/></span></span></span></span></div>
<div>
<ul style="margin:0px 0px 1.5em;padding:0px;margin-top:0px;margin-bottom:0px;background-color:inherit;font-size:16px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;line-height:1.5;">（2）HBase是Google Bigtable的开源实现</strong></li>
</ul>
</div>
<div>
<div style="background-color:inherit;">
<table border="1" cellpadding="2" cellspacing="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;margin-top:10px;margin-bottom:10px;display:table;background-color:#ffffff;font-family:微软雅黑;">
<tbody><tr style="background-color:inherit;">
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:52px;background-color:inherit;width:130.2pt;">
<div style="min-width:2px;background-color:inherit;"><span style="background-color:inherit;"> </span></div>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:52px;background-color:inherit;width:144px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;">BigTable</strong></span></span></span></p>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:52px;background-color:inherit;width:245px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;">HBase</strong></span></span></span></p>
</td>
</tr>
<tr style="background-color:inherit;">
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:130.2pt;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;">文件存储系统</strong></span></span></span></p>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:144px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">GFS</span></span></p>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:245px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">HDFS</span></span></p>
</td>
</tr>
<tr style="background-color:inherit;">
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:130.2pt;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;">数据处理</strong></span></span></span></p>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:144px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">MapReduce</span></span></p>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:245px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">Hadoop MapReduce</span></span></p>
</td>
</tr>
<tr style="background-color:inherit;">
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:130.2pt;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;">协调服务</strong></span></span></span></p>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:144px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">Chubby</span></span></p>
</td>
<td style="font-size:1em;border:1px solid #999999;padding:5px 10px;min-width:25px;height:25px;background-color:inherit;width:245px;">
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"><span style="background-color:inherit;">Zookeeper</span></span></p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div>
<ul style="margin:0px 0px 1.5em;padding:0px;margin-top:0px;margin-bottom:0px;background-color:inherit;font-size:16px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;line-height:1.5;">（3）hbase在hadoop生态系统中的位置</strong></li>
</ul>
</div>
<div><img src="Hbase模型与框架分享_files/aa8d42d7-8453-36ed-a13b-53fa0ae72cb5.png" type="image/png" height="284" style="border:0px;" width="394"/></div>
<div>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">其中<span style="background-color:inherit;color:#ff0000;">HBase</span>位于结构化<span style="background-color:inherit;color:#ff0000;">存储层</span>。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">Hadoop<span> </span><span style="background-color:inherit;color:#ff0000;">HDFS</span>为HBase提供了高可靠性的<span style="background-color:inherit;color:#ff0000;">底层存储</span>支持。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">Hadoop<span> </span><span style="background-color:inherit;color:#ff0000;">MapReduce</span>为HBase提供了高性能的<span style="background-color:inherit;color:#ff0000;">计算能力</span>。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;color:#ff0000;">Zookeeper</span>为HBase提供了稳定服务和failover机制。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;color:#ff0000;">Pig和Hive</span>还为HBase提供了高层语言支持，使得在HBase上进行<span style="background-color:inherit;color:#ff0000;">数据统计处理</span>变的非常简单。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"> <span style="background-color:inherit;color:#ff0000;">Sqoop</span>则为HBase提供了方便的<span style="background-color:inherit;color:#ff0000;">RDBMS</span>数据导入功能，使得传统数据库数据向HBase中迁移变的非常方便。</p>
</div>
<div>
<ul style="margin:0px 0px 1.5em;padding:0px;margin-top:0px;margin-bottom:0px;background-color:inherit;font-size:16px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;line-height:1.5;">(4) Hbase访问接口</strong></li>
</ul>
</div>
<div>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">a.   Native Java API：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    最常规和高效的访问方式，适合Hadoop MapReduce Job并行批处理HBase表数据</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">b.   HBase Shell：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    HBase的命令行工具，最简单的接口，适合HBase管理使用</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">c.   Thrift Gateway：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    利用Thrift序列化技术，支持C++，PHP，Python等多种语言，适合其他异构系统在线访问HBase表数据</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">d.   REST Gateway：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    支持REST 风格的Http API访问HBase, 解除了语言限制</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">e.   Pig：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    可以使用Pig Latin流式编程语言来操作HBase中的数据，和Hive类似。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    本质最终也是编译成MapReduce Job来处理HBase表数据，适合做数据统计。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">f.   Hive：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    可以使用类似SQL语言来访问HBase。</p>
<ul style="margin:0px 0px 1.5em;padding:0px;margin-top:0px;margin-bottom:0px;background-color:inherit;font-size:16px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;line-height:1.5;">（5）hbase数据模型</strong></li>
</ul>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;"> (a) </span><span style="background-color:inherit;">Table &amp; Column Family</span></p>
<img src="Hbase模型与框架分享_files/42e3c4e5-8cbc-30d4-b685-5a682ad46718.png" type="image/png" height="241" style="border:0px;" width="626"/>
</div>
<div>(b). <span style="background-color:inherit;">Table &amp; Region</span>
</div>
<div>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">当Table随着记录数不断增加而变大后，会逐渐分裂成多份splits，成为regions，一个region由[startkey,endkey)表示，不同的region会被Master分配给相应的RegionServer进行管理：</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><br/><img src="Hbase模型与框架分享_files/bab605c6-d3a0-3021-9dd3-37ab53523836.png" type="image/png" height="285" style="border:0px;" width="324"/></p>
</div>
<div>(c) -<span style="background-color:inherit;">ROOT- &amp;&amp; .META. Table</span>
</div>
<div>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">HBase中有两张特殊的Table，-ROOT-和.META.</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">Ø <span> </span><span style="background-color:inherit;color:#ff0000;">.META.</span>：记录了用户表的Region信息，.META.可以有多个regoin</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">Ø <span> </span><span style="background-color:inherit;color:#ff0000;">-ROOT-</span>：记录了.META.表的Region信息，-ROOT-只有一个region</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">Ø <span> </span><span style="background-color:inherit;color:#ff0000;">Zookeeper</span>：记录了-ROOT-表的location</p>
<img src="Hbase模型与框架分享_files/0258fdf3-bc6c-3607-b822-15b0dacc5e56.png" type="image/png" height="228" style="border:0px;" width="399"/>
</div>
<div>
<ul style="margin:0px 0px 1.5em;padding:0px;margin-top:0px;margin-bottom:0px;background-color:inherit;font-size:16px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;line-height:1.5;">(5) hbase体系结构</strong></li>
</ul>
</div>
<div><img src="Hbase模型与框架分享_files/34deb5a9-8b0a-3d0f-a92f-8f2d24d0966d.png" type="image/png" height="389" style="border:0px;" width="603"/></div>
<div>
<ul style="margin:0px 0px 1.5em;padding:0px;margin-top:0px;margin-bottom:0px;background-color:inherit;font-size:16px;">
<li style="margin:0px 0px 0.25em 30px;padding:0px;background-color:inherit;"><strong style="font-weight:bold;background-color:inherit;line-height:1.5;">（6） hbase存储格式</strong></li>
</ul>
</div>
<div>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">HBase中的所有数据文件都存储在Hadoop HDFS文件系统上，主要包括上述提出的两种文件类型：</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">a).  HFile：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    HBase中KeyValue数据的存储格式，HFile是Hadoop的二进制格式文件。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    实际上StoreFile就是对HFile做了轻量级包装，即StoreFile底层就是HFile。</p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;"><span style="background-color:inherit;text-decoration:underline;">b). HLog File：</span></p>
<p style="margin:5px 0px;padding:0px;background-color:inherit;">    HBase中WAL（Write Ahead Log） 的存储格式，物理上是Hadoop的Sequence File。</p>
</div>
<p style="margin:0px;padding:0px;"> </p>
</div></div></div></div></div></div></div></div></div><br/></div>
</div></body></html> 